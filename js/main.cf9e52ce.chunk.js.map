{"version":3,"sources":["../../scripts/manifest.js","cmp/BufImageGrey32.js","cmp/DataViewer.js","../../scripts/server.js","../../scripts/network.js","../../scripts/cache.js","../../scripts/engine.js","KolmoApplication.js","../../scripts/formula.js","../../scripts/wasm.js","cmp/ViewButton.js","cmp/Cache.js","cmp/Network.js","cmp/Formula.js","cmp/Manifest.js","App.js","serviceWorker.js","cmp/RunButton.js","index.js"],"names":["Buffer","_home_mikhail_Documents_kolmonet_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_home_mikhail_Documents_kolmonet_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__","_formula_js__WEBPACK_IMPORTED_MODULE_2__","Manifest","json","Object","this","key","value","result","status","data","hasOwnProperty","MIME","size","Uint8Array","from","raw","doi","push","_this","formulas","forEach","json_formula","error","__webpack_exports__","BufImageGrey32","props","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","dataView","DataView","buffer","canvas","document","createElement","context","getContext","width","getUint32","height","currImageData","createImageData","i","data_index","r","image_index","putImageData","dataURI","toDataURL","setState","react_default","a","src","alt","Component","DataViewer","application","updateDataView","bind","assertThisInitialized","setUpdateDataView","clearDataView","data_to_view","calculated_doi","console","log","_this2","TextEncoder","encode","window","crypto","subtle","digest","then","res","byteArray","hexCodes","toConsumableArray","map","toString","padStart","toUpperCase","setDOI","join","clearBtn","onClick","indexOf","stringFromUTF8Array","JSON","stringify","stringFromOctetStream","cmp_BufImageGrey32","className","border","str","count","length","index","countToShrink","toFixed","extraByteMap","Number","ch","extra","chx","String","fromCharCode","server","Server","address","createClass","_get_manifest_by_doi","asyncToGenerator","regenerator_default","mark","_callee","url","response","json_data","wrap","_context","prev","next","fetch","sent","statusText","t0","t1","abrupt","stop","_x","apply","arguments","_get_data_by_doi","_callee2","raw_data","_context2","arrayBuffer","_x2","network","Network","settings","cache","Cache","Error","DedicatedServer","_search_manifest","manifest","dois","search_result","source","get_doi","keys","done","search_manifest_by_doi","_search_manifest_by_doi","json_manifest","_manifest","get_manifest_by_doi","scripts_manifest","set_manifest_by_doi","_search_data","_callee3","_context3","search_data_by_doi","_x3","_search_data_by_doi","_callee4","server_data","_context4","get_data_by_doi","set_data_by_doi","_x4","scripts_cache","manifests","Map","get","set","delete","clear","engine","Engine","_eval_manifest","raw_value","_data","get_raw_value","search_data","get_formulas","search_manifest","eval_formula","_eval_formula","formula","dependencies","get_dependencies","eval_manifest","eval","_eval2","doi_data_formula","cached_data","dependencies_data","dependency_manifest","manifest_data","eval_result","t2","t3","get_data_by_manifest","ArgName","KolmoApplication","dedicated_server_address","options","update_manifest","update_data_view","current_manifest","current_manifest_status","manifest_focus_list","str_manifest","parse","pop","_home_mikhail_Documents_kolmonet_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__","_home_mikhail_Documents_kolmonet_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","n","_home_mikhail_Documents_kolmonet_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_home_mikhail_Documents_kolmonet_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","_home_mikhail_Documents_kolmonet_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__","_manifest_js__WEBPACK_IMPORTED_MODULE_4__","_wasm_js__WEBPACK_IMPORTED_MODULE_5__","Formula","wasm","jsglue","parameters","actor","parameter","param","args","arg","wasm_wrapper","mime","init","exec","get_mime","Wasm","raw_wasm","wasm_memory","_init","wasmModule","Module","WebAssembly","compile","instantiate","exports","memory","Function","Promise","resolve","reject","wasmBinary","onRuntimeInitialized","wasmMemory","create_error","_exec","init_res","arg_index","arg_name_buffer","pointer","pWasmData","argSize","argPointer","pWasmArgData","j","resSize","resPointer","result_data","pResultData","k","_set_arg_name","Uint8ClampedArray","_get_arg_index","create_last_error","_set_arg","_get_result_size","_get_result","text","_get_last_error","_get_last_error_size","ViewButton","_home_mikhail_Documents_kolmonet_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_home_mikhail_Documents_kolmonet_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","textAreaID","manifestDataHolderID","actionClick","_home_mikhail_Documents_kolmonet_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__","event","ReactDOM","unmountComponentAtNode","getElementById","btn_caption","target","innerHTML","process","manifestText","render","react__WEBPACK_IMPORTED_MODULE_6___default","_DataViewer_js__WEBPACK_IMPORTED_MODULE_9__","updateApp","handleCacheOper","handleDataView","handleManifestView","name","startCount","substr","cm","get_cached_manifests","cd","get_cached_data","cachedManifests","title","strDigest","viewManifestButton","cachedData","viewDataButton","get_cached_manifests_size","get_cached_data_size","fetchManifestResult","fetchDataResult","handleFetch","handleDOIChange","fetchRes","defineProperty","id","type","onChange","list","evalResult","handleEval","btn","_this3","dep","cmp_Manifest","getDependencies","init_manifest","rootManifest","handleFetchManifest","handleRemoveManifest","handleFetchData","handleRemoveData","handleViewData","updateManifest","setUpdateManifest","handleChangeManifestFocus","rawData","PopManifestFocusList","PushManifestFocusList","getCurrentManifest","delete_manifest_by_doi","updatedManifest","delete_data_by_doi","ManifestHeader","manifestDoi","manifestInCache","dataInCache","manifestMime","manifestSize","get_size","ManifestControls","mC","dC","dV","_this4","cmp_Formula","outStr","focus_button","ManifestFocusListIsEmpty","getManifestHeader","getManifestControls","getManifestFormulas","App","getCache","getNetwork","forceUpdate","cmp_Cache","cmp_Network","Boolean","location","hostname","match","RunButton","setNewManifest","src_App_0","querySelectorAll","interactivePanel","querySelector","buttonElement","cmp_RunButton","navigator","serviceWorker","ready","registration","unregister"],"mappings":"gGAAA,SAAAA,GAAA,IAAAC,EAAAC,EAAA,GAAAC,EAAAD,EAAA,GAAAE,EAAAF,EAAA,IAIAG,EAEA,WACA,SAAAA,EAAAC,GACIC,OAAAN,EAAA,EAAAM,CAAeC,KAAAH,GAEnBG,KAAAF,OA2FA,OAtFEC,OAAAJ,EAAA,EAAAI,CAAYF,EAAA,EACdI,IAAA,WACAC,MAAA,WACA,IAAAC,EAAA,CACAC,OAAA,cACAC,KAAA,MAQA,OALAL,KAAAF,KAAAQ,eAAA,UACAH,EAAAC,OAAA,KACAD,EAAAE,KAAAL,KAAAF,KAAAS,MAGAJ,IAEG,CACHF,IAAA,WACAC,MAAA,WACA,IAAAC,EAAA,CACAC,OAAA,cACAC,KAAA,MAQA,OALAL,KAAAF,KAAAQ,eAAA,UACAH,EAAAC,OAAA,KACAD,EAAAE,KAAAL,KAAAF,KAAAU,MAGAL,IAEG,CACHF,IAAA,gBACAC,MAAA,WACA,IAAAC,EAAA,CACAC,OAAA,aACAC,KAAA,IAQA,OALAL,KAAAF,KAAAQ,eAAA,SACAH,EAAAC,OAAA,KACAD,EAAAE,KAAA,IAAAI,WAAAjB,EAAAkB,KAAAV,KAAAF,KAAAa,OAGAR,IAEG,CACHF,IAAA,UACAC,MAAA,WACA,IAAAC,EAAA,CACAC,OAAA,KACAC,KAAA,IAGA,GAAAL,KAAAF,KAAAQ,eAAA,OACA,QAAAM,KAAAZ,KAAAF,KAAAc,IACAT,EAAAE,KAAAQ,KAAAb,KAAAF,KAAAc,QAIA,OAAAT,IAEG,CACHF,IAAA,eACAC,MAAA,WACA,IAAAY,EAAAd,KAEAG,EAAA,CACAC,OAAA,GACAC,KAAA,IAcA,OAXAL,KAAAF,KAAAQ,eAAA,aACAN,KAAAF,KAAAiB,SAAAC,QAAA,SAAAC,GACA,IACAd,EAAAE,KAAAQ,KAAA,IAAiCjB,EAAA,EAAOqB,EAAAH,IAC7B,MAAAI,GACXf,EAAAC,QAAA,2BAAAc,EAAA,QAKA,KAAAf,EAAAC,SAAAD,EAAAC,OAAA,MACAD,MAIAN,EA/FA,GAkGesB,EAAA,mICpDAC,cAhDX,SAAAA,EAAYC,GACZ,IAAAP,EAAA,OAAAf,OAAAuB,EAAA,EAAAvB,CAAAC,KAAAoB,IACIN,EAAAf,OAAAwB,EAAA,EAAAxB,CAAAC,KAAAD,OAAAyB,EAAA,EAAAzB,CAAAqB,GAAAK,KAAAzB,KAAMqB,KAEDK,MAAQ,CACTrB,KAAMgB,EAAMhB,MAJpBS,oFAUI,IAAIT,EAAO,IAAII,WAAWT,KAAK0B,MAAMrB,MACjCsB,EAAW,IAAIC,SAASvB,EAAKwB,QAE3BC,EAASC,SAASC,cAAc,UAChCC,EAAUH,EAAOI,WAAW,MAElCJ,EAAOK,MAAQR,EAASS,UAAU,GAAG,GACrCN,EAAOO,OAASV,EAASS,UAAU,GAAG,GAMtC,IAJA,IAAIE,EAAgBL,EAAQM,gBAAgBT,EAAOK,MAAOL,EAAOO,QAE7D7B,EAAOsB,EAAOK,MAAQL,EAAOO,OAExBG,EAAI,EAAGA,EAAIhC,EAAMgC,IAC1B,CACI,IAAIC,EAAa,EAAQ,EAAJD,EACjBE,EAAIf,EAASS,UAAUK,GAAY,GAAS,IAE5CE,EAAkB,EAAJH,EAClBF,EAAcjC,KAAKsC,GAAeD,EAClCJ,EAAcjC,KAAKsC,EAAY,GAAKD,EACpCJ,EAAcjC,KAAKsC,EAAY,GAAKD,EACpCJ,EAAcjC,KAAKsC,EAAY,GAAK,IAGxCV,EAAQW,aAAaN,EAAe,EAAG,GAEvC,IAAMO,EAAUf,EAAOgB,YAEvB9C,KAAK+C,SAAS,CAACF,6CAIf,OAAOG,EAAAC,EAAAjB,cAAA,OAAKkB,IAAKlD,KAAK0B,MAAMmB,QAASM,IAAI,YA9CpBC,aCAvBC,cAEF,SAAAA,EAAYhC,GACZ,IAAAP,EAAA,OAAAf,OAAAuB,EAAA,EAAAvB,CAAAC,KAAAqD,IACIvC,EAAAf,OAAAwB,EAAA,EAAAxB,CAAAC,KAAAD,OAAAyB,EAAA,EAAAzB,CAAAsD,GAAA5B,KAAAzB,KAAMqB,KAEDK,MAAQ,CACT4B,YAAajC,EAAMiC,YACnBjD,KAAMgB,EAAMhB,KACZO,IAAK,IAGLE,EAAKY,MAAM4B,cAEXxC,EAAKyC,eAAiBzC,EAAKyC,eAAeC,KAApBzD,OAAA0D,EAAA,EAAA1D,QAAA0D,EAAA,EAAA1D,CAAAe,KACtBA,EAAKY,MAAM4B,YAAYI,kBAAkB5C,EAAKyC,iBAGlDzC,EAAK6C,cAAgB7C,EAAK6C,cAAcH,KAAnBzD,OAAA0D,EAAA,EAAA1D,QAAA0D,EAAA,EAAA1D,CAAAe,KAfzBA,+EAmBId,KAAKuD,eAAe,6CAGTK,GAEX5D,KAAK+C,SAAS,CACV1C,KAAMuD,mCAIPC,GAKHC,QAAQC,IAAIF,oCAIhB,IAAAG,EAAAhE,KACI,GAAI,MAAQA,KAAK0B,MAAMrB,KACnB,OAAQ2C,EAAAC,EAAAjB,cAAA,YAEZ,IAEM3B,GAFU,IAAI4D,aAECC,OAAOlE,KAAK0B,MAAMrB,KAAKA,MAE5C8D,OAAOC,OAAOC,OAAOC,OAAO,UAAWjE,GAAMkE,KAAM,SAAAC,GAE/C,IAAMC,EAAY,IAAIhE,WAAW+D,GAE3BE,EAAW3E,OAAA4E,EAAA,EAAA5E,CAAI0E,GAAWG,IAAI,SAAA1E,GAGhC,OAFgBA,EAAM2E,SAAS,IACDC,SAAS,EAAG,KAAKC,gBAInDf,EAAKgB,OAAO,iBAAmBN,EAASO,KAAK,OAGjD,IAAIC,EAAW,GACXlF,KAAK0B,MAAM4B,cACX4B,EAAWlC,EAAAC,EAAAjB,cAAA,uBAAcgB,EAAAC,EAAAjB,cAAA,UAAQmD,QAASnF,KAAK2D,eAAtB,WAE7B,IAAIC,EAAe,+BAAiC5D,KAAK0B,MAAMrB,KAAKE,KAAO,IAc3E,OAZK,IAAMP,KAAK0B,MAAMrB,KAAKE,KAAK6E,QAAQ,UACpCxB,EAAe5D,KAAKqF,oBAAoBrF,KAAK0B,MAAMrB,KAAKA,QAEvD,IAAML,KAAK0B,MAAMrB,KAAKE,KAAK6E,QAAQ,UACpCxB,EAAe0B,KAAKC,UAAUvF,KAAK0B,MAAMrB,KAAKA,QAE7C,IAAML,KAAK0B,MAAMrB,KAAKE,KAAK6E,QAAQ,kBACpCxB,EAAe5D,KAAKwF,sBAAsBxF,KAAK0B,MAAMrB,KAAKA,QAEzD,IAAML,KAAK0B,MAAMrB,KAAKE,KAAK6E,QAAQ,qBACpCxB,EAAeZ,EAAAC,EAAAjB,cAACyD,EAAD,CAAgBpF,KAAML,KAAK0B,MAAMrB,KAAKA,QAGrD2C,EAAAC,EAAAjB,cAAA,OAAK0D,UAAU,cACX1C,EAAAC,EAAAjB,cAAA,SAAO2D,OAAO,IAAIxD,MAAM,QACnB+C,EACDlC,EAAAC,EAAAjB,cAAA,UAAK4B,GACLZ,EAAAC,EAAAjB,cAAA,UAAKhC,KAAK0B,MAAMd,qDAMVP,GAElB,IACIuF,EAAM,GACNC,EAAQxF,EAAKyF,OAEbD,EAJa,KAMbA,EANa,GAObD,EAAM,oBAGV,IAAK,IAAIG,EAAQ,EAAGA,EAAQF,GAC5B,CACI,IAEIrB,EAFKnE,EAAK0F,KAEDlB,SAAS,IAAIE,cAEP,IAAfP,EAAIsB,SAActB,EAAM,IAAMA,GAElCoB,GAAOpB,EAGX,OAAOoB,8CAGSvF,GAShB,IAPA,IACM2F,EAAgB,KAAeC,QAAQ,GAEvCC,EAAe,CAAE,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACxCL,EAAQxF,EAAKyF,OACbF,EAAM,GAEDG,EAAQ,EAAGA,EAAQF,GAExB,GAAIA,EATS,KAWLE,GAASC,IAELD,IAAUI,OAAOH,KACjBJ,GAAO,OAASC,EAAQG,EAAgBA,GAAiB,aAEzDD,EAASF,EAAQG,GAEjBD,QATZ,CAeA,IAAIK,EAAK/F,EAAK0F,KACd,GAAS,IAALK,EACJ,CACA,IAAIC,EAAQH,EAAcE,GAAM,EAAK,GACrC,KAAW,GAALA,KAAeC,GAAWN,EAAQM,EAASR,EAC7C,OAAO,KAGX,IADAO,GAAW,IAAQC,EACbA,EAAQ,EAAEA,GAAS,EACzB,CACI,IAAIC,EAAMjG,EAAK0F,KACf,GAAqB,OAAV,IAANO,GACL,OAAO,KAEPF,EAAMA,GAAM,EAAY,GAANE,GAItBV,GAAOW,OAAOC,aAAaJ,GAG/B,OAAOR,SApKUxC,aAwKVC,6ECPAoD,EA5Jf,WACA,SAAAC,EAAAC,GACI5G,OAAAuB,EAAA,EAAAvB,CAAeC,KAAA0G,GAEnB1G,KAAA2G,UAqJA,OAlJE5G,OAAA6G,EAAA,EAAA7G,CAAY2G,EAAA,EACdzG,IAAA,sBACAC,MAAA,WACA,IAAA2G,EAAiC9G,OAAA+G,EAAA,EAAA/G,CAE3BgH,EAAA9D,EAAmB+D,KAAA,SAAAC,EAAArG,GACzB,IAAAT,EAAA+G,EAAAC,EAAAC,EACA,OAAeL,EAAA9D,EAAmBoE,KAAA,SAAAC,GAClC,OACA,OAAAA,EAAAC,KAAAD,EAAAE,MACA,OAQA,OAPArH,EAAA,CACAC,OAAA,GACAC,KAAA,MAEA6G,EAAAlH,KAAA2G,QAAA,eAAA/F,EACA0G,EAAAC,KAAA,EACAD,EAAAE,KAAA,EACAC,MAAAP,GAEA,OAIA,GAHAC,EAAAG,EAAAI,KACAJ,EAAAC,KAAA,EAEA,MAAAJ,EAAA/G,OAAA,CACAkH,EAAAE,KAAA,GACA,MAIA,OADAF,EAAAE,KAAA,GACAL,EAAArH,OAEA,QACAsH,EAAAE,EAAAI,KACAvH,EAAAE,KAAA+G,EACAjH,EAAAC,OAAA,KACAkH,EAAAE,KAAA,GACA,MAEA,QACArH,EAAAC,OAAA,mBAAA+G,EAAAQ,WAEA,QACAL,EAAAE,KAAA,GACA,MAEA,QACAF,EAAAC,KAAA,GACAD,EAAAM,GAAAN,EAAA,SACAnH,EAAAC,OAAA,0BAAAkH,EAAAM,GAAA,IAEA,QACAN,EAAAE,KAAA,GACA,MAEA,QACAF,EAAAC,KAAA,GACAD,EAAAO,GAAAP,EAAA,SACAnH,EAAAC,OAAA,4BAAAkH,EAAAO,GAAA,IAEA,QACA,OAAAP,EAAAQ,OAAA,SAAA3H,GAEA,QACA,UACA,OAAAmH,EAAAS,SAGSd,EAAAjH,KAAA,oBAOT,OAJA,SAAAgI,GACA,OAAAnB,EAAAoB,MAAAjI,KAAAkI,YAtEA,IA2EG,CACHjI,IAAA,kBACAC,MAAA,WACA,IAAAiI,EAA6BpI,OAAA+G,EAAA,EAAA/G,CAEvBgH,EAAA9D,EAAmB+D,KAAA,SAAAoB,EAAAxH,GACzB,IAAAT,EAAA+G,EAAAC,EAAAkB,EACA,OAAetB,EAAA9D,EAAmBoE,KAAA,SAAAiB,GAClC,OACA,OAAAA,EAAAf,KAAAe,EAAAd,MACA,OAQA,OAPArH,EAAA,CACAC,OAAA,GACAC,KAAA,MAEA6G,EAAAlH,KAAA2G,QAAA,QAAA/F,EACA0H,EAAAf,KAAA,EACAe,EAAAd,KAAA,EACAC,MAAAP,GAEA,OAGA,UAFAC,EAAAmB,EAAAZ,MAEAtH,OAAA,CACAkI,EAAAd,KAAA,GACA,MAIA,OADAc,EAAAd,KAAA,EACAL,EAAAoB,cAEA,OACAF,EAAAC,EAAAZ,KACAvH,EAAAE,KAAAgI,EACAlI,EAAAC,OAAA,KACAkI,EAAAd,KAAA,GACA,MAEA,QACArH,EAAAC,OAAA,mBAAA+G,EAAAQ,WAEA,QACAW,EAAAd,KAAA,GACA,MAEA,QACAc,EAAAf,KAAA,GACAe,EAAAV,GAAAU,EAAA,SACAnI,EAAAC,OAAA,4BAAAkI,EAAAV,GAAA,IAEA,QACA,OAAAU,EAAAR,OAAA,SAAA3H,GAEA,QACA,UACA,OAAAmI,EAAAP,SAGSK,EAAApI,KAAA,aAOT,OAJA,SAAAwI,GACA,OAAAL,EAAAF,MAAAjI,KAAAkI,YA5DA,MAmEAxB,EAzJA,UCuVe+B,EArVf,WACA,SAAAC,EAAAC,EAAAC,GAKA,GAJI7I,OAAAuB,EAAA,EAAAvB,CAAeC,KAAA0I,GAEnB1I,KAAA6I,MAAAD,GAEAD,EAAArI,eAAA,mBAKA,UAAAwI,MAAA,wBAJA9I,KAAA+I,gBAAA,IAAiCtC,EAAMkC,EAAA,iBA2UvC,OApUE5I,OAAA6G,EAAA,EAAA7G,CAAY2I,EAAA,EACdzI,IAAA,kBACAC,MAAA,WACA,IAAA8I,EAA6BjJ,OAAA+G,EAAA,EAAA/G,CAEvBgH,EAAA9D,EAAmB+D,KAAA,SAAAC,EAAAgC,GACzB,IAAA9I,EAAA+I,EAAAtI,EAAAuI,EACA,OAAepC,EAAA9D,EAAmBoE,KAAA,SAAAC,GAClC,OACA,OAAAA,EAAAC,KAAAD,EAAAE,MACA,OAQA,GAPArH,EAAA,CACAC,OAAA,YACAgJ,OAAA,KACA/I,KAAA,MAIA,KAFA6I,EAAAD,EAAAI,WAEAhJ,KAAAyF,OAAA,CACAwB,EAAAE,KAAA,EACA,MAIA,OADArH,EAAAC,OAAA,sBACAkH,EAAAQ,OAAA,SAAA3H,GAEA,OACA,IAAAH,KAAA+I,gBAAA,CACAzB,EAAAE,KAAA,GACA,MAGAF,EAAAM,GAA8Bb,EAAA9D,EAAmBqG,KAAAJ,EAAA7I,MAEjD,OACA,IAAAiH,EAAAO,GAAAP,EAAAM,MAAA2B,KAAA,CACAjC,EAAAE,KAAA,GACA,MAKA,OAFA5G,EAAA0G,EAAAO,GAAA3H,MACAoH,EAAAE,KAAA,GACAxH,KAAAwJ,uBAAAN,EAAA7I,KAAAO,IAEA,QAGA,WAFAuI,EAAA7B,EAAAI,MAEAtH,OAAA,CACAkH,EAAAE,KAAA,GACA,MAMA,OAHArH,EAAAC,OAAA,KACAD,EAAAiJ,OAAAD,EAAAC,OACAjJ,EAAAE,KAAA8I,EAAA9I,KACAiH,EAAAQ,OAAA,SAAA3H,GAEA,QACAA,EAAAC,OAAA+I,EAAA/I,OAEA,QACAkH,EAAAE,KAAA,EACA,MAEA,QACA,OAAAF,EAAAQ,OAAA,SAAA3H,GAEA,QACA,UACA,OAAAmH,EAAAS,SAGSd,EAAAjH,SAOT,OAJA,SAAAgI,GACA,OAAAgB,EAAAf,MAAAjI,KAAAkI,YA1EA,IA+EG,CACHjI,IAAA,yBACAC,MAAA,WACA,IAAAuJ,EAAoC1J,OAAA+G,EAAA,EAAA/G,CAE9BgH,EAAA9D,EAAmB+D,KAAA,SAAAoB,EAAAxH,GACzB,IAAAT,EAAA8I,EAAAS,EAAAC,EAEA,OAAe5C,EAAA9D,EAAmBoE,KAAA,SAAAiB,GAClC,OACA,OAAAA,EAAAf,KAAAe,EAAAd,MACA,OAOA,GANArH,EAAA,CACAC,OAAA,GACAgJ,OAAA,KACA/I,KAAA,OAGAL,KAAA+I,gBAAA,CACAT,EAAAd,KAAA,GACA,MAKA,WAFAyB,EAAAjJ,KAAA6I,MAAAe,oBAAAhJ,IAEAR,OAAA,CACAkI,EAAAd,KAAA,EACA,MAGArH,EAAAC,OAAA,KACAD,EAAAiJ,OAAA,QACAjJ,EAAAE,KAAA4I,EAAA5I,KACAiI,EAAAd,KAAA,GACA,MAEA,OAEA,OADAc,EAAAd,KAAA,GACAxH,KAAA+I,gBAAAa,oBAAAhJ,GAEA,QAGA,WAFA8I,EAAApB,EAAAZ,MAEAtH,OACA,IACAuJ,EAAA,IAAoCE,EAAA,EAAQH,EAAArJ,MAC5CF,EAAAC,OAAA,KACAD,EAAAiJ,OAAA,UACAjJ,EAAAE,KAAAsJ,EACA3J,KAAA6I,MAAAiB,oBAAAH,EAAA/I,GACmB,MAAAM,GACnBf,EAAAC,OAAA,uBAAAc,EAAA,SAGAf,EAAAC,OAAAsJ,EAAAtJ,OAGA,QACAkI,EAAAd,KAAA,GACA,MAEA,QACArH,EAAAC,OAAA,kBAEA,QACA,OAAAkI,EAAAR,OAAA,SAAA3H,GAEA,QACA,UACA,OAAAmI,EAAAP,SAGSK,EAAApI,SAOT,OAJA,SAAAwI,GACA,OAAAiB,EAAAxB,MAAAjI,KAAAkI,YA1EA,IA+EG,CACHjI,IAAA,cACAC,MAAA,WACA,IAAA6J,EAAyBhK,OAAA+G,EAAA,EAAA/G,CAEnBgH,EAAA9D,EAAmB+D,KAAA,SAAAgD,EAAAf,GACzB,IAAA9I,EAAA+I,EAAAtI,EAAAuI,EACA,OAAepC,EAAA9D,EAAmBoE,KAAA,SAAA4C,GAClC,OACA,OAAAA,EAAA1C,KAAA0C,EAAAzC,MACA,OAQA,GAPArH,EAAA,CACAC,OAAA,YACAgJ,OAAA,KACA/I,KAAA,MAIA,KAFA6I,EAAAD,EAAAI,WAEAhJ,KAAAyF,OAAA,CACAmE,EAAAzC,KAAA,EACA,MAIA,OADArH,EAAAC,OAAA,sBACA6J,EAAAnC,OAAA,SAAA3H,GAEA,OACA,IAAAH,KAAA+I,gBAAA,CACAkB,EAAAzC,KAAA,GACA,MAGAyC,EAAArC,GAA+Bb,EAAA9D,EAAmBqG,KAAAJ,EAAA7I,MAElD,OACA,IAAA4J,EAAApC,GAAAoC,EAAArC,MAAA2B,KAAA,CACAU,EAAAzC,KAAA,GACA,MAKA,OAFA5G,EAAAqJ,EAAApC,GAAA3H,MACA+J,EAAAzC,KAAA,GACAxH,KAAAkK,mBAAAhB,EAAA7I,KAAAO,IAEA,QAGA,WAFAuI,EAAAc,EAAAvC,MAEAtH,OAAA,CACA6J,EAAAzC,KAAA,GACA,MAMA,OAHArH,EAAAC,OAAA,KACAD,EAAAiJ,OAAAD,EAAAC,OACAjJ,EAAAE,KAAA8I,EAAA9I,KACA4J,EAAAnC,OAAA,SAAA3H,GAEA,QACAA,EAAAC,OAAA+I,EAAA/I,OAEA,QACA6J,EAAAzC,KAAA,EACA,MAEA,QACA,OAAAyC,EAAAnC,OAAA,SAAA3H,GAEA,QACA,UACA,OAAA8J,EAAAlC,SAGSiC,EAAAhK,SAOT,OAJA,SAAAmK,GACA,OAAAJ,EAAA9B,MAAAjI,KAAAkI,YA1EA,IA+EG,CACHjI,IAAA,qBACAC,MAAA,WACA,IAAAkK,EAAgCrK,OAAA+G,EAAA,EAAA/G,CAE1BgH,EAAA9D,EAAmB+D,KAAA,SAAAqD,EAAAzJ,GACzB,IAAAT,EAAAE,EAAAiK,EACA,OAAevD,EAAA9D,EAAmBoE,KAAA,SAAAkD,GAClC,OACA,OAAAA,EAAAhD,KAAAgD,EAAA/C,MACA,OAOA,GANArH,EAAA,CACAC,OAAA,GACAgJ,OAAA,KACA/I,KAAA,OAGAL,KAAA+I,gBAAA,CACAwB,EAAA/C,KAAA,GACA,MAKA,WAFAnH,EAAAL,KAAA6I,MAAA2B,gBAAA5J,IAEAR,OAAA,CACAmK,EAAA/C,KAAA,EACA,MAMA,OAHArH,EAAAC,OAAA,KACAD,EAAAiJ,OAAA,QACAjJ,EAAAE,YACAkK,EAAAzC,OAAA,SAAA3H,GAEA,OAEA,OADAoK,EAAA/C,KAAA,GACAxH,KAAA+I,gBAAAyB,gBAAA5J,GAEA,QAGA,WAFA0J,EAAAC,EAAA7C,MAEAtH,OAAA,CACAmK,EAAA/C,KAAA,GACA,MAOA,OAJArH,EAAAC,OAAA,KACAD,EAAAiJ,OAAA,UACAjJ,EAAAE,KAAAiK,EAAAjK,KACAL,KAAA6I,MAAA4B,gBAAAH,EAAAjK,KAAAO,GACA2J,EAAAzC,OAAA,SAAA3H,GAEA,QACAA,EAAAC,OAAAkK,EAAAlK,OAEA,QACAmK,EAAA/C,KAAA,GACA,MAEA,QACArH,EAAAC,OAAA,kBAEA,QACA,OAAAmK,EAAAzC,OAAA,SAAA3H,GAEA,QACA,UACA,OAAAoK,EAAAxC,SAGSsC,EAAArK,SAOT,OAJA,SAAA0K,GACA,OAAAN,EAAAnC,MAAAjI,KAAAkI,YAxEA,MA+EAQ,EAlVA,GC8HeiC,EAlIf,WACA,SAAA9B,IACI9I,OAAAuB,EAAA,EAAAvB,CAAeC,KAAA6I,GAEnB7I,KAAA4K,UAAA,IAAAC,IACA7K,KAAAK,KAAA,IAAAwK,IA0HA,OAvHE9K,OAAA6G,EAAA,EAAA7G,CAAY8I,EAAA,EACd5I,IAAA,sBACAC,MAAA,SAAAU,GACA,IAAAT,EAAA,CACAC,OAAA,YACAC,KAAA,MAEA4I,EAAAjJ,KAAA4K,UAAAE,IAAAlK,GAOA,OALAqI,IACA9I,EAAAC,OAAA,KACAD,EAAAE,KAAA4I,GAGA9I,IAEG,CACHF,IAAA,sBACAC,MAAA,SAAA+I,EAAArI,GACAZ,KAAA4K,UAAAG,IAAAnK,EAAAqI,KAEG,CACHhJ,IAAA,yBACAC,MAAA,SAAAU,GACA,OAAAZ,KAAA4K,UAAAI,OAAApK,KAEG,CACHX,IAAA,kBACAC,MAAA,SAAAU,GACA,IAAAT,EAAA,CACAC,OAAA,YACAC,KAAA,MAEAA,EAAAL,KAAAK,KAAAyK,IAAAlK,GAOA,OALAP,IACAF,EAAAC,OAAA,KACAD,EAAAE,QAGAF,IAEG,CACHF,IAAA,uBACAC,MAAA,SAAA+I,GACA,IAAA9I,EAAA,CACAC,OAAA,YACAC,KAAA,MAEA6I,EAAAD,EAAAI,UAEA,UAAAH,EAAA9I,OACA,QAAAQ,KAAAsI,EAAA7I,KAAA,CACA,IAAAA,EAAAL,KAAAK,KAAAyK,IAAA5B,EAAA7I,KAAAO,IAEA,GAAAP,EAGA,OAFAF,EAAAC,OAAA,KACAD,EAAAE,OACAF,OAGOA,EAAAC,OAAA,sBAEP,OAAAD,IAEG,CACHF,IAAA,kBACAC,MAAA,SAAAG,EAAAO,GACAZ,KAAAK,KAAA0K,IAAAnK,EAAA,IAAAH,WAAAJ,MAEG,CACHJ,IAAA,qBACAC,MAAA,SAAAU,GACA,OAAAZ,KAAAK,KAAA2K,OAAApK,KAEG,CACHX,IAAA,QACAC,MAAA,WACA,IAAAM,EAAAR,KAAA4K,UAAApK,KAAAR,KAAAK,KAAAG,KAGA,OAFAR,KAAA4K,UAAAK,QACAjL,KAAAK,KAAA4K,QACA,IAAAzK,IAEG,CACHP,IAAA,uBACAC,MAAA,WACA,IAAAC,EAAA,GAOA,OANAH,KAAA4K,UAAA5J,QAAA,SAAAd,EAAAD,GACAE,EAAAU,KAAA,CACAD,IAAAX,EACAC,YAGAC,IAEG,CACHF,IAAA,4BACAC,MAAA,WACA,OAAAF,KAAA4K,UAAApK,OAEG,CACHP,IAAA,kBACAC,MAAA,WACA,IAAAC,EAAA,GAOA,OANAH,KAAAK,KAAAW,QAAA,SAAAd,EAAAD,GACAE,EAAAU,KAAA,CACAD,IAAAX,EACAC,YAGAC,IAEG,CACHF,IAAA,uBACAC,MAAA,WACA,OAAAF,KAAAK,KAAAG,SAIAqI,EA/HA,GCmYeqC,EA/Xf,WACA,SAAAC,EAAAxC,GAKA,GAJI5I,OAAAuB,EAAA,EAAAvB,CAAeC,KAAAmL,GAEnBnL,KAAA6I,MAAA,IAAqB8B,GAErBhC,EAAArI,eAAA,WAKA,UAAAwI,MAAA,uBAJA9I,KAAA0I,QAAA,IAAyBD,EAAOE,EAAA,QAAA3I,KAAA6I,OAqXhC,OA9WE9I,OAAA6G,EAAA,EAAA7G,CAAYoL,EAAA,EACdlL,IAAA,UACAC,MAAA,WACA,OAAAF,KAAA0I,UAEG,CACHzI,IAAA,QACAC,MAAA,WACA,OAAAF,KAAA6I,QAEG,CACH5I,IAAA,gBACAC,MAAA,WACA,IAAAkL,EAA2BrL,OAAA+G,EAAA,EAAA/G,CAErBgH,EAAA9D,EAAmB+D,KAAA,SAAAC,EAAAgC,GACzB,IAAA9I,EAAAkL,EAAAhL,EAAAU,EAAAyB,EAAA8I,EAEA,OAAevE,EAAA9D,EAAmBoE,KAAA,SAAAC,GAClC,OACA,OAAAA,EAAAC,KAAAD,EAAAE,MACA,OAOA,GANArH,EAAA,CACAC,OAAA,GACAC,KAAA,IAIA,QAFAgL,EAAApC,EAAAsC,iBAEAnL,OAAA,CACAkH,EAAAE,KAAA,EACA,MAKA,OAFArH,EAAAC,OAAA,KACAD,EAAAE,KAAAgL,EAAAhL,KACAiH,EAAAQ,OAAA,SAAA3H,GAEA,OAEA,OADAmH,EAAAE,KAAA,EACAxH,KAAA0I,QAAA8C,YAAAvC,GAEA,OAGA,WAFA5I,EAAAiH,EAAAI,MAEAtH,OAAA,CACAkH,EAAAE,KAAA,GACA,MAKA,OAFArH,EAAAC,OAAA,KACAD,EAAAE,YACAiH,EAAAQ,OAAA,SAAA3H,GAEA,QAGA,QAFAY,EAAAkI,EAAAwC,gBAEApL,KAAAyF,OAAA,CACAwB,EAAAE,KAAA,GACA,MAKA,OAFArH,EAAAC,OAAA,2BACAkH,EAAAE,KAAA,GACAxH,KAAA0I,QAAAgD,gBAAAzC,GAEA,QAGA,WAFAA,EAAA3B,EAAAI,MAEAtH,OAAA,CACAkH,EAAAE,KAAA,GACA,MAIA,OADArH,EAAAC,OAAA6I,EAAA7I,OACAkH,EAAAQ,OAAA,SAAA3H,GAEA,QACAY,EAAAkI,EAAA5I,KAAAoL,eAEA,QACAnE,EAAAM,GAA8Bb,EAAA9D,EAAmBqG,KAAAvI,EAAAV,MAEjD,QACA,IAAAiH,EAAAO,GAAAP,EAAAM,MAAA2B,KAAA,CACAjC,EAAAE,KAAA,GACA,MAKA,OAFAhF,EAAA8E,EAAAO,GAAA3H,MACAoH,EAAAE,KAAA,GACAxH,KAAA2L,aAAA5K,EAAAV,KAAAmC,IAEA,QAGA,WAFA8I,EAAAhE,EAAAI,MAEAtH,OAAA,CACAkH,EAAAE,KAAA,GACA,MAKA,OAFArH,EAAAC,OAAA,KACAD,EAAAE,KAAAiL,EAAAjL,KACAiH,EAAAQ,OAAA,SAAA3H,GAEA,QACAA,EAAAC,OAAAkL,EAAAlL,OACAkH,EAAAE,KAAA,GACA,MAEA,QACA,OAAAF,EAAAQ,OAAA,SAAA3H,GAEA,QACA,UACA,OAAAmH,EAAAS,SAGSd,EAAAjH,SAOT,OAJA,SAAAgI,GACA,OAAAoD,EAAAnD,MAAAjI,KAAAkI,YA7GA,IAkHG,CACHjI,IAAA,eACAC,MAAA,WACA,IAAA0L,EAA0B7L,OAAA+G,EAAA,EAAA/G,CAEpBgH,EAAA9D,EAAmB+D,KAAA,SAAAoB,EAAAyD,GACzB,IAAA1L,EAAA2L,EAAAtJ,EAAAnC,EACA,OAAe0G,EAAA9D,EAAmBoE,KAAA,SAAAiB,GAClC,OACA,OAAAA,EAAAf,KAAAe,EAAAd,MACA,OAOA,GANArH,EAAA,CACAC,OAAA,GACAC,KAAA,IAIA,QAFAyL,EAAAD,EAAAE,oBAEA3L,OAAA,CACAkI,EAAAd,KAAA,GACA,MAGAc,EAAAV,GAA+Bb,EAAA9D,EAAmBqG,KAAAwC,EAAAzL,MAElD,OACA,IAAAiI,EAAAT,GAAAS,EAAAV,MAAA2B,KAAA,CACAjB,EAAAd,KAAA,GACA,MAKA,OAFAhF,EAAA8F,EAAAT,GAAA3H,MACAoI,EAAAd,KAAA,EACAxH,KAAA0I,QAAA8C,YAAAM,EAAAzL,KAAAmC,IAEA,OAGA,UAFA8F,EAAAZ,KAEAtH,OAAA,CACAkI,EAAAd,KAAA,GACA,MAIA,OADAc,EAAAd,KAAA,GACAxH,KAAAgM,cAAAF,EAAAzL,KAAAmC,IAEA,QAGA,WAFAnC,EAAAiI,EAAAZ,MAEAtH,OAAA,CACAkI,EAAAd,KAAA,GACA,MAIA,OADArH,EAAAC,OAAAC,EAAAD,OACAkI,EAAAR,OAAA,SAAA3H,GAEA,QACAmI,EAAAd,KAAA,EACA,MAEA,QACAc,EAAAd,KAAA,GACA,MAEA,QAEA,OADArH,EAAAC,OAAA,8BACAkI,EAAAR,OAAA,SAAA3H,GAEA,QAEA,OADAmI,EAAAd,KAAA,GACAxH,KAAAiM,KAAAJ,GAEA,QACA,OAAAvD,EAAAR,OAAA,SAAAQ,EAAAZ,MAEA,QACA,UACA,OAAAY,EAAAP,SAGSK,EAAApI,SAOT,OAJA,SAAAwI,GACA,OAAAoD,EAAA3D,MAAAjI,KAAAkI,YAlFA,IAuFG,CACHjI,IAAA,OACAC,MAAA,WACA,IAAAgM,EAAmBnM,OAAA+G,EAAA,EAAA/G,CAEbgH,EAAA9D,EAAmB+D,KAAA,SAAAgD,EAAA6B,GACzB,IAAA1L,EAAAgM,EAAAjD,EAAAtI,EAAAwL,EAAAC,EAAAP,EAAAQ,EAAArD,EAAAsD,EAAAlB,EAAAmB,EACA,OAAezF,EAAA9D,EAAmBoE,KAAA,SAAA4C,GAClC,OACA,OAAAA,EAAA1C,KAAA0C,EAAAzC,MACA,OAQA,GAPArH,EAAA,CACAC,OAAA,GACAgJ,OAAA,KACA/I,KAAA,IAEA8L,EAAA,MAEAN,EAAA5C,SAAA,CACAgB,EAAAzC,KAAA,GACA,MAKA,WAFA0B,EAAA2C,EAAA5C,SAAAI,WAEAjJ,OAAA,CACA6J,EAAAzC,KAAA,GACA,MAGAyC,EAAArC,GAA+Bb,EAAA9D,EAAmBqG,KAAAJ,EAAA7I,MAElD,OACA,IAAA4J,EAAApC,GAAAoC,EAAArC,MAAA2B,KAAA,CACAU,EAAAzC,KAAA,GACA,MAOA,GAJA5G,EAAAqJ,EAAApC,GAAA3H,MACAiM,EAAAjD,EAAA7I,KAAAO,GAGA,QAFAwL,EAAApM,KAAA6I,MAAA2B,gBAAA2B,IAEA/L,OAAA,CACA6J,EAAAzC,KAAA,GACA,MAMA,OAHArH,EAAAC,OAAA,KACAD,EAAAiJ,OAAA,QACAjJ,EAAAE,KAAA+L,EAAA/L,KACA4J,EAAAnC,OAAA,SAAA3H,GAEA,QACA8J,EAAAzC,KAAA,EACA,MAEA,QAIA,GAHA6E,EAAA,IAAAxB,IAGA,QAFAiB,EAAAD,EAAAE,oBAEA3L,OAAA,CACA6J,EAAAzC,KAAA,GACA,MAGAyC,EAAAwC,GAA+B1F,EAAA9D,EAAmBqG,KAAAwC,EAAAzL,MAElD,QACA,IAAA4J,EAAAyC,GAAAzC,EAAAwC,MAAAlD,KAAA,CACAU,EAAAzC,KAAA,GACA,MAMA,OAHA8E,EAAArC,EAAAyC,GAAAxM,MACA+I,EAAA6C,EAAAzL,KAAAiM,GACArC,EAAAzC,KAAA,GACAxH,KAAA6I,MAAA8D,qBAAA1D,GAEA,QAGA,WAFAsD,EAAAtC,EAAAvC,MAEAtH,OAAA,CACA6J,EAAAzC,KAAA,GACA,MAGA6E,EAAAtB,IAAA9B,EAAA2D,QAAAL,EAAAlM,MACA4J,EAAAzC,KAAA,GACA,MAEA,QAGA,WAFA6D,EAAApC,EAAAsC,iBAEAnL,OAAA,CACA6J,EAAAzC,KAAA,GACA,MAGA6E,EAAAtB,IAAA9B,EAAA2D,QAAAvB,EAAAhL,MACA4J,EAAAzC,KAAA,GACA,MAEA,QAEA,OADArH,EAAAC,OAAA,qCAAA6I,EAAA2D,QACA3C,EAAAnC,OAAA,SAAA3H,GAEA,QACA8J,EAAAzC,KAAA,GACA,MAEA,QACAyC,EAAAzC,KAAA,GACA,MAEA,QAEA,OADArH,EAAAC,OAAA,8BACA6J,EAAAnC,OAAA,SAAA3H,GAEA,QAEA,OADA8J,EAAAzC,KAAA,GACAqE,EAAAI,KAAAI,GAEA,QAWA,MARA,QAFAG,EAAAvC,EAAAvC,MAEAtH,QAEAD,EAAAC,OAAA,KACAD,EAAAiJ,OAAA,aACAjJ,EAAAE,KAAAmM,EAAAnM,KACA8L,GAAAnM,KAAA6I,MAAA4B,gBAAA+B,EAAAnM,KAAA8L,IACiBhM,EAAAC,OAAA,6BAAAoM,EAAApM,OAAA,IAEjB6J,EAAAnC,OAAA,SAAA3H,GAEA,QACA,UACA,OAAA8J,EAAAlC,SAGSiC,EAAAhK,SAOT,OAJA,SAAAmK,GACA,OAAA+B,EAAAjE,MAAAjI,KAAAkI,YA9IA,MAqJAiD,EA5XA,GCNM0B,aAEF,SAAAA,EAAYC,GACX/M,OAAAuB,EAAA,EAAAvB,CAAAC,KAAA6M,GACG,IAAIE,EAAU,CACVrE,QAAS,CACLK,gBAAiB+D,IAIzB9M,KAAKkL,OAAS,IAAIC,EAAO4B,GAEzB/M,KAAKgN,gBAAkB,KACvBhN,KAAKiN,iBAAmB,KAExBjN,KAAKkN,iBAAmB,KACxBlN,KAAKmN,wBAA0B,cAE/BnN,KAAKoN,oBAAsB,iEAGbJ,GACdhN,KAAKgN,gBAAkBA,4CAGTC,GACdjN,KAAKiN,iBAAmBA,yCAGb5M,GAEP,MAAQL,KAAKiN,kBACbjN,KAAKiN,iBAAiB5M,sCAI1B,OAAOL,KAAKkL,OAAOtC,6CAInB,OAAO5I,KAAKkL,OAAOzC,uDAKnB,IAAItI,EAAS,CACTC,OAAQ,KACRC,KAAM,MAMV,OAHAF,EAAOE,KAAOL,KAAKkN,iBACnB/M,EAAOC,OAASJ,KAAKmN,wBAEdhN,yCAGIkN,GAEXrN,KAAKoN,oBAAsB,GAE3BpN,KAAKkN,iBAAmB,KACxBlN,KAAKmN,wBAA0B,cAE/B,IAEInN,KAAKkN,iBAAmB,IAAIrN,IAASyF,KAAKgI,MAAMD,IAChDrN,KAAKmN,wBAA0B,KAEnC,MAAMjM,GAEFlB,KAAKmN,wBAA0B,4BAA8BjM,EAG7D,OAASlB,KAAKgN,iBACdhN,KAAKgN,gEAGS/D,GAEd,IAAMjJ,KAAKoN,oBAAoBtH,QAC/B9F,KAAKoN,oBAAoBvM,KAAK,CAAER,KAAKL,KAAKkN,iBAAkB9M,OAAOJ,KAAKmN,0BAE5EnN,KAAKoN,oBAAoBvM,KAAK,CAAER,KAAK4I,EAAS5I,KAAMD,OAAO6I,EAAS7I,SAEpEJ,KAAKkN,iBAAmBjE,EAAS5I,KACjCL,KAAKmN,wBAA0BlE,EAAS7I,OAEpC,OAASJ,KAAKgN,iBACdhN,KAAKgN,iEAKT,IAAI/D,EAAWjJ,KAAKoN,oBAAoBG,MAEpC,MAAQtE,GAIJ,OAFJA,EAAWjJ,KAAKoN,oBAAoBG,SAIhCvN,KAAKkN,iBAAmBjE,EAAS5I,KACjCL,KAAKmN,wBAA0BlE,EAAS7I,OAEpC,OAASJ,KAAKgN,iBACdhN,KAAKgN,sEAMjB,OAAQ,IAAMhN,KAAKoN,oBAAoBtH,gBAIhC+G,wCCtHf,IAAAW,EAAA9N,EAAA,GAAA+N,EAAA/N,EAAAgO,EAAAF,GAAAG,EAAAjO,EAAA,GAAAkO,EAAAlO,EAAA,GAAAmO,EAAAnO,EAAA,GAAAoO,EAAApO,EAAA,GAAAqO,EAAArO,EAAA,IAOAsO,EAEA,WACA,SAAAA,EAAAlO,EAAAmJ,GASA,GARIlJ,OAAA6N,EAAA,EAAA7N,CAAeC,KAAAgO,GAEnBhO,KAAAF,OACAE,KAAAiJ,WACAjJ,KAAAiO,KAAA,KACAjO,KAAAkO,OAAA,KACAlO,KAAAmO,WAAA,IAEAnO,KAAAF,KAAAQ,eAAA,mBAAAwI,MAAA,qCACA,IAAA9I,KAAAF,KAAAsO,MAAA9N,eAAA,kBAAAwI,MAAA,0CAUA,GATA9I,KAAAiO,KAAA,IAAoBH,EAAA,EAAQ9N,KAAAF,KAAAsO,MAAAH,MAC5BjO,KAAAiO,KAAArB,QAAA,aAEA5M,KAAAF,KAAAsO,MAAA9N,eAAA,YACAN,KAAAkO,OAAA,IAAwBJ,EAAA,EAAQ9N,KAAAF,KAAAsO,MAAAF,QAChClO,KAAAkO,OAAAtB,QAAA,iBAIA5M,KAAAF,KAAAQ,eAAA,wBAAAwI,MAAA,0CAEA,QAAAuF,KAAArO,KAAAF,KAAAqO,WAAA,CACA,IAAAG,EAAA,IAAsBR,EAAA,EAAQ9N,KAAAF,KAAAqO,WAAAE,IAC9BC,EAAA1B,QAAAyB,EACArO,KAAAmO,WAAAtN,KAAAyN,IAwIA,OAlIEvO,OAAA8N,EAAA,EAAA9N,CAAYiO,EAAA,EACd/N,IAAA,mBACAC,MAAA,WACA,IAAAC,EAAA,CACAC,OAAA,KACAC,KAAA,IAOA,OALAF,EAAAE,KAAAQ,KAAAb,KAAAiO,MACAjO,KAAAkO,QAAA/N,EAAAE,KAAAQ,KAAAb,KAAAkO,QACAlO,KAAAmO,WAAAnN,QAAA,SAAAqN,GACAlO,EAAAE,KAAAQ,KAAAwN,KAEAlO,IAEG,CACHF,IAAA,OACAC,MAAA,WACA,IAAAgM,EAAmBnM,OAAA4N,EAAA,EAAA5N,CAEb0N,EAAAxK,EAAmB+D,KAAA,SAAAC,EAAAoF,GACzB,IAAAlM,EAAA8N,EAAAC,EAAAK,EAAAF,EAAAzB,EAAA4B,EAAAC,EAAAC,EACA,OAAejB,EAAAxK,EAAmBoE,KAAA,SAAAC,GAClC,OACA,OAAAA,EAAAC,KAAAD,EAAAE,MACA,OAOA,GANArH,EAAA,CACAC,OAAA,GACAC,KAAA,IAIA,QAFA4N,EAAA5B,EAAAvB,IAAA,eAEA,CACAxD,EAAAE,KAAA,EACA,MAIA,OADArH,EAAAC,OAAA,4CACAkH,EAAAQ,OAAA,SAAA3H,GAEA,OAGA,GAFA+N,EAAA,MAEAlO,KAAAkO,OAAA,CACA5G,EAAAE,KAAA,GACA,MAKA,UAFA0G,EAAA7B,EAAAvB,IAAA,iBAEA,CACAxD,EAAAE,KAAA,GACA,MAIA,OADArH,EAAAC,OAAA,8CACAkH,EAAAQ,OAAA,SAAA3H,GAEA,QACAoO,EAAA,GACAjH,EAAAM,GAA8B6F,EAAAxK,EAAmBqG,KAAAtJ,KAAAmO,YAEjD,QACA,IAAA7G,EAAAO,GAAAP,EAAAM,MAAA2B,KAAA,CACAjC,EAAAE,KAAA,GACA,MAOA,GAJA6G,EAAA/G,EAAAO,GAAA3H,MACA0M,EAAA5M,KAAAmO,WAAAE,GAAAzB,QAGA,OAFA4B,EAAAnC,EAAAvB,IAAA8B,IAEA,CACAtF,EAAAE,KAAA,GACA,MAIA,OADArH,EAAAC,OAAA,6BAAAwM,EAAA,QACAtF,EAAAQ,OAAA,SAAA3H,GAEA,QACAqO,EAAA5B,UACA2B,EAAA1N,KAAA2N,GACAlH,EAAAE,KAAA,GACA,MAEA,QAGA,OAFAiH,EAAA,IAAmCV,EAAA,EAAIE,EAAAC,GACvC5G,EAAAE,KAAA,GACAiH,EAAAE,OAEA,QAGA,WAFAxO,EAAAmH,EAAAI,MAEAtH,OAAA,CACAkH,EAAAE,KAAA,GACA,MAIA,OADAF,EAAAE,KAAA,GACAiH,EAAAG,KAAAL,GAEA,QAGA,QAFApO,EAAAmH,EAAAI,MAEAtH,QACAJ,KAAAiJ,UAEA,QADAyF,EAAA1O,KAAAiJ,SAAA4F,YACAzO,SAAAD,EAAAE,KAAAE,KAAAmO,EAAArO,MAIA,QACA,OAAAiH,EAAAQ,OAAA,SAAA3H,GAEA,QACA,UACA,OAAAmH,EAAAS,SAGSd,EAAAjH,SAOT,OAJA,SAAAgI,GACA,OAAAkE,EAAAjE,MAAAjI,KAAAkI,YA3GA,MAkHA8F,EAlKA,GAqKe7M,EAAA,mCC9Kf,SAAA3B,GAAA,IAAAgO,EAAA9N,EAAA,GAAA+N,EAAA/N,EAAAgO,EAAAF,GAAAG,EAAAjO,EAAA,GAAAkO,EAAAlO,EAAA,GAAAmO,EAAAnO,EAAA,GAKAoP,EAEA,WACA,SAAAA,EAAAC,EAAAb,GACInO,OAAA6N,EAAA,EAAA7N,CAAeC,KAAA8O,GAEnB9O,KAAA+O,WACA/O,KAAAkO,SACAlO,KAAAiO,KAAA,KACAjO,KAAAgP,YAAA,KAyTA,OAtTEjP,OAAA8N,EAAA,EAAA9N,CAAY+O,EAAA,EACd7O,IAAA,OACAC,MAAA,WACA,IAAA+O,EAAkBlP,OAAA4N,EAAA,EAAA5N,CAEZ0N,EAAAxK,EAAmB+D,KAAA,SAAAC,IACzB,IAEA9G,EAAA+O,EAAAjB,EAAAC,EAAAiB,EAFArO,EAAAd,KAGA,OAAeyN,EAAAxK,EAAmBoE,KAAA,SAAAC,GAClC,OACA,OAAAA,EAAAC,KAAAD,EAAAE,MACA,OAMA,GALArH,EAAA,CACAC,OAAA,MAEAkH,EAAAC,KAAA,EAEA,OAAAvH,KAAAiO,KAAA,CACA3G,EAAAE,KAAA,GACA,MAGA,UAAAxH,KAAAkO,OAAA,CACA5G,EAAAE,KAAA,GACA,MAIA,OADAF,EAAAE,KAAA,EACA,IAAA4H,YAAAC,QAAArP,KAAA+O,UAEA,OAGA,OAFAG,EAAA5H,EAAAI,KACAJ,EAAAE,KAAA,EACA,IAAA4H,YAAAE,YAAAJ,EAAA,IAEA,OACAjB,EAAA3G,EAAAI,KACA1H,KAAAiO,OAAAsB,QACAvP,KAAAgP,YAAAhP,KAAAiO,KAAAuB,OACAlI,EAAAE,KAAA,GACA,MAEA,QAIA,OAHA0G,EAAAlO,KAAAqF,oBAAArF,KAAAkO,QACAiB,EAAAM,SAAA,gBAAgDvB,EAAA,iBAAhDuB,GACAnI,EAAAE,KAAA,GACA,IAAAkI,QAAA,SAAAC,EAAAC,GAKA9O,EAAAmN,KAAA,IAAAkB,EAAA,CACAU,WAAA/O,EAAAiO,SACAe,qBANA,WACAH,EAAA,6BASA,QACA3P,KAAAgP,YAAAhP,KAAAiO,KAAA8B,WAEA,QACAzI,EAAAE,KAAA,GACA,MAEA,QACAF,EAAAC,KAAA,GACAD,EAAAM,GAAAN,EAAA,SACAnH,EAAAC,OAAAJ,KAAAgQ,aAAA,yBAAA1I,EAAAM,IAEA,QACA,OAAAN,EAAAQ,OAAA,SAAA3H,GAEA,QACA,UACA,OAAAmH,EAAAS,SAGSd,EAAAjH,KAAA,aAOT,OAJA,WACA,OAAAiP,EAAAhH,MAAAjI,KAAAkI,YAhFA,IAqFG,CACHjI,IAAA,OACAC,MAAA,WACA,IAAA+P,EAAkBlQ,OAAA4N,EAAA,EAAA5N,CAEZ0N,EAAAxK,EAAmB+D,KAAA,SAAAoB,EAAAmG,GACzB,IAAApO,EAAA+P,EAAA1B,EAAA2B,EAAAC,EAAA5P,EAAA6P,EAAAC,EAAA9N,EAAA+N,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EACA,OAAetD,EAAAxK,EAAmBoE,KAAA,SAAAiB,GAClC,OACA,OAAAA,EAAAf,KAAAe,EAAAd,MACA,OAOA,OANArH,EAAA,CACAC,OAAA,GACAC,KAAA,IAEAiI,EAAAf,KAAA,EACAe,EAAAd,KAAA,EACAxH,KAAA2O,OAEA,OAGA,WAFAuB,EAAA5H,EAAAZ,MAEAtH,OAAA,CACAkI,EAAAd,KAAA,GACA,MAGAc,EAAAV,GAA+B6F,EAAAxK,EAAmBqG,KAAAiF,GAElD,OACA,IAAAjG,EAAAT,GAAAS,EAAAV,MAAA2B,KAAA,CACAjB,EAAAd,KAAA,GACA,MAKA,GAFAgH,EAAAlG,EAAAT,GAAA3H,MAEA,MAAAqO,EAAAC,GAAA,CACAlG,EAAAd,KAAA,GACA,MAIA,OADArH,EAAAC,OAAAJ,KAAAgQ,aAAA,0CACA1H,EAAAR,OAAA,SAAA3H,GAEA,QAIA,GAFAgQ,EAAA,EAEA5B,EAAAC,GAAAlO,eAAA,YACAgI,EAAAd,KAAA,GACA,MAIA,OADArH,EAAAC,OAAAJ,KAAAgQ,aAAA,2DACA1H,EAAAR,OAAA,SAAA3H,GAEA,QAKA,GAJAiQ,EAAA,IAAA3P,WAAAjB,EAAAkB,KAAA6N,EAAAC,GAAA,UACAhO,EAAA4P,EAAAtK,OAGA,KAFAuK,EAAArQ,KAAAiO,KAAA+C,cAAAxC,EAAA4B,EAAAtK,SAEA,CACAwC,EAAAd,KAAA,GACA,MAKA,IAFA8I,EAAA,IAAAW,kBAAAjR,KAAAgP,YAAAnN,OAAAwO,EAAA7P,GAEAgC,EAAA,EAA2BA,EAAA8N,EAAAxK,OAAsBtD,IACjD8N,EAAA9N,GAAA4N,EAAA5N,GAKA,QAFA2N,EAAAnQ,KAAAiO,KAAAiD,eAAA1C,IAEA,CACAlG,EAAAd,KAAA,GACA,MAIA,OADArH,EAAAC,OAAAJ,KAAAmR,oBACA7I,EAAAR,OAAA,SAAA3H,GAEA,QACAmI,EAAAd,KAAA,GACA,MAEA,QAEA,OADArH,EAAAC,OAAAJ,KAAAmR,oBACA7I,EAAAR,OAAA,SAAA3H,GAEA,QAKA,GAHAoQ,EAAAhC,EAAAC,GAAA1I,OAGA,KAFA0K,EAAAxQ,KAAAiO,KAAAmD,SAAAjB,EAAAI,IAEA,CACAjI,EAAAd,KAAA,GACA,MAKA,IAFAiJ,EAAA,IAAAQ,kBAAAjR,KAAAgP,YAAAnN,OAAA2O,EAAAD,GAEAG,EAAA,EAA2BA,EAAAD,EAAA3K,OAAyB4K,IACpDD,EAAAC,GAAAnC,EAAAC,GAAAkC,GAGApI,EAAAd,KAAA,GACA,MAEA,QAEA,OADArH,EAAAC,OAAAJ,KAAAmR,oBACA7I,EAAAR,OAAA,SAAA3H,GAEA,QACAmI,EAAAd,KAAA,EACA,MAEA,QAEA,GAAAxH,KAAAiO,KAAAgC,QAKA,GAHAU,EAAA3Q,KAAAiO,KAAAoD,mBAGA,KAFAT,EAAA5Q,KAAAiO,KAAAqD,eAEA,CAIA,IAHAT,EAAA,GACAC,EAAA,IAAAG,kBAAAjR,KAAAgP,YAAAnN,OAAA+O,EAAAD,GAEAI,EAAA,EAA+BA,EAAAD,EAAAhL,OAAwBiL,IACvDF,EAAAhQ,KAAAiQ,EAAAC,IAKA5Q,EAAAC,OAAA,KACAD,EAAAE,KAAAwQ,OACmB1Q,EAAAC,OAAAJ,KAAAmR,yBACFhR,EAAAC,OAAAJ,KAAAmR,oBAEjB7I,EAAAd,KAAA,GACA,MAEA,QACArH,EAAAC,OAAAJ,KAAAgQ,aAAA,eAAAE,EAAA9P,QAEA,QACAkI,EAAAd,KAAA,GACA,MAEA,QACAc,EAAAf,KAAA,GACAe,EAAAmE,GAAAnE,EAAA,SACAnI,EAAAC,OAAAJ,KAAAgQ,aAAA,yBAAA1H,EAAAmE,IAEA,QACA,OAAAnE,EAAAR,OAAA,SAAA3H,GAEA,QACA,UACA,OAAAmI,EAAAP,SAGSK,EAAApI,KAAA,aAOT,OAJA,SAAAgI,GACA,OAAAiI,EAAAhI,MAAAjI,KAAAkI,YArKA,IA0KG,CACHjI,IAAA,eACAC,MAAA,SAAAqR,GACA,OAAAA,IAEG,CACHtR,IAAA,oBACAC,MAAA,WASA,IARA,IAAAgB,EAAA,GAEAmP,EAAArQ,KAAAiO,KAAAuD,kBAEAhR,EAAAR,KAAAiO,KAAAwD,uBAEAnB,EAAA,IAAAW,kBAAAjR,KAAAgP,YAAAnN,OAAAwO,EAAA7P,GAEAgC,EAAA,EAAqBA,EAAA8N,EAAAxK,OAAsBtD,IAC3CtB,EAAAL,KAAAyP,EAAA9N,IAGA,OAAAxC,KAAAgQ,aAAAhQ,KAAAqF,oBAAAnE,MAEG,CACHjB,IAAA,sBACAC,MAAA,SAAAG,GAKA,IAJA,IAAA6F,EAAA,kBACAL,EAAAxF,EAAAyF,OACAF,EAAA,GAEAG,EAAA,EAAyBA,EAAAF,GAAe,CACxC,IAAAO,EAAA/F,EAAA0F,KAEA,OAAAK,EAAA,CACA,IAAAC,EAAAH,EAAAE,GAAA,KACA,QAAAA,KAAAC,GAAAN,EAAAM,EAAAR,EAAA,YAGA,IAFAO,GAAA,IAAAC,EAEgBA,EAAA,EAAWA,GAAA,GAC3B,IAAAC,EAAAjG,EAAA0F,KACA,cAAAO,GAAA,YACAF,KAAA,KAAAE,GAIAV,GAAAW,OAAAC,aAAAJ,GAGA,OAAAR,MAIAkJ,EAhUA,GAmUe3N,EAAA,+KCpUTuQ,cAEF,SAAAA,EAAYrQ,GACZ,IAAAP,EAAA,OAAAf,OAAAN,EAAA,EAAAM,CAAAC,KAAA0R,IACI5Q,EAAAf,OAAA4R,EAAA,EAAA5R,CAAAC,KAAAD,OAAA6R,EAAA,EAAA7R,CAAA2R,GAAAjQ,KAAAzB,KAAMqB,KAEDK,MAAQ,CACTmQ,WAAYxQ,EAAMwQ,WAClBC,qBAAsBzQ,EAAMyQ,sBAGhChR,EAAKiR,YAAcjR,EAAKiR,YAAYvO,KAAjBzD,OAAAiS,EAAA,EAAAjS,QAAAiS,EAAA,EAAAjS,CAAAe,KARvBA,2EAWYmR,GACZ,IAAAjO,EAAAhE,KACIkS,IAASC,uBAAuBpQ,SAASqQ,eAAepS,KAAK0B,MAAMoQ,uBAEnE,IAAIO,EAAcJ,EAAMK,OAAOC,UAE/BN,EAAMK,OAAOC,UAAY,gBAEzB,IAAIjP,EAAc,IAAIuJ,IAAiB2F,yBAEnC5O,EAAe,CAAErD,KAAK,GAAIF,KAAK,IAE/B4I,EAAW,KAEf,IAEI,IAAIwJ,EAAe1Q,SAASqQ,eAAepS,KAAK0B,MAAMmQ,YAAY3R,MAElE+I,EAAW,IAAIpJ,IAASyF,KAAKgI,MAAMmF,IAEvC,MAAMvR,GAEF0C,EAAarD,KAAO,OACpBqD,EAAavD,KAAO,IAAII,WAAWjB,EAAOkB,KAAK,GAAGQ,IAGtD,GAAI,MAAQ+H,EAMR,OAJAiJ,IAASQ,OAAOC,EAAA1P,EAAAjB,cAAC4Q,EAAA,EAAD,CAAYvS,KAAMuD,IAAiB7B,SAASqQ,eAAepS,KAAK0B,MAAMoQ,4BAEtFG,EAAMK,OAAOC,UAAYF,GAK7BpJ,EAASqJ,OAASL,EAAMK,OACxBrJ,EAASoJ,YAAcA,EAEvB/O,EAAY4H,OAAOc,cAAc/C,GAAU1E,KAAK,SAAAlE,GAE5C4I,EAASqJ,OAAOC,UAAYtJ,EAASoJ,YAEjChS,EAAKA,KAAKE,KACVqD,EAAarD,KAAOF,EAAKA,KAAKE,KAE9BqD,EAAarD,KAAO,OAExBqD,EAAavD,KAAOA,EAAKA,KAEzB6R,IAASQ,OAAOC,EAAA1P,EAAAjB,cAAC4Q,EAAA,EAAD,CAAYvS,KAAMuD,IAAiB7B,SAASqQ,eAAepO,EAAKtC,MAAMoQ,0DAM1F,OACIa,EAAA1P,EAAAjB,cAAA,UAAQmD,QAASnF,KAAK+R,aAAtB,oBAtEa3O,aA2EVsO,2OCkCA7I,qBA5GX,SAAAA,EAAYxH,GACZ,IAAAP,EAAA,OAAAf,OAAAuB,EAAA,EAAAvB,CAAAC,KAAA6I,IACI/H,EAAAf,OAAAwB,EAAA,EAAAxB,CAAAC,KAAAD,OAAAyB,EAAA,EAAAzB,CAAA8I,GAAApH,KAAAzB,KAAMqB,KAEDK,MAAQ,CACTkH,MAAOvH,EAAMuH,MACbiK,UAAWxR,EAAMwR,UACjBvP,YAAajC,EAAMiC,aAGvBxC,EAAKgS,gBAAkBhS,EAAKgS,gBAAgBtP,KAArBzD,OAAA0D,EAAA,EAAA1D,QAAA0D,EAAA,EAAA1D,CAAAe,KAEvBA,EAAKiS,eAAiBjS,EAAKiS,eAAevP,KAApBzD,OAAA0D,EAAA,EAAA1D,QAAA0D,EAAA,EAAA1D,CAAAe,KACtBA,EAAKkS,mBAAqBlS,EAAKkS,mBAAmBxP,KAAxBzD,OAAA0D,EAAA,EAAA1D,QAAA0D,EAAA,EAAA1D,CAAAe,KAZ9BA,+EAiBgBmR,GAERjS,KAAK0B,MAAMkH,MAAMqJ,EAAMK,OAAOW,MAAMhB,EAAMK,OAAOpS,QACjDF,KAAK0B,MAAMmR,8CAITxS,GAEN,IAAIuF,EAAMvF,EAKV,MAHoB,kBAATA,IACPuF,EAAM,IAAInF,WAAWJ,GAAMwE,YAE1Be,EAAIE,OAAUoN,GACRtN,EAAIuN,OAAO,EAtCX,IAsC4B,MAAQvN,EAAIuN,OAAQvN,EAAIE,OArCnD,OAuCDF,6CAIIhF,GACf,OAAOoC,EAAAC,EAAAjB,cAAA,UAAQmD,QAASnF,KAAKgT,mBAAoB9S,MAAOU,GAAjD,4DAIQqR,GAEf,IAAIhJ,EAAWjJ,KAAK0B,MAAMkH,MAAMgB,oBAAoBqI,EAAMK,OAAOpS,OACjEF,KAAK0B,MAAM4B,YAAYC,eAAe,CAAChD,KAAO,OAAQF,KAAO4I,EAAS5I,8CAI3DO,GAEX,IAAIqI,EAAWjJ,KAAK0B,MAAMkH,MAAMgB,oBAAoBhJ,GAChDP,EAAOL,KAAK0B,MAAMkH,MAAM4B,gBAAgB5J,GAE5C,MAAK,OAASqI,EAAS7I,QAAY,OAASC,EAAKD,OACtC4C,EAAAC,EAAAjB,cAAA,UAAQmD,QAASnF,KAAK+S,eAAgB7S,MAAOU,GAA7C,aAEA,0CAIAqR,GAEX,IAAIhJ,EAAWjJ,KAAK0B,MAAMkH,MAAMgB,oBAAoBqI,EAAMK,OAAOpS,OAC7DG,EAAOL,KAAK0B,MAAMkH,MAAM4B,gBAAgByH,EAAMK,OAAOpS,OACzDF,KAAK0B,MAAM4B,YAAYC,eAAe,CAAChD,KAAO0I,EAAS5I,KAAKwO,WAAWxO,KAAMA,KAAOA,EAAKA,wCAK7F,IAAA2D,EAAAhE,KACQ4I,EAAQ5I,KAAK0B,MAAMkH,MAEnBwK,EAAKxK,EAAMyK,uBACXC,EAAK1K,EAAM2K,kBAEXC,EAAkBJ,EAAGxO,IAAI,SAAA1E,GAAK,OAAI8C,EAAAC,EAAAjB,cAAA,UAAIgB,EAAAC,EAAAjB,cAAA,MAAIyR,MAAOvT,EAAMU,KAAMoD,EAAK0P,UAAUxT,EAAMU,MAAUoC,EAAAC,EAAAjB,cAAA,UAAKgC,EAAK0P,UAAUpO,KAAKC,UAAUrF,EAAMA,QAAS8D,EAAK2P,mBAAmBzT,EAAMU,MAAUoC,EAAAC,EAAAjB,cAAA,UAAIgB,EAAAC,EAAAjB,cAAA,UAAQmD,QAASnB,EAAK8O,gBAAiBG,KAAK,yBAAyB/S,MAAOA,EAAMU,KAAlF,SAC1LgT,EAAaN,EAAG1O,IAAI,SAAA1E,GAAK,OAAI8C,EAAAC,EAAAjB,cAAA,UAAIgB,EAAAC,EAAAjB,cAAA,MAAIyR,MAAOvT,EAAMU,KAAMoD,EAAK0P,UAAUxT,EAAMU,MAAUoC,EAAAC,EAAAjB,cAAA,UAAKgC,EAAK0P,UAAUxT,EAAMA,OAA1B,KAAoCA,EAAMA,MAAM4F,OAAhD,IAAyD9B,EAAK6P,eAAe3T,EAAMU,MAAUoC,EAAAC,EAAAjB,cAAA,UAAIgB,EAAAC,EAAAjB,cAAA,UAAQmD,QAASnB,EAAK8O,gBAAiBG,KAAK,qBAAqB/S,MAAOA,EAAMU,KAA9E,SAE5L,OACIoC,EAAAC,EAAAjB,cAAA,OAAK0D,UAAU,SACX1C,EAAAC,EAAAjB,cAAA,SAAO2D,OAAO,IAAIxD,MAAM,QACpBa,EAAAC,EAAAjB,cAAA,mBAAUgB,EAAAC,EAAAjB,cAAA,UAAQmD,QAASnF,KAAK8S,gBAAiBG,KAAK,QAAQ/S,MAAM,MAA1D,UACV8C,EAAAC,EAAAjB,cAAA,UACIgB,EAAAC,EAAAjB,cAAA,SAAO2D,OAAO,IAAIxD,MAAM,QACpBa,EAAAC,EAAAjB,cAAA,yBAAoBgB,EAAAC,EAAAjB,cAAA,mBACpBgB,EAAAC,EAAAjB,cAAA,UAAIgB,EAAAC,EAAAjB,cAAA,sBAAiBgB,EAAAC,EAAAjB,cAAA,UAAK4G,EAAMkL,8BAChC9Q,EAAAC,EAAAjB,cAAA,UAAIgB,EAAAC,EAAAjB,cAAA,kBAAagB,EAAAC,EAAAjB,cAAA,UAAK4G,EAAMmL,0BAGhC/Q,EAAAC,EAAAjB,cAAA,SAAO2D,OAAO,IAAIxD,MAAM,QACpBa,EAAAC,EAAAjB,cAAA,UAAIgB,EAAAC,EAAAjB,cAAA,iBAAYgB,EAAAC,EAAAjB,cAAA,sBAAiBgB,EAAAC,EAAAjB,cAAA,qBAChCwR,GAGLxQ,EAAAC,EAAAjB,cAAA,SAAO2D,OAAO,IAAIxD,MAAM,QACpBa,EAAAC,EAAAjB,cAAA,UAAIgB,EAAAC,EAAAjB,cAAA,iBAAYgB,EAAAC,EAAAjB,cAAA,kBAAagB,EAAAC,EAAAjB,cAAA,qBAC5B4R,aArGTxQ,6CCoFLsF,cApFX,SAAAA,EAAYrH,GACZ,IAAAP,EAAA,OAAAf,OAAAuB,EAAA,EAAAvB,CAAAC,KAAA0I,IACI5H,EAAAf,OAAAwB,EAAA,EAAAxB,CAAAC,KAAAD,OAAAyB,EAAA,EAAAzB,CAAA2I,GAAAjH,KAAAzB,KAAMqB,KAEDK,MAAQ,CACT+G,QAASpH,EAAMoH,QACfoK,UAAWxR,EAAMwR,UACjBmB,oBAAqB,GACrBC,gBAAiB,GACjBrT,IAAK,IAGTE,EAAKoT,YAAcpT,EAAKoT,YAAY1Q,KAAjBzD,OAAA0D,EAAA,EAAA1D,QAAA0D,EAAA,EAAA1D,CAAAe,KACnBA,EAAKqT,gBAAkBrT,EAAKqT,gBAAgB3Q,KAArBzD,OAAA0D,EAAA,EAAA1D,QAAA0D,EAAA,EAAA1D,CAAAe,KAZ3BA,+EAegBmR,GAEZjS,KAAK+C,SAAS,CACVnC,IAAKqR,EAAMK,OAAOpS,oFAIR+R,mFAEVmC,EAAWnC,EAAMK,OAAOpS,MAExB,KAAOF,KAAK0B,MAAMd,2BAElBZ,KAAK+C,SAALhD,OAAAsU,EAAA,EAAAtU,CAAA,GACKqU,EAAW,wCAMpBpU,KAAK0B,MAAM+G,QAAQwJ,EAAMK,OAAOW,MAAMjT,KAAK0B,MAAMd,KAAK2D,KAAM,SAAAC,GAExDR,EAAKjB,SAALhD,OAAAsU,EAAA,EAAAtU,CAAA,GACKqU,EAAW5P,EAAIpE,SAGhB,OAASoE,EAAIpE,QACb4D,EAAKtC,MAAMmR,kJAOnB,OACI7P,EAAAC,EAAAjB,cAAA,OAAK0D,UAAU,WAEX1C,EAAAC,EAAAjB,cAAA,YAAUsS,GAAG,QACTtR,EAAAC,EAAAjB,cAAA,UAAQ9B,MAAM,qEACd8C,EAAAC,EAAAjB,cAAA,UAAQ9B,MAAM,qEACd8C,EAAAC,EAAAjB,cAAA,UAAQ9B,MAAM,sEAGlB8C,EAAAC,EAAAjB,cAAA,SAAO2D,OAAO,IAAIxD,MAAM,QACpBa,EAAAC,EAAAjB,cAAA,qBACAgB,EAAAC,EAAAjB,cAAA,UACIgB,EAAAC,EAAAjB,cAAA,SAAO2D,OAAO,IAAIxD,MAAM,QACpBa,EAAAC,EAAAjB,cAAA,UACIgB,EAAAC,EAAAjB,cAAA,iBAAQgB,EAAAC,EAAAjB,cAAA,SAAOuS,KAAK,OAAOC,SAAUxU,KAAKmU,gBAAiBM,KAAK,UAChEzR,EAAAC,EAAAjB,cAAA,YAEJgB,EAAAC,EAAAjB,cAAA,UACIgB,EAAAC,EAAAjB,cAAA,UAAIgB,EAAAC,EAAAjB,cAAA,UAAQmD,QAASnF,KAAKkU,YAAajB,KAAK,yBAAyB/S,MAAM,uBAAvE,mBACJ8C,EAAAC,EAAAjB,cAAA,UAAKhC,KAAK0B,MAAMsS,sBAEpBhR,EAAAC,EAAAjB,cAAA,UACIgB,EAAAC,EAAAjB,cAAA,UAAIgB,EAAAC,EAAAjB,cAAA,UAAQmD,QAASnF,KAAKkU,YAAajB,KAAK,qBAAqB/S,MAAM,mBAAnE,eACJ8C,EAAAC,EAAAjB,cAAA,UAAKhC,KAAK0B,MAAMuS,6BA3E1B7Q,aCkEP4K,cAjEX,SAAAA,EAAY3M,GACZ,IAAAP,EAAA,OAAAf,OAAAuB,EAAA,EAAAvB,CAAAC,KAAAgO,IACIlN,EAAAf,OAAAwB,EAAA,EAAAxB,CAAAC,KAAAD,OAAAyB,EAAA,EAAAzB,CAAAiO,GAAAvM,KAAAzB,KAAMqB,KAEDK,MAAQ,CACT4B,YAAajC,EAAMiC,YACnBuP,UAAWxR,EAAMwR,UACjBhH,QAASxK,EAAMwK,QACfjD,MAAOvH,EAAMiC,YAAY4H,OAAOtC,QAChCH,QAASpH,EAAMiC,YAAY4H,OAAOzC,UAClCiM,WAAY,wBAGhB5T,EAAK6T,WAAa7T,EAAK6T,WAAWnR,KAAhBzD,OAAA0D,EAAA,EAAA1D,QAAA0D,EAAA,EAAA1D,CAAAe,KAZtBA,0EAeWmR,GACX,IAAAjO,EAAAhE,KACQ4U,EAAM3C,EAAMK,OACZD,EAAcJ,EAAMK,OAAOC,UAE/BN,EAAMK,OAAOC,UAAY,gBAEzBvS,KAAK0B,MAAM4B,YAAY4H,OAAOe,KAAKjM,KAAK0B,MAAMmK,SAAStH,KAAM,SAAApE,GAEzD6D,EAAKjB,SAAS,CACV2R,WAAYvU,EAAOC,SAGvB4D,EAAKtC,MAAMmR,YAEX+B,EAAIrC,UAAYF,8CAKxB,IAAAwC,EAAA7U,KAGQ8L,EAAe9L,KAAKqB,MAAMwK,QAAQE,mBAYtC,OAVI,IAAMD,EAAazL,KAAKyF,OAEpB,OAASgG,EAAa1L,OACF,6BAA+B0L,EAAa1L,OAE5C,oBAGJ0L,EAAazL,KAAKuE,IAAI,SAAAkQ,GAAG,OAAI9R,EAAAC,EAAAjB,cAAA,WAAKgB,EAAAC,EAAAjB,cAAA,UAAIgB,EAAAC,EAAAjB,cAAA,UAAK8S,EAAIlI,SAAa5J,EAAAC,EAAAjB,cAAA,UAAIgB,EAAAC,EAAAjB,cAAC+S,EAAD,CAAUzR,YAAauR,EAAKnT,MAAM4B,YAAauP,UAAWgC,EAAKnT,MAAMmR,UAAW5J,SAAU,CAAC5I,KAAKyU,EAAI1U,OAAO,8CAOnM,OACI4C,EAAAC,EAAAjB,cAAA,OAAK0D,UAAU,WACX1C,EAAAC,EAAAjB,cAAA,UAAIgB,EAAAC,EAAAjB,cAAA,UAAIgB,EAAAC,EAAAjB,cAAA,UAAQmD,QAASnF,KAAK2U,YAAtB,qBAAgE3R,EAAAC,EAAAjB,cAAA,UAAKhC,KAAK0B,MAAMgT,aACvF1U,KAAKgV,0BA5DA5R,aC8RPvD,cA5RX,SAAAA,EAAYwB,GACZ,IAAAP,EAAA,OAAAf,OAAAuB,EAAA,EAAAvB,CAAAC,KAAAH,IACIiB,EAAAf,OAAAwB,EAAA,EAAAxB,CAAAC,KAAAD,OAAAyB,EAAA,EAAAzB,CAAAF,GAAA4B,KAAAzB,KAAMqB,KAEDK,MAAQ,CACT4B,YAAajC,EAAMiC,YACnBuP,UAAWxR,EAAMwR,UACjBjK,MAAOvH,EAAMiC,YAAY4H,OAAOtC,QAChCH,QAASpH,EAAMiC,YAAY4H,OAAOzC,UAClCQ,SAAU5H,EAAM4H,SAChBgM,cAAe5T,EAAM4H,SACrBiM,aAAc7T,EAAM6T,cAGxBpU,EAAKqU,oBAAsBrU,EAAKqU,oBAAoB3R,KAAzBzD,OAAA0D,EAAA,EAAA1D,QAAA0D,EAAA,EAAA1D,CAAAe,KAC3BA,EAAKsU,qBAAuBtU,EAAKsU,qBAAqB5R,KAA1BzD,OAAA0D,EAAA,EAAA1D,QAAA0D,EAAA,EAAA1D,CAAAe,KAE5BA,EAAKuU,gBAAkBvU,EAAKuU,gBAAgB7R,KAArBzD,OAAA0D,EAAA,EAAA1D,QAAA0D,EAAA,EAAA1D,CAAAe,KACvBA,EAAKwU,iBAAmBxU,EAAKwU,iBAAiB9R,KAAtBzD,OAAA0D,EAAA,EAAA1D,QAAA0D,EAAA,EAAA1D,CAAAe,KACxBA,EAAKyU,eAAiBzU,EAAKyU,eAAe/R,KAApBzD,OAAA0D,EAAA,EAAA1D,QAAA0D,EAAA,EAAA1D,CAAAe,KAElBA,EAAKY,MAAMwT,eAEXpU,EAAK0U,eAAiB1U,EAAK0U,eAAehS,KAApBzD,OAAA0D,EAAA,EAAA1D,QAAA0D,EAAA,EAAA1D,CAAAe,KACtBA,EAAKY,MAAM4B,YAAYmS,kBAAkB3U,EAAK0U,iBAGlD1U,EAAK4U,0BAA4B5U,EAAK4U,0BAA0BlS,KAA/BzD,OAAA0D,EAAA,EAAA1D,QAAA0D,EAAA,EAAA1D,CAAAe,KA1BrCA,gFA8BId,KAAK0B,MAAM4B,YAAYC,eAAe,CAAChD,KAAOP,KAAK0B,MAAMuH,SAAS5I,KAAKwO,WAAWxO,KAAMA,KAAOL,KAAK0B,MAAMuH,SAAS0M,8DAK/G3V,KAAK0B,MAAMwT,aACXlV,KAAK0B,MAAM4B,YAAYsS,uBAEvB5V,KAAK0B,MAAM4B,YAAYuS,sBAAsB7V,KAAK0B,MAAMuH,mDAK5DjJ,KAAK+C,SAAS,CACVkG,SAAUjJ,KAAK0B,MAAM4B,YAAYwS,qBACjCb,cAAejV,KAAK0B,MAAM4B,YAAYwS,mEAI1B7D,GACpB,IAAAjO,EAAAhE,KACQ4U,EAAM3C,EAAMK,OACZD,EAAcJ,EAAMK,OAAOC,UAE/BN,EAAMK,OAAOC,UAAY,cAEzBvS,KAAK0B,MAAM+G,QAAQe,uBAAuByI,EAAMK,OAAOpS,OAAOqE,KAAM,SAAA6P,GAC5D,OAASA,EAAShU,QAElB4D,EAAKjB,SAAS,CACVkG,SAAUmL,IAGdpQ,EAAKtC,MAAMmR,aAGX+B,EAAIrC,UAAYF,iDAIPJ,GAEbjS,KAAK0B,MAAMkH,MAAMmN,uBAAuB9D,EAAMK,OAAOpS,SAErDF,KAAK+C,SAAS,CACVkG,SAAUjJ,KAAK0B,MAAMuT,gBAGzBjV,KAAK0B,MAAMmR,qDAIHZ,GAChB,IAAA4C,EAAA7U,KACQ4U,EAAM3C,EAAMK,OACZD,EAAcJ,EAAMK,OAAOC,UAE/BN,EAAMK,OAAOC,UAAY,cAEzBvS,KAAK0B,MAAM+G,QAAQyB,mBAAmB+H,EAAMK,OAAOpS,OAAOqE,KAAM,SAAA6P,GAE5D,GAAI,OAASA,EAAShU,OACtB,CACI,IAAI4V,EAAkBnB,EAAKnT,MAAMuH,SACjC+M,EAAgBL,QAAUvB,EAAS/T,KAEnCwU,EAAK9R,SAAS,CACVkG,SAAU+M,SAIdpB,EAAIrC,UAAYF,EAEpBwC,EAAKnT,MAAMmR,uDAIFZ,GAEb,GAAIjS,KAAK0B,MAAMkH,MAAMqN,mBAAmBhE,EAAMK,OAAOpS,OACrD,CACI,IAAI8V,EAAkBhW,KAAK0B,MAAMuH,SACjC+M,EAAgBL,QAAU,KAE1B3V,KAAK+C,SAAS,CACVkG,SAAU+M,IAGdhW,KAAK0B,MAAMmR,yDAMf,IAAIqD,EAAiB,aAEjBC,EAAcnW,KAAK0B,MAAMuH,SAAS5I,KAAKgJ,UAE3C,GAAI,OAAS8M,EAAY/V,OACzB,CACI,IAAIQ,EAAMuV,EAAY9V,KAAK,GAInB+V,EAAkBpW,KAAK0B,MAAMkH,MAAMgB,oBAAoBhJ,GACvD,OAASwV,EAAgBhW,OACzBJ,KAAK0B,MAAMuH,SAAWmN,EAEtBpW,KAAK0B,MAAMuH,SAAWjJ,KAAK0B,MAAMuT,cAErC,IAAIoB,EAAcrW,KAAK0B,MAAMkH,MAAM4B,gBAAgB5J,GACnD,GAAI,OAASyV,EAAYjW,OACrBJ,KAAK0B,MAAMuH,SAAS0M,QAAUU,EAAYhW,SAE9C,CACI,IAAIgL,EAAYrL,KAAK0B,MAAMuH,SAAS5I,KAAKkL,gBACrC,OAASF,EAAUjL,OACnBJ,KAAK0B,MAAMuH,SAAS0M,QAAUtK,EAAUhL,KAExCL,KAAK0B,MAAMuH,SAAS0M,QAAU,KAI1C,IAAIW,EAAgB,OAAStW,KAAK0B,MAAMuH,SAAS5I,KAAKwO,WAAWzO,OAAU,SAAWJ,KAAK0B,MAAMuH,SAAS5I,KAAKwO,WAAWxO,KAAO,IAAML,KAAK0B,MAAMuH,SAAS5I,KAAKwO,WAAWzO,OAEvKmW,EAAgB,OAASvW,KAAK0B,MAAMuH,SAAS5I,KAAKmW,WAAWpW,OAAU,QAAUJ,KAAK0B,MAAMuH,SAAS5I,KAAKmW,WAAWnW,KAAYL,KAAK0B,MAAMuH,SAAS5I,KAAKmW,WAAWpW,OAYzK,GAPQ8V,EAHJtV,EAEIA,EAAIkF,OAAS,GACIlF,EAAIuS,OAAO,EAAE,IAAM,MAAQvS,EAAIuS,OAAQvS,EAAIkF,OAAS,GAAK,IAAM,KAAOwQ,EAAe,KAAOC,EAE5F3V,EAAM,KAAO0V,EAAe,KAAOC,EAGvC,eAAiBD,EAAe,KAAOC,EAEvD,MAAQvW,KAAK0B,MAAMuH,SAAS0M,QACjC,CACI,IAAIA,EAAU,IAAIlV,WAAWT,KAAK0B,MAAMuH,SAAS0M,SAAS9Q,WAC1DqR,EAAiBA,EAAiB,UAAYP,EAAQxC,OAAO,EAAE,IAAM,MAAQwC,EAAQxC,OAAQwC,EAAQ7P,OAAS,GAAK,SAGnHoQ,GAAkC,gBAEtCA,GAAkC,IAGtC,OAAOA,gDAKP,IAAIO,EAAmB,GAEnBN,EAAcnW,KAAK0B,MAAMuH,SAAS5I,KAAKgJ,UAE3C,GAAI,OAAS8M,EAAY/V,OACzB,CACI,IAAIQ,EAAMuV,EAAY9V,KAAK,GAEvB+V,EAAkBpW,KAAK0B,MAAMkH,MAAMgB,oBAAoBhJ,GAEvD8V,EAAK,GAELA,EADA,OAASN,EAAgBhW,OACpB4C,EAAAC,EAAAjB,cAAA,WAAKgB,EAAAC,EAAAjB,cAAA,UAAQmD,QAASnF,KAAKoV,qBAAsBlV,MAAOU,GAAnD,oBAELoC,EAAAC,EAAAjB,cAAA,WAAKgB,EAAAC,EAAAjB,cAAA,UAAQmD,QAASnF,KAAKmV,oBAAqBjV,MAAOU,GAAlD,mBAEd,IAAIyV,EAAcrW,KAAK0B,MAAMkH,MAAM4B,gBAAgB5J,GAE/C+V,EAAK,GAELA,EADA,OAASN,EAAYjW,OAChB4C,EAAAC,EAAAjB,cAAA,WAAKgB,EAAAC,EAAAjB,cAAA,UAAQmD,QAASnF,KAAKsV,iBAAkBpV,MAAOU,GAA/C,gBAELoC,EAAAC,EAAAjB,cAAA,WAAKgB,EAAAC,EAAAjB,cAAA,UAAQmD,QAASnF,KAAKqV,gBAAiBnV,MAAOU,GAA9C,eAEd,IAAIgW,EAAK,GACH,OAASR,EAAgBhW,QAAU,OAAOJ,KAAK0B,MAAMuH,SAAS5I,KAAKwO,WAAWzO,QAAa,OAASiW,EAAYjW,OAI7G,OAAOJ,KAAK0B,MAAMuH,SAAS5I,KAAKwO,WAAWzO,QAAWJ,KAAK0B,MAAMuH,SAAS0M,UAC3EiB,EAAK5T,EAAAC,EAAAjB,cAAA,WAAKgB,EAAAC,EAAAjB,cAAA,UAAQmD,QAASnF,KAAKuV,gBAAtB,eAJdqB,EAAK5T,EAAAC,EAAAjB,cAAA,WAAKgB,EAAAC,EAAAjB,cAAA,UAAQmD,QAASnF,KAAKuV,gBAAtB,cAOdkB,EAAmBzT,EAAAC,EAAAjB,cAAA,WAAKgB,EAAAC,EAAAjB,cAAA,UAAIgB,EAAAC,EAAAjB,cAAA,UAAK0U,GAAQ1T,EAAAC,EAAAjB,cAAA,UAAK2U,GAAQ3T,EAAAC,EAAAjB,cAAA,UAAK4U,KAG/D,OAAOH,gDAIX,IAAAI,EAAA7W,KAGQe,EAAWf,KAAK0B,MAAMuH,SAAS5I,KAAKoL,eAYxC,OAVI,IAAM1K,EAASV,KAAKyF,OAEhB,OAAS/E,EAASX,OACC,2BAA6BW,EAASX,OAEtC,kBAGJW,EAASV,KAAKuE,IAAI,SAAAiH,GAAO,OAAI7I,EAAAC,EAAAjB,cAAA,WAAKgB,EAAAC,EAAAjB,cAAA,SAAO2D,OAAO,IAAIxD,MAAM,QAAOa,EAAAC,EAAAjB,cAAC8U,EAAD,CAASxT,YAAauT,EAAKnV,MAAM4B,YAAauP,UAAWgE,EAAKnV,MAAMmR,UAAWhH,QAASA,yCAOhL,GAAK,MAAQ7L,KAAK0B,MAAMuH,UAAc,OAASjJ,KAAK0B,MAAMuH,SAAS7I,OACnE,CACI,IAAI2W,EAAU,MAAQ/W,KAAK0B,MAAMuH,SAAYjJ,KAAK0B,MAAMuH,SAAS7I,OAAS,cAE1E,OACI4C,EAAAC,EAAAjB,cAAA,OAAK0D,UAAU,YACX1C,EAAAC,EAAAjB,cAAA,SAAO2D,OAAO,IAAIxD,MAAM,QACpBa,EAAAC,EAAAjB,cAAA,sBACAgB,EAAAC,EAAAjB,cAAA,UAAK+U,KAMrB,IAAIC,EAAehU,EAAAC,EAAAjB,cAAA,UAAQmD,QAASnF,KAAK0V,2BAAtB,YAUnB,OARI1V,KAAK0B,MAAMwT,eAGP8B,GADA,IAAUhX,KAAK0B,MAAM4B,YAAY2T,2BAClBjU,EAAAC,EAAAjB,cAAA,UAAQmD,QAASnF,KAAK0V,2BAAtB,aAEA,IAInB1S,EAAAC,EAAAjB,cAAA,OAAK0D,UAAU,YACX1C,EAAAC,EAAAjB,cAAA,SAAO2D,OAAO,IAAIxD,MAAM,QACpBa,EAAAC,EAAAjB,cAAA,yBAAiBhC,KAAKkX,oBAAtB,IAA4CF,GAC5ChU,EAAAC,EAAAjB,cAAA,UACKhC,KAAKmX,uBAEVnU,EAAAC,EAAAjB,cAAA,UACKhC,KAAKoX,gCAtRPhU,qBCwCRiU,cAlCb,SAAAA,EAAYhW,GACZ,IAAAP,EAAA,OAAAf,OAAAuB,EAAA,EAAAvB,CAAAC,KAAAqX,IACEvW,EAAAf,OAAAwB,EAAA,EAAAxB,CAAAC,KAAAD,OAAAyB,EAAA,EAAAzB,CAAAsX,GAAA5V,KAAAzB,KAAMqB,KAEDK,MAAQ,CACX4B,YAAcjC,EAAMiC,YACpBsF,MAAcvH,EAAMiC,YAAYgU,WAChC7O,QAAcpH,EAAMiC,YAAYiU,cAGlCzW,EAAK+R,UAAY/R,EAAK+R,UAAUrP,KAAfzD,OAAA0D,EAAA,EAAA1D,QAAA0D,EAAA,EAAA1D,CAAAe,KATnBA,2EAcEd,KAAKwX,+CAKL,OACExU,EAAAC,EAAAjB,cAAA,OAAK0D,UAAU,OACb1C,EAAAC,EAAAjB,cAAC+S,EAAD,CAAUzR,YAAatD,KAAK0B,MAAM4B,YAAauP,UAAW7S,KAAK6S,UAAW5J,SAAUjJ,KAAK0B,MAAM4B,YAAYwS,qBAAsBZ,cAAc,IADjJ,IAGElS,EAAAC,EAAAjB,cAACyV,EAAD,CAAOnU,YAAatD,KAAK0B,MAAM4B,YAAasF,MAAO5I,KAAK0B,MAAMkH,MAAOiK,UAAW7S,KAAK6S,YAHvF,IAKE7P,EAAAC,EAAAjB,cAAC0V,EAAD,CAASjP,QAASzI,KAAK0B,MAAM+G,QAASoK,UAAW7S,KAAK6S,YALxD,IAOE7P,EAAAC,EAAAjB,cAACqB,EAAA,EAAD,CAAYC,YAAatD,KAAK0B,MAAM4B,sBA9B1BF,aCKEuU,QACW,cAA7BxT,OAAOyT,SAASC,UAEe,UAA7B1T,OAAOyT,SAASC,UAEhB1T,OAAOyT,SAASC,SAASC,MACvB,uECUSC,cAxBX,SAAAA,EAAY1W,GACZ,IAAAP,EAAA,OAAAf,OAAAuB,EAAA,EAAAvB,CAAAC,KAAA+X,IACIjX,EAAAf,OAAAwB,EAAA,EAAAxB,CAAAC,KAAAD,OAAAyB,EAAA,EAAAzB,CAAAgY,GAAAtW,KAAAzB,KAAMqB,KAEDK,MAAQ,CACT4B,YAAajC,EAAMiC,YACnBuO,WAAYxQ,EAAMwQ,YAGtB/Q,EAAKiR,YAAcjR,EAAKiR,YAAYvO,KAAjBzD,OAAA0D,EAAA,EAAA1D,QAAA0D,EAAA,EAAA1D,CAAAe,KARvBA,2EAWYmR,GACR,IAAIQ,EAAe1Q,SAASqQ,eAAepS,KAAK0B,MAAMmQ,YAAY3R,MAClEF,KAAK0B,MAAM4B,YAAY0U,eAAevF,oCAItC,OACIzP,EAAAC,EAAAjB,cAAA,UAAQmD,QAASnF,KAAK+R,aAAtB,0BArBY3O,qBCOpBE,EAAc,IAAIuJ,IAAiB2F,yBAEvCN,IAASQ,OAAO1P,EAAAC,EAAAjB,cAACiW,EAAD,CAAK3U,YAAaA,IAAgBvB,SAASqQ,eAAe,SAEvDrQ,SAASmW,iBAAiB,0BAEhClX,QAAQ,SAASmX,GAE1B,GAAKA,EAAiBC,cAAc,0BACpC,CACI,IAAIvG,EAAasG,EAAiBC,cAAc,0BAA0B9D,GACtE+D,EAAiBF,EAAiBC,cAAc,+BAIpD,GAHKC,GACDnG,IAASQ,OAAO1P,EAAAC,EAAAjB,cAACsW,EAAD,CAAWhV,YAAaA,EAAauO,WAAYA,IAAewG,GAE/EF,EAAiBC,cAAc,kCACpC,CACI,IAAItG,EAAuBqG,EAAiBC,cAAc,kCAAkC9D,IAC5F+D,EAAiBF,EAAiBC,cAAc,oCAE5ClG,IAASQ,OAAO1P,EAAAC,EAAAjB,cAAC0P,EAAA,EAAD,CAAYG,WAAYA,EAAYC,qBAAsBA,IAAyBuG,OFoG7G,kBAAmBE,WACrBA,UAAUC,cAAcC,MAAMlU,KAAK,SAAAmU,GACjCA,EAAaC","file":"static/js/main.cf9e52ce.chunk.js","sourcesContent":["import _classCallCheck from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport Formula from './formula.js';\n\nvar Manifest =\n/*#__PURE__*/\nfunction () {\n  function Manifest(json) {\n    _classCallCheck(this, Manifest);\n\n    this.json = json; // TODO: Implement validation RULES:\n    // 1. has no doi -> HAVE TO own raw value or at least one formula\n    // 2. has no MIME -> HAVE TO own doi or at least one formula\n  }\n\n  _createClass(Manifest, [{\n    key: \"get_mime\",\n    value: function get_mime() {\n      var result = {\n        status: \"Has no MIME\",\n        data: null\n      };\n\n      if (this.json.hasOwnProperty(\"MIME\")) {\n        result.status = \"ok\";\n        result.data = this.json.MIME;\n      }\n\n      return result;\n    }\n  }, {\n    key: \"get_size\",\n    value: function get_size() {\n      var result = {\n        status: \"Has no size\",\n        data: null\n      };\n\n      if (this.json.hasOwnProperty(\"size\")) {\n        result.status = \"ok\";\n        result.data = this.json.size;\n      }\n\n      return result;\n    }\n  }, {\n    key: \"get_raw_value\",\n    value: function get_raw_value() {\n      var result = {\n        status: \"Has no raw\",\n        data: []\n      };\n\n      if (this.json.hasOwnProperty(\"raw\")) {\n        result.status = \"ok\";\n        result.data = new Uint8Array(Buffer.from(this.json.raw));\n      }\n\n      return result;\n    }\n  }, {\n    key: \"get_doi\",\n    value: function get_doi() {\n      var result = {\n        status: \"ok\",\n        data: []\n      };\n\n      if (this.json.hasOwnProperty(\"doi\")) {\n        for (var doi in this.json.doi) {\n          result.data.push(this.json.doi[doi]);\n        }\n      }\n\n      return result;\n    }\n  }, {\n    key: \"get_formulas\",\n    value: function get_formulas() {\n      var _this = this;\n\n      var result = {\n        status: \"\",\n        data: []\n      };\n\n      if (this.json.hasOwnProperty(\"formulas\")) {\n        this.json.formulas.forEach(function (json_formula) {\n          try {\n            result.data.push(new Formula(json_formula, _this));\n          } catch (error) {\n            result.status += \"Error creating formula (\" + error + \") \";\n          }\n        });\n      }\n\n      if (\"\" === result.status) result.status = \"ok\";\n      return result;\n    }\n  }]);\n\n  return Manifest;\n}();\n\nexport default Manifest;","import React, { Component } from 'react';\n\nclass BufImageGrey32 extends Component {\n    \n    constructor(props) \n    {\n        super(props)\n\n        this.state = {\n            data: props.data,\n        }\n    }\n    \n    componentWillMount () {\n\n        var data = new Uint8Array(this.state.data);\n        var dataView = new DataView(data.buffer);\n\n        const canvas = document.createElement('canvas')\n        const context = canvas.getContext('2d')\n\n        canvas.width = dataView.getUint32(0, false); // dx\n        canvas.height = dataView.getUint32(4, false); // dy\n\n        var currImageData = context.createImageData(canvas.width, canvas.height);\n\n        let size = canvas.width * canvas.height\n\n        for (var i = 0; i < size; i++)\n        {\n            var data_index = 8 + i * 4;\n            var r = dataView.getUint32(data_index, false) / 255\n\n            var image_index = i * 4;\n            currImageData.data[image_index] = r\n            currImageData.data[image_index+1] = r\n            currImageData.data[image_index+2] = r\n            currImageData.data[image_index+3] = 255\n        }\n\n        context.putImageData(currImageData, 0, 0);\n    \n        const dataURI = canvas.toDataURL()\n\n        this.setState({dataURI})\n      }\n    \n      render() {\n        return <img src={this.state.dataURI} alt=\"\" />\n      }\n}\n\nexport default BufImageGrey32;","import React, { Component } from 'react';\nimport BufImageGrey32 from './BufImageGrey32.js'\nclass DataViewer extends Component {\n\n    constructor(props) \n    {\n        super(props)\n\n        this.state = {\n            application: props.application,\n            data: props.data,\n            doi: \"\",\n        }\n\n        if (this.state.application)\n        {\n            this.updateDataView = this.updateDataView.bind(this)\n            this.state.application.setUpdateDataView(this.updateDataView)\n        }\n\n        this.clearDataView = this.clearDataView.bind(this)\n    }\n    \n    clearDataView(){\n        this.updateDataView(null)\n    }\n\n    updateDataView(data_to_view)\n    {\n        this.setState({\n            data: data_to_view,\n        })\n    }\n\n    setDOI(calculated_doi)\n    {\n        /*this.setState({\n            doi: calculated_doi,\n        })*/\n        console.log(calculated_doi)\n    }\n    \n    render()\n    {\n        if (null == this.state.data)\n            return (<div></div>);\n\n        const encoder = new TextEncoder();\n        \n        const data = encoder.encode(this.state.data.data);\n\n        window.crypto.subtle.digest('SHA-256', data).then( res => {\n\n            const byteArray = new Uint8Array(res);\n\n            const hexCodes = [...byteArray].map(value => {\n                const hexCode = value.toString(16);\n                const paddedHexCode = hexCode.padStart(2, '0').toUpperCase();\n                return paddedHexCode;\n            });\n\n            this.setDOI(\"doi::SHA256 : \" + hexCodes.join(''))\n        } );\n\n        let clearBtn = \"\"\n        if (this.state.application)\n            clearBtn = <th>Data view <button onClick={this.clearDataView}>Clear</button></th>\n\n        let data_to_view = \"Not supported to view MIME (\" + this.state.data.MIME + \")\"\n\n        if (-1 !== this.state.data.MIME.indexOf(\"text\"))\n            data_to_view = this.stringFromUTF8Array(this.state.data.data)\n\n        if (-1 !== this.state.data.MIME.indexOf(\"json\"))\n            data_to_view = JSON.stringify(this.state.data.data)\n        \n        if (-1 !== this.state.data.MIME.indexOf(\"octet-stream\"))\n            data_to_view = this.stringFromOctetStream(this.state.data.data)\n\n        if (-1 !== this.state.data.MIME.indexOf(\"BufImage/Grey32\"))\n            data_to_view = <BufImageGrey32 data={this.state.data.data}/>\n            \n        return (\n            <div className=\"DataViewer\">\n                <table border=\"1\" width=\"100%\">\n                    {clearBtn}\n                    <tr>{data_to_view}</tr>\n                    <tr>{this.state.doi}</tr>\n                </table>\n            </div>\n        );\n    }\n\n    stringFromOctetStream(data)\n    {\n        const maxCount = 50;\n        var str = \"\";\n        var count = data.length;\n\n        if (count > maxCount)\n        {\n            count = maxCount;\n            str = \"First \" + maxCount + \" bytes: \";\n        }\n\n        for (var index = 0; index < count;)\n        {\n            var ch = data[index++];\n            \n            var res = ch.toString(16).toUpperCase();\n            \n            if (res.length === 1) res = '0' + res;\n            \n            str += res;\n        }\n\n        return str\n    }\n\n    stringFromUTF8Array(data)\n    {\n        const maxCount = 1000;\n        const countToShrink = (maxCount / 2).toFixed(0);\n\n        const extraByteMap = [ 1, 1, 1, 1, 2, 2, 3, 0 ];\n        var count = data.length;\n        var str = \"\";\n\n        for (var index = 0; index < count;)\n        {\n            if (count > maxCount)\n            {\n                if (index >= countToShrink)\n                {\n                    if (index === Number(countToShrink))\n                        str += \"...\" + (count - countToShrink - countToShrink) + \" bytes...\";\n\n                    if (index < (count - countToShrink))\n                    {\n                        index++;\n                        continue;\n                    }\n                }\n            }\n\n            var ch = data[index++];\n            if (ch & 0x80)\n            {\n            var extra = extraByteMap[(ch >> 3) & 0x07];\n            if (!(ch & 0x40) || !extra || ((index + extra) > count))\n                return null;\n            \n            ch = ch & (0x3F >> extra);\n            for (;extra > 0;extra -= 1)\n            {\n                var chx = data[index++];\n                if ((chx & 0xC0) !== 0x80)\n                return null;\n                \n                ch = (ch << 6) | (chx & 0x3F);\n            }\n            }\n            \n            str += String.fromCharCode(ch);\n        }\n\n        return str;\n    }\n}\n\nexport default DataViewer;","import _regeneratorRuntime from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/helpers/esm/createClass\";\n\nvar Server =\n/*#__PURE__*/\nfunction () {\n  function Server(address) {\n    _classCallCheck(this, Server);\n\n    this.address = address;\n  }\n\n  _createClass(Server, [{\n    key: \"get_manifest_by_doi\",\n    value: function () {\n      var _get_manifest_by_doi = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(doi) {\n        var result, url, response, json_data;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                result = {\n                  status: \"\",\n                  data: null\n                };\n                url = this.address + '/search?doi=' + doi;\n                _context.prev = 2;\n                _context.next = 5;\n                return fetch(url);\n\n              case 5:\n                response = _context.sent;\n                _context.prev = 6;\n\n                if (!(200 === response.status)) {\n                  _context.next = 15;\n                  break;\n                }\n\n                _context.next = 10;\n                return response.json();\n\n              case 10:\n                json_data = _context.sent;\n                result.data = json_data;\n                result.status = \"ok\";\n                _context.next = 16;\n                break;\n\n              case 15:\n                result.status = \"Response error: \" + response.statusText;\n\n              case 16:\n                _context.next = 21;\n                break;\n\n              case 18:\n                _context.prev = 18;\n                _context.t0 = _context[\"catch\"](6);\n                result.status = \"Error parsing request (\" + _context.t0 + \")\";\n\n              case 21:\n                _context.next = 26;\n                break;\n\n              case 23:\n                _context.prev = 23;\n                _context.t1 = _context[\"catch\"](2);\n                result.status = \"Error requesting server (\" + _context.t1 + \")\";\n\n              case 26:\n                return _context.abrupt(\"return\", result);\n\n              case 27:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[2, 23], [6, 18]]);\n      }));\n\n      function get_manifest_by_doi(_x) {\n        return _get_manifest_by_doi.apply(this, arguments);\n      }\n\n      return get_manifest_by_doi;\n    }()\n  }, {\n    key: \"get_data_by_doi\",\n    value: function () {\n      var _get_data_by_doi = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(doi) {\n        var result, url, response, raw_data;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                result = {\n                  status: \"\",\n                  data: null\n                };\n                url = this.address + '/raw/' + doi;\n                _context2.prev = 2;\n                _context2.next = 5;\n                return fetch(url);\n\n              case 5:\n                response = _context2.sent;\n\n                if (!(200 === response.status)) {\n                  _context2.next = 14;\n                  break;\n                }\n\n                _context2.next = 9;\n                return response.arrayBuffer();\n\n              case 9:\n                raw_data = _context2.sent;\n                result.data = raw_data;\n                result.status = \"ok\";\n                _context2.next = 15;\n                break;\n\n              case 14:\n                result.status = \"Response error: \" + response.statusText;\n\n              case 15:\n                _context2.next = 20;\n                break;\n\n              case 17:\n                _context2.prev = 17;\n                _context2.t0 = _context2[\"catch\"](2);\n                result.status = \"Error requesting server (\" + _context2.t0 + \")\";\n\n              case 20:\n                return _context2.abrupt(\"return\", result);\n\n              case 21:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[2, 17]]);\n      }));\n\n      function get_data_by_doi(_x2) {\n        return _get_data_by_doi.apply(this, arguments);\n      }\n\n      return get_data_by_doi;\n    }()\n  }]);\n\n  return Server;\n}();\n\nexport default Server;","import _regeneratorRuntime from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport Server from './server.js';\nimport Manifest from './manifest.js';\n\nvar Network =\n/*#__PURE__*/\nfunction () {\n  function Network(settings, cache) {\n    _classCallCheck(this, Network);\n\n    this.Cache = cache;\n\n    if (settings.hasOwnProperty(\"DedicatedServer\")) {\n      this.DedicatedServer = new Server(settings[\"DedicatedServer\"]);\n      return;\n    }\n\n    throw new Error(\"Bad network settings\");\n  }\n\n  _createClass(Network, [{\n    key: \"search_manifest\",\n    value: function () {\n      var _search_manifest = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(manifest) {\n        var result, dois, doi, search_result;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                result = {\n                  status: \"Not found\",\n                  source: null,\n                  data: null\n                };\n                dois = manifest.get_doi();\n\n                if (!(0 === dois.data.length)) {\n                  _context.next = 5;\n                  break;\n                }\n\n                result.status = \"Manifest has no doi\";\n                return _context.abrupt(\"return\", result);\n\n              case 5:\n                if (!this.DedicatedServer) {\n                  _context.next = 22;\n                  break;\n                }\n\n                _context.t0 = _regeneratorRuntime.keys(dois.data);\n\n              case 7:\n                if ((_context.t1 = _context.t0()).done) {\n                  _context.next = 22;\n                  break;\n                }\n\n                doi = _context.t1.value;\n                _context.next = 11;\n                return this.search_manifest_by_doi(dois.data[doi]);\n\n              case 11:\n                search_result = _context.sent;\n\n                if (!(\"ok\" === search_result.status)) {\n                  _context.next = 19;\n                  break;\n                }\n\n                result.status = \"ok\";\n                result.source = search_result.source;\n                result.data = search_result.data;\n                return _context.abrupt(\"return\", result);\n\n              case 19:\n                result.status = search_result.status;\n\n              case 20:\n                _context.next = 7;\n                break;\n\n              case 22:\n                return _context.abrupt(\"return\", result);\n\n              case 23:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function search_manifest(_x) {\n        return _search_manifest.apply(this, arguments);\n      }\n\n      return search_manifest;\n    }()\n  }, {\n    key: \"search_manifest_by_doi\",\n    value: function () {\n      var _search_manifest_by_doi = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(doi) {\n        var result, manifest, json_manifest, _manifest;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                result = {\n                  status: \"\",\n                  source: null,\n                  data: null\n                };\n\n                if (!this.DedicatedServer) {\n                  _context2.next = 15;\n                  break;\n                }\n\n                manifest = this.Cache.get_manifest_by_doi(doi);\n\n                if (!(\"ok\" === manifest.status)) {\n                  _context2.next = 9;\n                  break;\n                }\n\n                result.status = \"ok\";\n                result.source = \"Cache\";\n                result.data = manifest.data;\n                _context2.next = 13;\n                break;\n\n              case 9:\n                _context2.next = 11;\n                return this.DedicatedServer.get_manifest_by_doi(doi);\n\n              case 11:\n                json_manifest = _context2.sent;\n\n                if (\"ok\" === json_manifest.status) {\n                  try {\n                    _manifest = new Manifest(json_manifest.data);\n                    result.status = \"ok\";\n                    result.source = \"Network\";\n                    result.data = _manifest;\n                    this.Cache.set_manifest_by_doi(_manifest, doi);\n                  } catch (error) {\n                    result.status = \"Not valid manifest (\" + error + \")\";\n                  }\n                } else {\n                  result.status = json_manifest.status;\n                }\n\n              case 13:\n                _context2.next = 16;\n                break;\n\n              case 15:\n                result.status = \"Not implimented\";\n\n              case 16:\n                return _context2.abrupt(\"return\", result);\n\n              case 17:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function search_manifest_by_doi(_x2) {\n        return _search_manifest_by_doi.apply(this, arguments);\n      }\n\n      return search_manifest_by_doi;\n    }()\n  }, {\n    key: \"search_data\",\n    value: function () {\n      var _search_data = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(manifest) {\n        var result, dois, doi, search_result;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                result = {\n                  status: \"Not found\",\n                  source: null,\n                  data: null\n                };\n                dois = manifest.get_doi();\n\n                if (!(0 === dois.data.length)) {\n                  _context3.next = 5;\n                  break;\n                }\n\n                result.status = \"Manifest has no doi\";\n                return _context3.abrupt(\"return\", result);\n\n              case 5:\n                if (!this.DedicatedServer) {\n                  _context3.next = 22;\n                  break;\n                }\n\n                _context3.t0 = _regeneratorRuntime.keys(dois.data);\n\n              case 7:\n                if ((_context3.t1 = _context3.t0()).done) {\n                  _context3.next = 22;\n                  break;\n                }\n\n                doi = _context3.t1.value;\n                _context3.next = 11;\n                return this.search_data_by_doi(dois.data[doi]);\n\n              case 11:\n                search_result = _context3.sent;\n\n                if (!(\"ok\" === search_result.status)) {\n                  _context3.next = 19;\n                  break;\n                }\n\n                result.status = \"ok\";\n                result.source = search_result.source;\n                result.data = search_result.data;\n                return _context3.abrupt(\"return\", result);\n\n              case 19:\n                result.status = search_result.status;\n\n              case 20:\n                _context3.next = 7;\n                break;\n\n              case 22:\n                return _context3.abrupt(\"return\", result);\n\n              case 23:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function search_data(_x3) {\n        return _search_data.apply(this, arguments);\n      }\n\n      return search_data;\n    }()\n  }, {\n    key: \"search_data_by_doi\",\n    value: function () {\n      var _search_data_by_doi = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4(doi) {\n        var result, data, server_data;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                result = {\n                  status: \"\",\n                  source: null,\n                  data: null\n                };\n\n                if (!this.DedicatedServer) {\n                  _context4.next = 22;\n                  break;\n                }\n\n                data = this.Cache.get_data_by_doi(doi);\n\n                if (!(\"ok\" === data.status)) {\n                  _context4.next = 8;\n                  break;\n                }\n\n                result.status = \"ok\";\n                result.source = \"Cache\";\n                result.data = data.data;\n                return _context4.abrupt(\"return\", result);\n\n              case 8:\n                _context4.next = 10;\n                return this.DedicatedServer.get_data_by_doi(doi);\n\n              case 10:\n                server_data = _context4.sent;\n\n                if (!(\"ok\" === server_data.status)) {\n                  _context4.next = 19;\n                  break;\n                }\n\n                result.status = \"ok\";\n                result.source = \"Network\";\n                result.data = server_data.data;\n                this.Cache.set_data_by_doi(server_data.data, doi);\n                return _context4.abrupt(\"return\", result);\n\n              case 19:\n                result.status = server_data.status;\n\n              case 20:\n                _context4.next = 23;\n                break;\n\n              case 22:\n                result.status = \"Not implimented\";\n\n              case 23:\n                return _context4.abrupt(\"return\", result);\n\n              case 24:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function search_data_by_doi(_x4) {\n        return _search_data_by_doi.apply(this, arguments);\n      }\n\n      return search_data_by_doi;\n    }()\n  }]);\n\n  return Network;\n}();\n\nexport default Network;","import _classCallCheck from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/helpers/esm/createClass\";\n\nvar Cache =\n/*#__PURE__*/\nfunction () {\n  function Cache() {\n    _classCallCheck(this, Cache);\n\n    this.manifests = new Map();\n    this.data = new Map();\n  }\n\n  _createClass(Cache, [{\n    key: \"get_manifest_by_doi\",\n    value: function get_manifest_by_doi(doi) {\n      var result = {\n        status: \"Not found\",\n        data: null\n      };\n      var manifest = this.manifests.get(doi);\n\n      if (manifest) {\n        result.status = \"ok\";\n        result.data = manifest;\n      }\n\n      return result;\n    }\n  }, {\n    key: \"set_manifest_by_doi\",\n    value: function set_manifest_by_doi(manifest, doi) {\n      this.manifests.set(doi, manifest);\n    }\n  }, {\n    key: \"delete_manifest_by_doi\",\n    value: function delete_manifest_by_doi(doi) {\n      return this.manifests.delete(doi);\n    }\n  }, {\n    key: \"get_data_by_doi\",\n    value: function get_data_by_doi(doi) {\n      var result = {\n        status: \"Not found\",\n        data: null\n      };\n      var data = this.data.get(doi);\n\n      if (data) {\n        result.status = \"ok\";\n        result.data = data;\n      }\n\n      return result;\n    }\n  }, {\n    key: \"get_data_by_manifest\",\n    value: function get_data_by_manifest(manifest) {\n      var result = {\n        status: \"Not found\",\n        data: null\n      };\n      var dois = manifest.get_doi();\n\n      if (\"ok\" === dois.status) {\n        for (var doi in dois.data) {\n          var data = this.data.get(dois.data[doi]);\n\n          if (data) {\n            result.status = \"ok\";\n            result.data = data;\n            return result;\n          }\n        }\n      } else result.status = \"Manifest has no doi\";\n\n      return result;\n    }\n  }, {\n    key: \"set_data_by_doi\",\n    value: function set_data_by_doi(data, doi) {\n      this.data.set(doi, new Uint8Array(data));\n    }\n  }, {\n    key: \"delete_data_by_doi\",\n    value: function delete_data_by_doi(doi) {\n      return this.data.delete(doi);\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      var size = this.manifests.size + this.data.size;\n      this.manifests.clear();\n      this.data.clear();\n      return 0 !== size ? true : false;\n    }\n  }, {\n    key: \"get_cached_manifests\",\n    value: function get_cached_manifests() {\n      var result = [];\n      this.manifests.forEach(function (value, key) {\n        result.push({\n          doi: key,\n          value: value\n        });\n      });\n      return result;\n    }\n  }, {\n    key: \"get_cached_manifests_size\",\n    value: function get_cached_manifests_size() {\n      return this.manifests.size;\n    }\n  }, {\n    key: \"get_cached_data\",\n    value: function get_cached_data() {\n      var result = [];\n      this.data.forEach(function (value, key) {\n        result.push({\n          doi: key,\n          value: value\n        });\n      });\n      return result;\n    }\n  }, {\n    key: \"get_cached_data_size\",\n    value: function get_cached_data_size() {\n      return this.data.size;\n    }\n  }]);\n\n  return Cache;\n}();\n\nexport default Cache;","import _regeneratorRuntime from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport Network from './network.js';\nimport Cache from './cache.js';\n\nvar Engine =\n/*#__PURE__*/\nfunction () {\n  function Engine(settings) {\n    _classCallCheck(this, Engine);\n\n    this.Cache = new Cache();\n\n    if (settings.hasOwnProperty(\"Network\")) {\n      this.Network = new Network(settings[\"Network\"], this.Cache);\n      return;\n    }\n\n    throw new Error(\"Bad engine settings\");\n  }\n\n  _createClass(Engine, [{\n    key: \"network\",\n    value: function network() {\n      return this.Network;\n    }\n  }, {\n    key: \"cache\",\n    value: function cache() {\n      return this.Cache;\n    }\n  }, {\n    key: \"eval_manifest\",\n    value: function () {\n      var _eval_manifest = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(manifest) {\n        var result, raw_value, data, formulas, i, _data;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                result = {\n                  status: \"\",\n                  data: []\n                };\n                raw_value = manifest.get_raw_value();\n\n                if (!(\"ok\" === raw_value.status)) {\n                  _context.next = 6;\n                  break;\n                }\n\n                result.status = \"ok\";\n                result.data = raw_value.data;\n                return _context.abrupt(\"return\", result);\n\n              case 6:\n                _context.next = 8;\n                return this.Network.search_data(manifest);\n\n              case 8:\n                data = _context.sent;\n\n                if (!(\"ok\" === data.status)) {\n                  _context.next = 13;\n                  break;\n                }\n\n                result.status = \"ok\";\n                result.data = data.data;\n                return _context.abrupt(\"return\", result);\n\n              case 13:\n                formulas = manifest.get_formulas();\n\n                if (!(0 === formulas.data.length)) {\n                  _context.next = 23;\n                  break;\n                }\n\n                result.status = \"Manifest has no formulas\";\n                _context.next = 18;\n                return this.Network.search_manifest(manifest);\n\n              case 18:\n                manifest = _context.sent;\n\n                if (!(\"ok\" !== manifest.status)) {\n                  _context.next = 22;\n                  break;\n                }\n\n                result.status = manifest.status;\n                return _context.abrupt(\"return\", result);\n\n              case 22:\n                formulas = manifest.data.get_formulas();\n\n              case 23:\n                _context.t0 = _regeneratorRuntime.keys(formulas.data);\n\n              case 24:\n                if ((_context.t1 = _context.t0()).done) {\n                  _context.next = 36;\n                  break;\n                }\n\n                i = _context.t1.value;\n                _context.next = 28;\n                return this.eval_formula(formulas.data[i]);\n\n              case 28:\n                _data = _context.sent;\n\n                if (!(\"ok\" === _data.status)) {\n                  _context.next = 33;\n                  break;\n                }\n\n                result.status = \"ok\";\n                result.data = _data.data;\n                return _context.abrupt(\"return\", result);\n\n              case 33:\n                result.status = _data.status;\n                _context.next = 24;\n                break;\n\n              case 36:\n                return _context.abrupt(\"return\", result);\n\n              case 37:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function eval_manifest(_x) {\n        return _eval_manifest.apply(this, arguments);\n      }\n\n      return eval_manifest;\n    }()\n  }, {\n    key: \"eval_formula\",\n    value: function () {\n      var _eval_formula = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(formula) {\n        var result, dependencies, i, dep_data, data;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                result = {\n                  status: \"\",\n                  data: []\n                };\n                dependencies = formula.get_dependencies();\n\n                if (!(\"ok\" === dependencies.status)) {\n                  _context2.next = 20;\n                  break;\n                }\n\n                _context2.t0 = _regeneratorRuntime.keys(dependencies.data);\n\n              case 4:\n                if ((_context2.t1 = _context2.t0()).done) {\n                  _context2.next = 18;\n                  break;\n                }\n\n                i = _context2.t1.value;\n                _context2.next = 8;\n                return this.Network.search_data(dependencies.data[i]);\n\n              case 8:\n                dep_data = _context2.sent;\n\n                if (!(\"ok\" !== dep_data.status)) {\n                  _context2.next = 16;\n                  break;\n                }\n\n                _context2.next = 12;\n                return this.eval_manifest(dependencies.data[i]);\n\n              case 12:\n                data = _context2.sent;\n\n                if (!(\"ok\" !== data.status)) {\n                  _context2.next = 16;\n                  break;\n                }\n\n                result.status = data.status;\n                return _context2.abrupt(\"return\", result);\n\n              case 16:\n                _context2.next = 4;\n                break;\n\n              case 18:\n                _context2.next = 22;\n                break;\n\n              case 20:\n                result.status = \"Formula has no dependencies\";\n                return _context2.abrupt(\"return\", result);\n\n              case 22:\n                _context2.next = 24;\n                return this.eval(formula);\n\n              case 24:\n                return _context2.abrupt(\"return\", _context2.sent);\n\n              case 25:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function eval_formula(_x2) {\n        return _eval_formula.apply(this, arguments);\n      }\n\n      return eval_formula;\n    }()\n  }, {\n    key: \"eval\",\n    value: function () {\n      var _eval2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(formula) {\n        var result, doi_data_formula, dois, doi, cached_data, dependencies_data, dependencies, dependency_manifest, manifest, manifest_data, raw_value, eval_result;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                result = {\n                  status: \"\",\n                  source: null,\n                  data: []\n                };\n                doi_data_formula = null;\n\n                if (!formula.manifest) {\n                  _context3.next = 17;\n                  break;\n                }\n\n                dois = formula.manifest.get_doi();\n\n                if (!(\"ok\" === dois.status)) {\n                  _context3.next = 17;\n                  break;\n                }\n\n                _context3.t0 = _regeneratorRuntime.keys(dois.data);\n\n              case 6:\n                if ((_context3.t1 = _context3.t0()).done) {\n                  _context3.next = 17;\n                  break;\n                }\n\n                doi = _context3.t1.value;\n                doi_data_formula = dois.data[doi];\n                cached_data = this.Cache.get_data_by_doi(doi_data_formula);\n\n                if (!(\"ok\" === cached_data.status)) {\n                  _context3.next = 15;\n                  break;\n                }\n\n                result.status = \"ok\";\n                result.source = \"Cache\";\n                result.data = cached_data.data;\n                return _context3.abrupt(\"return\", result);\n\n              case 15:\n                _context3.next = 6;\n                break;\n\n              case 17:\n                dependencies_data = new Map();\n                dependencies = formula.get_dependencies();\n\n                if (!(\"ok\" === dependencies.status)) {\n                  _context3.next = 42;\n                  break;\n                }\n\n                _context3.t2 = _regeneratorRuntime.keys(dependencies.data);\n\n              case 21:\n                if ((_context3.t3 = _context3.t2()).done) {\n                  _context3.next = 40;\n                  break;\n                }\n\n                dependency_manifest = _context3.t3.value;\n                manifest = dependencies.data[dependency_manifest];\n                _context3.next = 26;\n                return this.Cache.get_data_by_manifest(manifest);\n\n              case 26:\n                manifest_data = _context3.sent;\n\n                if (!(\"ok\" === manifest_data.status)) {\n                  _context3.next = 31;\n                  break;\n                }\n\n                dependencies_data.set(manifest.ArgName, manifest_data.data);\n                _context3.next = 38;\n                break;\n\n              case 31:\n                raw_value = manifest.get_raw_value();\n\n                if (!(\"ok\" === raw_value.status)) {\n                  _context3.next = 36;\n                  break;\n                }\n\n                dependencies_data.set(manifest.ArgName, raw_value.data);\n                _context3.next = 38;\n                break;\n\n              case 36:\n                result.status = \"Cache has no data for dependency: \" + manifest.ArgName;\n                return _context3.abrupt(\"return\", result);\n\n              case 38:\n                _context3.next = 21;\n                break;\n\n              case 40:\n                _context3.next = 44;\n                break;\n\n              case 42:\n                result.status = \"Formula has no dependencies\";\n                return _context3.abrupt(\"return\", result);\n\n              case 44:\n                _context3.next = 46;\n                return formula.eval(dependencies_data);\n\n              case 46:\n                eval_result = _context3.sent;\n\n                if (\"ok\" === eval_result.status) {\n                  //TODO: let check_result = formula.manifest.check_data(eval_result.data);\n                  result.status = \"ok\";\n                  result.source = \"Evaluation\";\n                  result.data = eval_result.data;\n                  if (doi_data_formula) this.Cache.set_data_by_doi(eval_result.data, doi_data_formula);\n                } else result.status = \"Error evaluation formula (\" + eval_result.status + \")\";\n\n                return _context3.abrupt(\"return\", result);\n\n              case 49:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function _eval(_x3) {\n        return _eval2.apply(this, arguments);\n      }\n\n      return _eval;\n    }()\n  }]);\n\n  return Engine;\n}();\n\nexport default Engine;","import Engine from '../../scripts/engine.js'\nimport Manifest from '../../scripts/manifest.js'\n\nclass KolmoApplication\n{\n    constructor(dedicated_server_address)\n    {\n        let options = {\n            Network: {\n                DedicatedServer: dedicated_server_address\n            }\n        };\n\n        this.engine = new Engine(options)\n\n        this.update_manifest = null;\n        this.update_data_view = null;\n\n        this.current_manifest = null;\n        this.current_manifest_status = \"Not defined\";\n\n        this.manifest_focus_list = []\n    }\n\n    setUpdateManifest(update_manifest){\n        this.update_manifest = update_manifest\n    }\n\n    setUpdateDataView(update_data_view){\n        this.update_data_view = update_data_view\n    }\n\n    updateDataView(data)\n    {\n        if (null != this.update_data_view)\n            this.update_data_view(data)\n    }\n\n    getCache() {\n        return this.engine.cache()\n    }\n\n    getNetwork() {\n        return this.engine.network()\n    }\n\n    getCurrentManifest()\n    {\n        let result = {\n            status: \"ok\",\n            data: null\n        };\n\n        result.data = this.current_manifest;\n        result.status = this.current_manifest_status;\n\n        return result\n    }\n\n    setNewManifest(str_manifest)\n    {\n        this.manifest_focus_list = []\n\n        this.current_manifest = null;\n        this.current_manifest_status = \"Not defined\";\n\n        try\n        {\n            this.current_manifest = new Manifest(JSON.parse(str_manifest));\n            this.current_manifest_status = \"ok\";\n        }\n        catch(error)\n        {\n            this.current_manifest_status = \"Error creating manifest: \" + error\n        }\n\n        if (null !== this.update_manifest)\n            this.update_manifest();\n    }\n\n    PushManifestFocusList(manifest)\n    {\n        if (0 === this.manifest_focus_list.length)\n            this.manifest_focus_list.push({ data:this.current_manifest, status:this.current_manifest_status })\n        \n        this.manifest_focus_list.push({ data:manifest.data, status:manifest.status })\n\n        this.current_manifest = manifest.data;\n        this.current_manifest_status = manifest.status;\n\n        if (null !== this.update_manifest)\n            this.update_manifest();\n    }\n\n    PopManifestFocusList()\n    {\n        let manifest = this.manifest_focus_list.pop()\n\n        if (null != manifest)\n        {\n            manifest = this.manifest_focus_list.pop()\n\n            if (null != manifest)\n            {\n                this.current_manifest = manifest.data;\n                this.current_manifest_status = manifest.status;\n\n                if (null !== this.update_manifest)\n                    this.update_manifest();\n            }\n        }\n    }\n\n    ManifestFocusListIsEmpty(){\n        return (0 === this.manifest_focus_list.length) ? true : false\n    }\n}\n\nexport default KolmoApplication;\n","import _regeneratorRuntime from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport Manifest from './manifest.js';\nimport Wasm from './wasm.js';\n\nvar Formula =\n/*#__PURE__*/\nfunction () {\n  function Formula(json, manifest) {\n    _classCallCheck(this, Formula);\n\n    this.json = json;\n    this.manifest = manifest;\n    this.wasm = null;\n    this.jsglue = null;\n    this.parameters = []; // validate actor\n\n    if (!this.json.hasOwnProperty(\"actor\")) throw new Error(\"Not found required property actor\");\n    if (!this.json.actor.hasOwnProperty(\"wasm\")) throw new Error(\"Not found required property actor.wasm\");\n    this.wasm = new Manifest(this.json.actor.wasm);\n    this.wasm.ArgName = \"actor.wasm\";\n\n    if (this.json.actor.hasOwnProperty(\"jsglue\")) {\n      this.jsglue = new Manifest(this.json.actor.jsglue);\n      this.jsglue.ArgName = \"actor.jsglue\";\n    } // validate parameters\n\n\n    if (!this.json.hasOwnProperty(\"parameters\")) throw new Error(\"Not found required property parameters\");\n\n    for (var parameter in this.json.parameters) {\n      var param = new Manifest(this.json.parameters[parameter]);\n      param.ArgName = parameter;\n      this.parameters.push(param);\n    }\n\n    ;\n  }\n\n  _createClass(Formula, [{\n    key: \"get_dependencies\",\n    value: function get_dependencies() {\n      var result = {\n        status: \"ok\",\n        data: []\n      };\n      result.data.push(this.wasm);\n      if (this.jsglue) result.data.push(this.jsglue);\n      this.parameters.forEach(function (parameter) {\n        result.data.push(parameter);\n      });\n      return result;\n    }\n  }, {\n    key: \"eval\",\n    value: function () {\n      var _eval2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(dependencies_data) {\n        var result, wasm, jsglue, args, parameter, ArgName, arg, wasm_wrapper, mime;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                result = {\n                  status: \"\",\n                  data: []\n                };\n                wasm = dependencies_data.get(\"actor.wasm\");\n\n                if (!(null === wasm)) {\n                  _context.next = 5;\n                  break;\n                }\n\n                result.status = \"Evaluation failed, has no actor.wasm data\";\n                return _context.abrupt(\"return\", result);\n\n              case 5:\n                jsglue = null;\n\n                if (!this.jsglue) {\n                  _context.next = 11;\n                  break;\n                }\n\n                jsglue = dependencies_data.get(\"actor.jsglue\");\n\n                if (!(null == jsglue)) {\n                  _context.next = 11;\n                  break;\n                }\n\n                result.status = \"Evaluation failed, has no actor.jsglue data\";\n                return _context.abrupt(\"return\", result);\n\n              case 11:\n                args = [];\n                _context.t0 = _regeneratorRuntime.keys(this.parameters);\n\n              case 13:\n                if ((_context.t1 = _context.t0()).done) {\n                  _context.next = 24;\n                  break;\n                }\n\n                parameter = _context.t1.value;\n                ArgName = this.parameters[parameter].ArgName;\n                arg = dependencies_data.get(ArgName);\n\n                if (!(null == arg)) {\n                  _context.next = 20;\n                  break;\n                }\n\n                result.status = \"Evaluation failed, has no \" + ArgName + \" data\";\n                return _context.abrupt(\"return\", result);\n\n              case 20:\n                arg.ArgName = ArgName;\n                args.push(arg);\n                _context.next = 13;\n                break;\n\n              case 24:\n                wasm_wrapper = new Wasm(wasm, jsglue);\n                _context.next = 27;\n                return wasm_wrapper.init();\n\n              case 27:\n                result = _context.sent;\n\n                if (!(\"ok\" === result.status)) {\n                  _context.next = 33;\n                  break;\n                }\n\n                _context.next = 31;\n                return wasm_wrapper.exec(args);\n\n              case 31:\n                result = _context.sent;\n\n                if (\"ok\" === result.status) {\n                  if (this.manifest) {\n                    mime = this.manifest.get_mime();\n                    if (\"ok\" === mime.status) result.data.MIME = mime.data;\n                  }\n                }\n\n              case 33:\n                return _context.abrupt(\"return\", result);\n\n              case 34:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function _eval(_x) {\n        return _eval2.apply(this, arguments);\n      }\n\n      return _eval;\n    }()\n  }]);\n\n  return Formula;\n}();\n\nexport default Formula;","import _regeneratorRuntime from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/helpers/esm/createClass\";\n\nvar Wasm =\n/*#__PURE__*/\nfunction () {\n  function Wasm(raw_wasm, jsglue) {\n    _classCallCheck(this, Wasm);\n\n    this.raw_wasm = raw_wasm;\n    this.jsglue = jsglue;\n    this.wasm = null;\n    this.wasm_memory = null;\n  }\n\n  _createClass(Wasm, [{\n    key: \"init\",\n    value: function () {\n      var _init = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var _this = this;\n\n        var result, wasmModule, wasm, jsglue, Module;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                result = {\n                  status: \"ok\"\n                };\n                _context.prev = 1;\n\n                if (!(null === this.wasm)) {\n                  _context.next = 19;\n                  break;\n                }\n\n                if (!(null === this.jsglue)) {\n                  _context.next = 14;\n                  break;\n                }\n\n                _context.next = 6;\n                return new WebAssembly.compile(this.raw_wasm);\n\n              case 6:\n                wasmModule = _context.sent;\n                _context.next = 9;\n                return new WebAssembly.instantiate(wasmModule, []);\n\n              case 9:\n                wasm = _context.sent;\n                this.wasm = wasm.exports;\n                this.wasm_memory = this.wasm.memory;\n                _context.next = 19;\n                break;\n\n              case 14:\n                jsglue = this.stringFromUTF8Array(this.jsglue);\n                Module = Function('\"use strict\";' + jsglue + 'return Module;')();\n                _context.next = 18;\n                return new Promise(function (resolve, reject) {\n                  function onRuntimeInitialized() {\n                    resolve(\"onRuntimeInitialized\");\n                  }\n\n                  _this.wasm = new Module({\n                    wasmBinary: _this.raw_wasm,\n                    onRuntimeInitialized: onRuntimeInitialized\n                  });\n                });\n\n              case 18:\n                this.wasm_memory = this.wasm.wasmMemory;\n\n              case 19:\n                _context.next = 24;\n                break;\n\n              case 21:\n                _context.prev = 21;\n                _context.t0 = _context[\"catch\"](1);\n                result.status = this.create_error(\"Exception while init: \" + _context.t0);\n\n              case 24:\n                return _context.abrupt(\"return\", result);\n\n              case 25:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[1, 21]]);\n      }));\n\n      function init() {\n        return _init.apply(this, arguments);\n      }\n\n      return init;\n    }()\n  }, {\n    key: \"exec\",\n    value: function () {\n      var _exec = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(args) {\n        var result, init_res, arg, arg_index, arg_name_buffer, size, pointer, pWasmData, i, argSize, argPointer, pWasmArgData, j, resSize, resPointer, result_data, pResultData, k;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                result = {\n                  status: \"\",\n                  data: []\n                };\n                _context2.prev = 1;\n                _context2.next = 4;\n                return this.init();\n\n              case 4:\n                init_res = _context2.sent;\n\n                if (!(\"ok\" === init_res.status)) {\n                  _context2.next = 44;\n                  break;\n                }\n\n                _context2.t0 = _regeneratorRuntime.keys(args);\n\n              case 7:\n                if ((_context2.t1 = _context2.t0()).done) {\n                  _context2.next = 41;\n                  break;\n                }\n\n                arg = _context2.t1.value;\n\n                if (!(null == args[arg])) {\n                  _context2.next = 12;\n                  break;\n                }\n\n                result.status = this.create_error(\"Wrong usage, one of arguments is empty\");\n                return _context2.abrupt(\"return\", result);\n\n              case 12:\n                // lets findout argument index by name\n                arg_index = 0;\n\n                if (args[arg].hasOwnProperty(\"ArgName\")) {\n                  _context2.next = 16;\n                  break;\n                }\n\n                result.status = this.create_error(\"Wrong usage, one of arguments has no 'ArgName' property\");\n                return _context2.abrupt(\"return\", result);\n\n              case 16:\n                arg_name_buffer = new Uint8Array(Buffer.from(args[arg][\"ArgName\"]));\n                size = arg_name_buffer.length;\n                pointer = this.wasm._set_arg_name(arg, arg_name_buffer.length);\n\n                if (!(0 !== pointer)) {\n                  _context2.next = 28;\n                  break;\n                }\n\n                pWasmData = new Uint8ClampedArray(this.wasm_memory.buffer, pointer, size);\n\n                for (i = 0; i < pWasmData.length; i++) {\n                  pWasmData[i] = arg_name_buffer[i];\n                }\n\n                arg_index = this.wasm._get_arg_index(arg);\n\n                if (!(0 === arg_index)) {\n                  _context2.next = 26;\n                  break;\n                }\n\n                result.status = this.create_last_error();\n                return _context2.abrupt(\"return\", result);\n\n              case 26:\n                _context2.next = 30;\n                break;\n\n              case 28:\n                result.status = this.create_last_error();\n                return _context2.abrupt(\"return\", result);\n\n              case 30:\n                // set arg data to Wasm\n                argSize = args[arg].length;\n                argPointer = this.wasm._set_arg(arg_index, argSize);\n\n                if (!(0 !== argPointer)) {\n                  _context2.next = 37;\n                  break;\n                }\n\n                pWasmArgData = new Uint8ClampedArray(this.wasm_memory.buffer, argPointer, argSize);\n\n                for (j = 0; j < pWasmArgData.length; j++) {\n                  pWasmArgData[j] = args[arg][j];\n                }\n\n                _context2.next = 39;\n                break;\n\n              case 37:\n                result.status = this.create_last_error();\n                return _context2.abrupt(\"return\", result);\n\n              case 39:\n                _context2.next = 7;\n                break;\n\n              case 41:\n                // exec alg in wasm\n                if (this.wasm._exec()) {\n                  // get result\n                  resSize = this.wasm._get_result_size();\n                  resPointer = this.wasm._get_result();\n\n                  if (0 !== resPointer) {\n                    result_data = [];\n                    pResultData = new Uint8ClampedArray(this.wasm_memory.buffer, resPointer, resSize);\n\n                    for (k = 0; k < pResultData.length; k++) {\n                      result_data.push(pResultData[k]);\n                    } // TODO:\n                    // result[\"MIME\"] = this.wasm._get_result_type();\n\n\n                    result.status = \"ok\";\n                    result.data = result_data;\n                  } else result.status = this.create_last_error();\n                } else result.status = this.create_last_error();\n\n                _context2.next = 45;\n                break;\n\n              case 44:\n                result.status = this.create_error(\"Init error: \" + init_res.status);\n\n              case 45:\n                _context2.next = 50;\n                break;\n\n              case 47:\n                _context2.prev = 47;\n                _context2.t2 = _context2[\"catch\"](1);\n                result.status = this.create_error(\"Exception while exec: \" + _context2.t2);\n\n              case 50:\n                return _context2.abrupt(\"return\", result);\n\n              case 51:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[1, 47]]);\n      }));\n\n      function exec(_x) {\n        return _exec.apply(this, arguments);\n      }\n\n      return exec;\n    }()\n  }, {\n    key: \"create_error\",\n    value: function create_error(text) {\n      return text;\n    }\n  }, {\n    key: \"create_last_error\",\n    value: function create_last_error() {\n      var error = [];\n\n      var pointer = this.wasm._get_last_error();\n\n      var size = this.wasm._get_last_error_size();\n\n      var pWasmData = new Uint8ClampedArray(this.wasm_memory.buffer, pointer, size);\n\n      for (var i = 0; i < pWasmData.length; i++) {\n        error.push(pWasmData[i]);\n      }\n\n      return this.create_error(this.stringFromUTF8Array(error));\n    }\n  }, {\n    key: \"stringFromUTF8Array\",\n    value: function stringFromUTF8Array(data) {\n      var extraByteMap = [1, 1, 1, 1, 2, 2, 3, 0];\n      var count = data.length;\n      var str = \"\";\n\n      for (var index = 0; index < count;) {\n        var ch = data[index++];\n\n        if (ch & 0x80) {\n          var extra = extraByteMap[ch >> 3 & 0x07];\n          if (!(ch & 0x40) || !extra || index + extra > count) return null;\n          ch = ch & 0x3F >> extra;\n\n          for (; extra > 0; extra -= 1) {\n            var chx = data[index++];\n            if ((chx & 0xC0) !== 0x80) return null;\n            ch = ch << 6 | chx & 0x3F;\n          }\n        }\n\n        str += String.fromCharCode(ch);\n      }\n\n      return str;\n    }\n  }]);\n\n  return Wasm;\n}();\n\nexport default Wasm;","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport KolmoApplication from '../KolmoApplication.js'\nimport DataViewer from './DataViewer.js'\nimport Manifest from '../../../scripts/manifest.js'\n\nclass ViewButton extends Component {\n\n    constructor(props) \n    {\n        super(props)\n\n        this.state = {\n            textAreaID: props.textAreaID,\n            manifestDataHolderID: props.manifestDataHolderID,\n        }\n\n        this.actionClick = this.actionClick.bind(this)\n    }\n\n    actionClick(event)\n    {\n        ReactDOM.unmountComponentAtNode(document.getElementById(this.state.manifestDataHolderID));\n\n        let btn_caption = event.target.innerHTML\n\n        event.target.innerHTML = \"evaluating...\";\n\n        let application = new KolmoApplication(process.env.REACT_APP_DEDICATED_SERVER_ADDRESS);\n\n        let data_to_view = { MIME:\"\", data:\"\" }\n\n        let manifest = null\n\n        try\n        {\n            let manifestText = document.getElementById(this.state.textAreaID).value\n            \n            manifest = new Manifest(JSON.parse(manifestText))\n        }\n        catch(error)\n        {\n            data_to_view.MIME = \"text\"\n            data_to_view.data = new Uint8Array(Buffer.from(\"\"+error))\n        }\n\n        if (null == manifest)\n        {\n            ReactDOM.render(<DataViewer data={data_to_view}/>, document.getElementById(this.state.manifestDataHolderID));\n\n            event.target.innerHTML = btn_caption;\n\n            return;\n        }\n\n        manifest.target = event.target\n        manifest.btn_caption = btn_caption\n\n        application.engine.eval_manifest(manifest).then(data =>{\n        \n            manifest.target.innerHTML = manifest.btn_caption\n\n            if (data.data.MIME)\n                data_to_view.MIME = data.data.MIME\n            else\n                data_to_view.MIME = \"text\"\n\n            data_to_view.data = data.data\n\n            ReactDOM.render(<DataViewer data={data_to_view}/>, document.getElementById(this.state.manifestDataHolderID));\n        })\n        \n    }\n\n    render() {\n        return (\n            <button onClick={this.actionClick}>View Data</button>\n        )\n    }\n}\n\nexport default ViewButton;","import React, { Component } from 'react';\n\nconst startCount = 10\nconst finishCount = 10\n\nclass Cache extends Component {\n\n    constructor(props) \n    {\n        super(props)\n\n        this.state = {\n            cache: props.cache,\n            updateApp: props.updateApp,\n            application: props.application,\n        }\n\n        this.handleCacheOper = this.handleCacheOper.bind(this)\n\n        this.handleDataView = this.handleDataView.bind(this)\n        this.handleManifestView = this.handleManifestView.bind(this)\n\n    }\n    \n\n    handleCacheOper(event)\n    {\n        if (this.state.cache[event.target.name](event.target.value))\n            this.state.updateApp()\n    }\n\n\n    strDigest(data)\n    {\n        let str = data\n        \n        if (typeof data !== 'string')\n            str = new Uint8Array(data).toString()\n        \n        if ( str.length > (startCount + finishCount) )\n            return str.substr(0, startCount) + \"...\" + str.substr((str.length - finishCount), finishCount)\n        else\n            return str\n    }\n\n\n    viewManifestButton(doi) {\n        return <button onClick={this.handleManifestView} value={doi}>View Manifest</button>\n    }\n\n\n    handleManifestView(event)\n    {\n        let manifest = this.state.cache.get_manifest_by_doi(event.target.value)\n        this.state.application.updateDataView({MIME : \"json\", data : manifest.data})\n    }\n\n\n    viewDataButton(doi)\n    {\n        let manifest = this.state.cache.get_manifest_by_doi(doi)\n        let data = this.state.cache.get_data_by_doi(doi)\n\n        if ((\"ok\" === manifest.status) && (\"ok\" === data.status))\n            return <button onClick={this.handleDataView} value={doi}>View Data</button>\n        else\n            return \"\"\n    }\n\n\n    handleDataView(event)\n    {\n        let manifest = this.state.cache.get_manifest_by_doi(event.target.value)\n        let data = this.state.cache.get_data_by_doi(event.target.value)\n        this.state.application.updateDataView({MIME : manifest.data.get_mime().data, data : data.data})\n    }\n\n\n    render()\n    {\n        let cache = this.state.cache\n\n        let cm = cache.get_cached_manifests()\n        let cd = cache.get_cached_data()\n        \n        let cachedManifests = cm.map(value => <tr><td title={value.doi}>{this.strDigest(value.doi)}</td><td>{this.strDigest(JSON.stringify(value.value))}{this.viewManifestButton(value.doi)}</td><td><button onClick={this.handleCacheOper} name=\"delete_manifest_by_doi\" value={value.doi}>X</button></td></tr>)\n        let cachedData = cd.map(value => <tr><td title={value.doi}>{this.strDigest(value.doi)}</td><td>{this.strDigest(value.value)} ({value.value.length}){this.viewDataButton(value.doi)}</td><td><button onClick={this.handleCacheOper} name=\"delete_data_by_doi\" value={value.doi}>X</button></td></tr>)\n\n        return (\n            <div className=\"Cache\">\n                <table border=\"1\" width=\"100%\">\n                    <th>Cache <button onClick={this.handleCacheOper} name=\"clear\" value=\"()\">Clear</button></th>\n                    <tr>\n                        <table border=\"1\" width=\"100%\">\n                            <th>Entity type</th><th>Count</th>\n                            <tr><td>Manifest</td><td>{cache.get_cached_manifests_size()}</td></tr>\n                            <tr><td>Data</td><td>{cache.get_cached_data_size()}</td></tr>\n                        </table>\n                    \n                        <table border=\"1\" width=\"100%\">\n                            <tr><th>DOI</th><th>Manifest</th><th>Delete</th></tr>\n                            {cachedManifests}\n                        </table>\n                        \n                        <table border=\"1\" width=\"100%\">\n                            <tr><th>DOI</th><th>Data</th><th>Delete</th></tr>\n                            {cachedData}\n                        </table>\n                    </tr>\n                </table>\n            </div>\n        );\n    }\n}\n\nexport default Cache;","import React, { Component } from 'react';\n\n\nclass Network extends Component {\n\n    constructor(props) \n    {\n        super(props)\n\n        this.state = {\n            network: props.network,\n            updateApp: props.updateApp,\n            fetchManifestResult: \"\",\n            fetchDataResult: \"\",\n            doi: \"\",\n        }\n\n        this.handleFetch = this.handleFetch.bind(this)\n        this.handleDOIChange = this.handleDOIChange.bind(this)\n    }\n\n    handleDOIChange(event)\n    {\n        this.setState({\n            doi: event.target.value\n        })\n    }\n\n    async handleFetch(event)\n    {\n        let fetchRes = event.target.value\n\n        if (\"\" === this.state.doi)\n        {\n            this.setState({\n                [fetchRes]: \"Empty DOI\"\n            })\n\n            return\n        }\n\n        this.state.network[event.target.name](this.state.doi).then( res => {\n            \n            this.setState({\n                [fetchRes]: res.status\n            })\n\n            if (\"ok\" === res.status)\n                this.state.updateApp()\n        })\n    }\n\n    render()\n    {\n\n        return (\n            <div className=\"Network\">\n\n                <datalist id=\"dois\">\n                    <option value=\"03FEE1468FF693744FDEFB20D41E793E6A03CFBDD3687901EA99271DCC702DF8\"/>\n                    <option value=\"00A66067BD93F5417D9E94858795B6E852EF90DE790C543B1E47A2E009D435F3\"/>\n                    <option value=\"0487DEB729ABE42001007D1ADBEF310FE6BCBD308B7A889458F2E1F8B1C5D14E\"/>\n                </datalist>\n\n                <table border=\"1\" width=\"100%\">\n                    <th>Network</th>\n                    <tr>\n                        <table border=\"1\" width=\"100%\">\n                            <tr>                                \n                                <td>DOI <input type=\"text\" onChange={this.handleDOIChange} list=\"dois\"/></td>\n                                <td></td>\n                            </tr>    \n                            <tr>\n                                <td><button onClick={this.handleFetch} name=\"search_manifest_by_doi\" value=\"fetchManifestResult\">Fetch Manifest</button></td>\n                                <td>{this.state.fetchManifestResult}</td>\n                            </tr>\n                            <tr>\n                                <td><button onClick={this.handleFetch} name=\"search_data_by_doi\" value=\"fetchDataResult\">Fetch Data</button></td>\n                                <td>{this.state.fetchDataResult}</td>\n                            </tr>\n                        </table>\n                    </tr>    \n                </table>\n\n            </div>\n        );\n    }\n}\n\nexport default Network;","import React, { Component } from 'react';\nimport Manifest from './Manifest.js'\n\nclass Formula extends Component {\n    constructor(props) \n    {\n        super(props)\n\n        this.state = {\n            application: props.application,\n            updateApp: props.updateApp,\n            formula: props.formula,\n            cache: props.application.engine.cache(),\n            network: props.application.engine.network(),\n            evalResult: \"No evaluation result\",\n        }\n\n        this.handleEval = this.handleEval.bind(this)\n    }\n\n    handleEval(event)\n    {\n        let btn = event.target\n        let btn_caption = event.target.innerHTML\n\n        event.target.innerHTML = \"evaluating...\";\n\n        this.state.application.engine.eval(this.state.formula).then( result => {\n\n            this.setState({\n                evalResult: result.status\n            })\n            \n            this.state.updateApp()\n\n            btn.innerHTML = btn_caption\n        });\n    }\n\n    getDependencies()\n    {\n        let FromulaDependency = \"\"\n\n        let dependencies = this.props.formula.get_dependencies()\n\n        if (0 === dependencies.data.length)\n        {\n            if (\"ok\" !== dependencies.status)\n                FromulaDependency = \"Error getting dependency: \" + dependencies.status\n            else\n                FromulaDependency = \"Has no dependency\"\n        }\n        else\n            FromulaDependency = dependencies.data.map(dep => <div><tr><td>{dep.ArgName}</td><td><Manifest application={this.state.application} updateApp={this.state.updateApp} manifest={{data:dep,status:\"ok\"}} /></td></tr></div>)\n        \n        return FromulaDependency\n    }\n\n    render()\n    {\n        return (\n            <div className=\"Formula\">\n                <tr><td><button onClick={this.handleEval}>Evaluate Formula</button></td><td>{this.state.evalResult}</td></tr>\n                {this.getDependencies()}\n            </div>\n        );\n    }\n}\n\nexport default Formula;","import React, { Component } from 'react';\nimport Formula from './Formula.js'\n\nclass Manifest extends Component {\n    \n    constructor(props) \n    {\n        super(props)\n\n        this.state = {\n            application: props.application,\n            updateApp: props.updateApp,\n            cache: props.application.engine.cache(),\n            network: props.application.engine.network(),\n            manifest: props.manifest,\n            init_manifest: props.manifest,\n            rootManifest: props.rootManifest,\n        }\n\n        this.handleFetchManifest = this.handleFetchManifest.bind(this)\n        this.handleRemoveManifest = this.handleRemoveManifest.bind(this)\n        \n        this.handleFetchData = this.handleFetchData.bind(this)\n        this.handleRemoveData = this.handleRemoveData.bind(this)\n        this.handleViewData = this.handleViewData.bind(this)\n\n        if (this.state.rootManifest)\n        {\n            this.updateManifest = this.updateManifest.bind(this)\n            this.state.application.setUpdateManifest(this.updateManifest)\n        }\n\n        this.handleChangeManifestFocus = this.handleChangeManifestFocus.bind(this)\n    }\n\n    handleViewData(){\n        this.state.application.updateDataView({MIME : this.state.manifest.data.get_mime().data, data : this.state.manifest.rawData})\n    }\n\n    handleChangeManifestFocus()\n    {\n        if (this.state.rootManifest)\n            this.state.application.PopManifestFocusList()\n        else\n            this.state.application.PushManifestFocusList(this.state.manifest)\n    }\n\n    updateManifest()\n    {\n        this.setState({\n            manifest: this.state.application.getCurrentManifest(),\n            init_manifest: this.state.application.getCurrentManifest(),\n        });\n    }\n\n    handleFetchManifest(event)\n    {\n        let btn = event.target\n        let btn_caption = event.target.innerHTML\n\n        event.target.innerHTML = \"fetching...\";\n\n        this.state.network.search_manifest_by_doi(event.target.value).then( fetchRes => {\n            if (\"ok\" === fetchRes.status)\n            {\n                this.setState({\n                    manifest: fetchRes\n                })\n                \n                this.state.updateApp()\n            }\n            else\n                btn.innerHTML = btn_caption\n        })\n    }\n\n    handleRemoveManifest(event)\n    {\n        if (this.state.cache.delete_manifest_by_doi(event.target.value))\n        {\n            this.setState({\n                manifest: this.state.init_manifest\n            })\n\n            this.state.updateApp()\n        }\n    }\n\n    handleFetchData(event)\n    {\n        let btn = event.target\n        let btn_caption = event.target.innerHTML\n\n        event.target.innerHTML = \"fetching...\";\n\n        this.state.network.search_data_by_doi(event.target.value).then( fetchRes => {\n            \n            if (\"ok\" === fetchRes.status)\n            {\n                let updatedManifest = this.state.manifest\n                updatedManifest.rawData = fetchRes.data\n\n                this.setState({\n                    manifest: updatedManifest\n                })\n            }\n            else\n                btn.innerHTML = btn_caption \n\n            this.state.updateApp()\n        })\n    }\n\n    handleRemoveData(event)\n    {\n        if (this.state.cache.delete_data_by_doi(event.target.value))\n        {\n            let updatedManifest = this.state.manifest\n            updatedManifest.rawData = null\n\n            this.setState({\n                manifest: updatedManifest\n            })\n\n            this.state.updateApp()\n        }\n    }\n\n    getManifestHeader()\n    {\n        let ManifestHeader = \"Has no DOI\"\n\n        let manifestDoi = this.state.manifest.data.get_doi()\n\n        if (\"ok\" === manifestDoi.status)\n        {\n            let doi = manifestDoi.data[0]\n\n            // this trick needs to update same manifests in other formulas !\n            {\n                let manifestInCache = this.state.cache.get_manifest_by_doi(doi)\n                if (\"ok\" === manifestInCache.status)\n                    this.state.manifest = manifestInCache\n                else\n                    this.state.manifest = this.state.init_manifest\n\n                let dataInCache = this.state.cache.get_data_by_doi(doi)\n                if (\"ok\" === dataInCache.status)\n                    this.state.manifest.rawData = dataInCache.data\n                else\n                {\n                    let raw_value = this.state.manifest.data.get_raw_value()\n                    if (\"ok\" === raw_value.status)\n                        this.state.manifest.rawData = raw_value.data\n                    else\n                        this.state.manifest.rawData = null\n                }\n            }\n\n            let manifestMime = (\"ok\" === this.state.manifest.data.get_mime().status) ? \"MIME='\" + this.state.manifest.data.get_mime().data + \"'\" : this.state.manifest.data.get_mime().status\n\n            let manifestSize = (\"ok\" === this.state.manifest.data.get_size().status) ? \"size=\" + this.state.manifest.data.get_size().data + \"\" : this.state.manifest.data.get_size().status\n\n            if (doi)\n            {\n                if (doi.length > 10)\n                    ManifestHeader = doi.substr(0,10) + \"...\" + doi.substr((doi.length - 10), 10) + \" (\" + manifestMime + \", \" + manifestSize\n                else\n                    ManifestHeader = doi + \" (\" + manifestMime + \", \" + manifestSize\n            }\n            else\n                ManifestHeader = \"Has no DOI (\" + manifestMime + \", \" + manifestSize\n\n            if ( null != this.state.manifest.rawData )\n            {    \n                let rawData = new Uint8Array(this.state.manifest.rawData).toString()\n                ManifestHeader = ManifestHeader + \", Data=\" + rawData.substr(0,10) + \"...\" + rawData.substr((rawData.length - 10), 10)\n            }\n            else\n                ManifestHeader = ManifestHeader + \", Has no data\"\n\n            ManifestHeader = ManifestHeader + \")\"\n        }\n\n        return ManifestHeader\n    }\n\n    getManifestControls()\n    {\n        let ManifestControls = \"\"\n\n        let manifestDoi = this.state.manifest.data.get_doi()\n\n        if (\"ok\" === manifestDoi.status)\n        {\n            let doi = manifestDoi.data[0]\n\n            let manifestInCache = this.state.cache.get_manifest_by_doi(doi)\n\n            let mC = \"\"\n            if (\"ok\" === manifestInCache.status)\n                mC = <div><button onClick={this.handleRemoveManifest} value={doi}>Remove Manifest</button></div>\n            else\n                mC = <div><button onClick={this.handleFetchManifest} value={doi}>Fetch Manifest</button></div>\n\n            let dataInCache = this.state.cache.get_data_by_doi(doi)\n\n            let dC = \"\"\n            if (\"ok\" === dataInCache.status)\n                dC = <div><button onClick={this.handleRemoveData} value={doi}>Remove Data</button></div>\n            else\n                dC = <div><button onClick={this.handleFetchData} value={doi}>Fetch Data</button></div>\n\n            let dV = \"\"\n            if (((\"ok\" === manifestInCache.status)||(\"ok\"===this.state.manifest.data.get_mime().status)) && (\"ok\" === dataInCache.status))\n                dV = <div><button onClick={this.handleViewData}>View Data</button></div>\n            else\n            {\n                if ((\"ok\"===this.state.manifest.data.get_mime().status) && this.state.manifest.rawData)\n                    dV = <div><button onClick={this.handleViewData}>View Data</button></div>\n            }\n\n            ManifestControls = <div><tr><td>{mC}</td><td>{dC}</td><td>{dV}</td></tr></div>\n        }\n\n        return ManifestControls\n    }\n\n    getManifestFormulas()\n    {\n        let ManifestFromulas = \"\"\n\n        let formulas = this.state.manifest.data.get_formulas()\n\n        if (0 === formulas.data.length)\n        {\n            if (\"ok\" !== formulas.status)\n                ManifestFromulas = \"Error getting formulas: \" + formulas.status\n            else\n                ManifestFromulas = \"Has no formulas\"\n        }\n        else\n            ManifestFromulas = formulas.data.map(formula => <div><table border=\"1\" width=\"100%\"><Formula application={this.state.application} updateApp={this.state.updateApp} formula={formula}/></table></div>)\n\n        return ManifestFromulas\n    }\n\n    render()\n    {\n        if ((null == this.state.manifest) || (\"ok\" !== this.state.manifest.status))\n        {\n            let outStr = (null != this.state.manifest) ? this.state.manifest.status : \"Not defined\"\n\n            return (\n                <div className=\"Manifest\">\n                    <table border=\"1\" width=\"100%\">\n                        <th>Manifest</th>\n                        <tr>{outStr}</tr>\n                    </table>\n                </div>\n            )\n        }\n\n        let focus_button = <button onClick={this.handleChangeManifestFocus}>focus in</button>\n\n        if (this.state.rootManifest)\n        {\n            if (false === this.state.application.ManifestFocusListIsEmpty())\n                focus_button = <button onClick={this.handleChangeManifestFocus}>focus out</button>\n            else\n                focus_button = \"\"\n        }\n\n        return (\n            <div className=\"Manifest\">\n                <table border=\"1\" width=\"100%\">\n                    <th>Manifest -> {this.getManifestHeader()} {focus_button}</th>\n                    <tr>\n                        {this.getManifestControls()}\n                    </tr>\n                    <tr>\n                        {this.getManifestFormulas()}\n                    </tr>\n                </table>\n            </div>\n        );\n    }\n}\n\nexport default Manifest;","import React, { Component } from 'react';\nimport './App.css';\nimport Cache from './cmp/Cache.js'\nimport Network from './cmp/Network.js'\nimport Manifest from './cmp/Manifest.js'\nimport DataViewer from './cmp/DataViewer.js'\n\nclass App extends Component {\n \n  constructor(props) \n  {\n    super(props)\n\n    this.state = {\n      application:  props.application,\n      cache:        props.application.getCache(),\n      network:      props.application.getNetwork()\n    }\n\n    this.updateApp = this.updateApp.bind(this)\n  }\n\n  updateApp()\n  {\n    this.forceUpdate()\n  }\n\n  render()\n  {\n    return (\n      <div className=\"App\">\n        <Manifest application={this.state.application} updateApp={this.updateApp} manifest={this.state.application.getCurrentManifest()} rootManifest={true}/>\n        -\n        <Cache application={this.state.application} cache={this.state.cache} updateApp={this.updateApp}/>\n        -\n        <Network network={this.state.network} updateApp={this.updateApp}/>\n        -\n        <DataViewer application={this.state.application}/>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React, { Component } from 'react';\n\nclass RunButton extends Component {\n\n    constructor(props) \n    {\n        super(props)\n\n        this.state = {\n            application: props.application,\n            textAreaID: props.textAreaID,\n        }\n\n        this.actionClick = this.actionClick.bind(this)\n    }\n\n    actionClick(event){\n        let manifestText = document.getElementById(this.state.textAreaID).value\n        this.state.application.setNewManifest(manifestText)\n    }\n\n    render() {\n        return (\n            <button onClick={this.actionClick}>Manifest to App</button>\n        )\n    }\n}\n\nexport default RunButton;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport KolmoApplication from './KolmoApplication.js'\nimport RunButton from './cmp/RunButton.js'\nimport ViewButton from './cmp/ViewButton.js'\n\nlet application = new KolmoApplication(process.env.REACT_APP_DEDICATED_SERVER_ADDRESS);\n\nReactDOM.render(<App application={application}/>, document.getElementById('root'));\n\nvar interactives = document.querySelectorAll(\"div.interactive-canvas\");\n\ninteractives.forEach(function(interactivePanel) {\n\n    if ( interactivePanel.querySelector(\"textarea.manifest-text\") )\n    {\n        let textAreaID = interactivePanel.querySelector(\"textarea.manifest-text\").id;\n        let buttonElement =  interactivePanel.querySelector(\"span.run-button-placeholder\");\n        if ( buttonElement )\n            ReactDOM.render(<RunButton application={application} textAreaID={textAreaID}/>, buttonElement);\n\n        if ( interactivePanel.querySelector(\"span.manifest-data-placeholder\") )\n        {\n            let manifestDataHolderID = interactivePanel.querySelector(\"span.manifest-data-placeholder\").id\n            buttonElement =  interactivePanel.querySelector(\"span.render-button-placeholder\");\n            if ( buttonElement )\n                ReactDOM.render(<ViewButton textAreaID={textAreaID} manifestDataHolderID={manifestDataHolderID}/>, buttonElement);\n        }\n    }\n});\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}