(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,function(t,e,a){"use strict";(function(t){var s=a(3),n=a(4),r=a(18),i=function(){function e(t){Object(s.a)(this,e),this.json=t}return Object(n.a)(e,[{key:"get_mime",value:function(){var t={status:"Has no MIME",data:null};return this.json.hasOwnProperty("MIME")&&(t.status="ok",t.data=this.json.MIME),t}},{key:"get_size",value:function(){var t={status:"Has no size",data:null};return this.json.hasOwnProperty("size")&&(t.status="ok",t.data=this.json.size),t}},{key:"get_raw_value",value:function(){var e={status:"Has no raw",data:[]};return this.json.hasOwnProperty("raw")&&(e.status="ok",e.data=new Uint8Array(t.from(this.json.raw))),e}},{key:"get_doi",value:function(){var t={status:"ok",data:[]};if(this.json.hasOwnProperty("doi"))for(var e in this.json.doi)t.data.push(this.json.doi[e]);return t}},{key:"get_formulas",value:function(){var t=this,e={status:"",data:[]};return this.json.hasOwnProperty("formulas")&&this.json.formulas.forEach(function(a){try{e.data.push(new r.a(a,t))}catch(s){e.status+="Error creating formula ("+s+") "}}),""===e.status&&(e.status="ok"),e}}]),e}();e.a=i}).call(this,a(13).Buffer)},,function(t,e,a){"use strict";var s=a(3),n=a(4),r=a(7),i=a(5),c=a(6),o=a(1),l=a(0),u=a.n(l),d=function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(r.a)(this,Object(i.a)(e).call(this,t))).state={data:t.data},a}return Object(c.a)(e,t),Object(n.a)(e,[{key:"componentWillMount",value:function(){var t=new Uint8Array(this.state.data),e=new DataView(t.buffer),a=document.createElement("canvas"),s=a.getContext("2d");a.width=e.getUint32(0,!1),a.height=e.getUint32(4,!1);for(var n=s.createImageData(a.width,a.height),r=a.width*a.height,i=0;i<r;i++){var c=8+4*i,o=e.getUint32(c,!1)/255,l=4*i;n.data[l]=o,n.data[l+1]=o,n.data[l+2]=o,n.data[l+3]=255}s.putImageData(n,0,0);var u=a.toDataURL();this.setState({dataURI:u})}},{key:"render",value:function(){return u.a.createElement("img",{src:this.state.dataURI,alt:""})}}]),e}(l.Component),h=a(17),m=a.n(h),f={position:"fixed",top:"0",left:"0",right:"0",bottom:"0",maxWidth:"50%",maxHeight:"40%",margin:"auto",borderRadius:"20px",backgroundColor:"rgba(0,0,0, 0.6)",zIndex:"10"},p={position:"absolute",left:"5%",right:"5%",color:"#3d3d3d",top:"10%",bottom:"5%",margin:"auto",borderRadius:"20px",background:"white",text:"left",overflow:"auto"},b={marginTop:"5%",marginBottom:"5%"},v={zIndex:"50,"},w=function(t){function e(){return Object(s.a)(this,e),Object(r.a)(this,Object(i.a)(e).apply(this,arguments))}return Object(c.a)(e,t),Object(n.a)(e,[{key:"render",value:function(){return u.a.createElement(m.a,{axis:"both",handle:".handle",defaultPosition:{x:0,y:0},position:null,grid:[25,25],scale:1,onStart:this.handleStart,onDrag:this.handleDrag,onStop:this.handleStop},u.a.createElement("div",{style:f,className:"handle"},u.a.createElement("div",{className:"d-flex justify-content-end m-0"},u.a.createElement("button",{style:v,className:"btn btn-md btn-secondary bottom m-1",onClick:this.props.closePopup},u.a.createElement("span",{role:"img","aria-label":"close"},"\u274c"))),u.a.createElement("div",{style:p,className:"popup\\_inner"},u.a.createElement("div",{style:b},u.a.createElement("pre",{className:"text-left row m-2 container-fluid"},this.props.data)))))}}]),e}(u.a.Component),g=function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(r.a)(this,Object(i.a)(e).call(this,t))).state={application:t.application,data:t.data,doi:"",viewerIsShown:t.viewerIsShown,showData:t.showData},a.state.application&&(a.updateDataView=a.updateDataView.bind(Object(o.a)(Object(o.a)(a))),a.state.application.setUpdateDataView(a.updateDataView)),a.clearDataView=a.clearDataView.bind(Object(o.a)(Object(o.a)(a))),a}return Object(c.a)(e,t),Object(n.a)(e,[{key:"clearDataView",value:function(){this.updateDataView(null)}},{key:"updateDataView",value:function(t){this.setState({data:t})}},{key:"render",value:function(){if(null==this.state.data)return u.a.createElement("div",{className:"DataViewer p-2 bg-secondary rounded mb-0 text-white"},this.props.viewerIsShown?u.a.createElement("div",null,u.a.createElement("div",{className:"col-md-12 font-weight-bold m-2"},"DATA VIEW"),u.a.createElement("div",{className:"alert alert-success alert-dismissible fade show text-truncate text-left m-2"},"Fetch manifest and/or data")," "):null);var t="";this.state.application&&(t=u.a.createElement("div",null,u.a.createElement("button",{className:"btn btn-sm btn-warning m-3",onClick:this.clearDataView},"Clear")));var e="Not supported to view MIME ("+this.state.data.MIME+")";return-1!==this.state.data.MIME.indexOf("text")&&(e=this.stringFromUTF8Array(this.state.data.data)),-1!==this.state.data.MIME.indexOf("json")&&(e=JSON.stringify(this.state.data.data,void 0,2)),-1!==this.state.data.MIME.indexOf("manifest")&&(e=JSON.stringify(this.state.data.data.json,void 0,2)),-1!==this.state.data.MIME.indexOf("octet-stream")&&(e=this.stringFromOctetStream(this.state.data.data)),-1!==this.state.data.MIME.indexOf("BufImage/Grey32")&&(e=u.a.createElement(d,{data:this.state.data.data})),!1!==this.props.viewerIsShown?u.a.createElement("div",{className:"DataViewer bg-secondary rounded mb-0 text-white p-2"},u.a.createElement("div",{className:"col-md-12 font-weight-bold m-2"},"DATA VIEW"),u.a.createElement("div",{className:"alert alert-success alert-dismissible fade show text-truncate m-2"},u.a.createElement("pre",{className:"text-left row m-2 container-fluid"},e)),u.a.createElement("div",null,this.state.doi),u.a.createElement("div",{className:"col-md-12"},t)):!1!==this.props.showData?u.a.createElement(w,{data:e,closePopup:this.props.dataTogglePopup}):null}},{key:"stringFromOctetStream",value:function(t){var e="",a=t.length;a>50&&(a=50,e="First 50 bytes: ");for(var s=0;s<a;){var n=t[s++].toString(16).toUpperCase();1===n.length&&(n="0"+n),e+=n}return e}},{key:"stringFromUTF8Array",value:function(t){for(var e=500..toFixed(0),a=[1,1,1,1,2,2,3,0],s=t.length,n="",r=0;r<s;)if(s>1e3&&r>=e&&(r===Number(e)&&(n+="..."+(s-e-e)+" bytes..."),r<s-e))r++;else{var i=t[r++];if(128&i){var c=a[i>>3&7];if(!(64&i)||!c||r+c>s)return null;for(i&=63>>c;c>0;c-=1){var o=t[r++];if(128!==(192&o))return null;i=i<<6|63&o}}n+=String.fromCharCode(i)}return n}}]),e}(l.Component);e.a=g},function(t,e,a){"use strict";var s=a(3),n=a(4),r=a(2),i=a.n(r),c=a(8),o=function(){function t(e){Object(s.a)(this,t),this.address=e}return Object(n.a)(t,[{key:"get_manifest_by_doi",value:function(){var t=Object(c.a)(i.a.mark(function t(e){var a,s,n,r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={status:"",data:null},s=this.address+"/search?doi="+e,t.prev=2,t.next=5,fetch(s);case 5:if(n=t.sent,t.prev=6,200!==n.status){t.next=15;break}return t.next=10,n.json();case 10:r=t.sent,a.data=r,a.status="ok",t.next=16;break;case 15:a.status="Response error: "+n.statusText;case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(6),a.status="Error parsing request ("+t.t0+")";case 21:t.next=26;break;case 23:t.prev=23,t.t1=t.catch(2),a.status="Error requesting server ("+t.t1+")";case 26:return t.abrupt("return",a);case 27:case"end":return t.stop()}},t,this,[[2,23],[6,18]])}));return function(e){return t.apply(this,arguments)}}()},{key:"get_data_by_doi",value:function(){var t=Object(c.a)(i.a.mark(function t(e){var a,s,n,r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={status:"",data:null},s=this.address+"/raw/"+e,t.prev=2,t.next=5,fetch(s);case 5:if(200!==(n=t.sent).status){t.next=14;break}return t.next=9,n.arrayBuffer();case 9:r=t.sent,a.data=r,a.status="ok",t.next=15;break;case 14:a.status="Response error: "+n.statusText;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),a.status="Error requesting server ("+t.t0+")";case 20:return t.abrupt("return",a);case 21:case"end":return t.stop()}},t,this,[[2,17]])}));return function(e){return t.apply(this,arguments)}}()}]),t}(),l=a(9),u=function(){function t(e,a){if(Object(s.a)(this,t),this.Cache=a,!e.hasOwnProperty("DedicatedServer"))throw new Error("Bad network settings");this.DedicatedServer=new o(e.DedicatedServer)}return Object(n.a)(t,[{key:"search_manifest",value:function(){var t=Object(c.a)(i.a.mark(function t(e){var a,s,n,r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a={status:"Not found",source:null,data:null},0!==(s=e.get_doi()).data.length){t.next=5;break}return a.status="Manifest has no doi",t.abrupt("return",a);case 5:if(!this.DedicatedServer){t.next=22;break}t.t0=i.a.keys(s.data);case 7:if((t.t1=t.t0()).done){t.next=22;break}return n=t.t1.value,t.next=11,this.search_manifest_by_doi(s.data[n]);case 11:if("ok"!==(r=t.sent).status){t.next=19;break}return a.status="ok",a.source=r.source,a.data=r.data,t.abrupt("return",a);case 19:a.status=r.status;case 20:t.next=7;break;case 22:return t.abrupt("return",a);case 23:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"search_manifest_by_doi",value:function(){var t=Object(c.a)(i.a.mark(function t(e){var a,s,n,r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a={status:"",source:null,data:null},!this.DedicatedServer){t.next=15;break}if("ok"!==(s=this.Cache.get_manifest_by_doi(e)).status){t.next=9;break}a.status="ok",a.source="Cache",a.data=s.data,t.next=13;break;case 9:return t.next=11,this.DedicatedServer.get_manifest_by_doi(e);case 11:if("ok"===(n=t.sent).status)try{r=new l.a(n.data),a.status="ok",a.source="Network",a.data=r,this.Cache.set_manifest_by_doi(r,e)}catch(i){a.status="Not valid manifest ("+i+")"}else a.status=n.status;case 13:t.next=16;break;case 15:a.status="Not implimented";case 16:return t.abrupt("return",a);case 17:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"search_data",value:function(){var t=Object(c.a)(i.a.mark(function t(e){var a,s,n,r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a={status:"Not found",source:null,data:null},0!==(s=e.get_doi()).data.length){t.next=5;break}return a.status="Manifest has no doi",t.abrupt("return",a);case 5:if(!this.DedicatedServer){t.next=22;break}t.t0=i.a.keys(s.data);case 7:if((t.t1=t.t0()).done){t.next=22;break}return n=t.t1.value,t.next=11,this.search_data_by_doi(s.data[n]);case 11:if("ok"!==(r=t.sent).status){t.next=19;break}return a.status="ok",a.source=r.source,a.data=r.data,t.abrupt("return",a);case 19:a.status=r.status;case 20:t.next=7;break;case 22:return t.abrupt("return",a);case 23:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"search_data_by_doi",value:function(){var t=Object(c.a)(i.a.mark(function t(e){var a,s,n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a={status:"",source:null,data:null},!this.DedicatedServer){t.next=22;break}if("ok"!==(s=this.Cache.get_data_by_doi(e)).status){t.next=8;break}return a.status="ok",a.source="Cache",a.data=s.data,t.abrupt("return",a);case 8:return t.next=10,this.DedicatedServer.get_data_by_doi(e);case 10:if("ok"!==(n=t.sent).status){t.next=19;break}return a.status="ok",a.source="Network",a.data=n.data,this.Cache.set_data_by_doi(n.data,e),t.abrupt("return",a);case 19:a.status=n.status;case 20:t.next=23;break;case 22:a.status="Not implimented";case 23:return t.abrupt("return",a);case 24:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),t}(),d=function(){function t(){Object(s.a)(this,t),this.manifests=new Map,this.data=new Map}return Object(n.a)(t,[{key:"get_manifest_by_doi",value:function(t){var e={status:"Not found",data:null},a=this.manifests.get(t);return a&&(e.status="ok",e.data=a),e}},{key:"set_manifest_by_doi",value:function(t,e){this.manifests.set(e,t)}},{key:"delete_manifest_by_doi",value:function(t){return this.manifests.delete(t)}},{key:"get_data_by_doi",value:function(t){var e={status:"Not found",data:null},a=this.data.get(t);return a&&(e.status="ok",e.data=a),e}},{key:"get_data_by_manifest",value:function(t){var e={status:"Not found",data:null},a=t.get_doi();if("ok"===a.status)for(var s in a.data){var n=this.data.get(a.data[s]);if(n)return e.status="ok",e.data=n,e}else e.status="Manifest has no doi";return e}},{key:"set_data_by_doi",value:function(t,e){this.data.set(e,new Uint8Array(t))}},{key:"delete_data_by_doi",value:function(t){return this.data.delete(t)}},{key:"clear",value:function(){var t=this.manifests.size+this.data.size;return this.manifests.clear(),this.data.clear(),0!==t}},{key:"get_cached_manifests",value:function(){var t=[];return this.manifests.forEach(function(e,a){t.push({doi:a,value:e})}),t}},{key:"get_cached_manifests_size",value:function(){return this.manifests.size}},{key:"get_cached_data",value:function(){var t=[];return this.data.forEach(function(e,a){t.push({doi:a,value:e})}),t}},{key:"get_cached_data_size",value:function(){return this.data.size}}]),t}(),h=function(){function t(e){if(Object(s.a)(this,t),this.Cache=new d,!e.hasOwnProperty("Network"))throw new Error("Bad engine settings");this.Network=new u(e.Network,this.Cache)}return Object(n.a)(t,[{key:"network",value:function(){return this.Network}},{key:"cache",value:function(){return this.Cache}},{key:"eval_manifest",value:function(){var t=Object(c.a)(i.a.mark(function t(e){var a,s,n,r,c,o;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a={status:"",data:[]},"ok"!==(s=e.get_raw_value()).status){t.next=6;break}return a.status="ok",a.data=s.data,t.abrupt("return",a);case 6:return t.next=8,this.Network.search_data(e);case 8:if("ok"!==(n=t.sent).status){t.next=13;break}return a.status="ok",a.data=n.data,t.abrupt("return",a);case 13:if(0!==(r=e.get_formulas()).data.length){t.next=23;break}return a.status="Manifest has no formulas",t.next=18,this.Network.search_manifest(e);case 18:if("ok"===(e=t.sent).status){t.next=22;break}return a.status=e.status,t.abrupt("return",a);case 22:r=e.data.get_formulas();case 23:t.t0=i.a.keys(r.data);case 24:if((t.t1=t.t0()).done){t.next=36;break}return c=t.t1.value,t.next=28,this.eval_formula(r.data[c]);case 28:if("ok"!==(o=t.sent).status){t.next=33;break}return a.status="ok",a.data=o.data,t.abrupt("return",a);case 33:a.status=o.status,t.next=24;break;case 36:return t.abrupt("return",a);case 37:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"eval_formula",value:function(){var t=Object(c.a)(i.a.mark(function t(e){var a,s,n,r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a={status:"",data:[]},"ok"!==(s=e.get_dependencies()).status){t.next=20;break}t.t0=i.a.keys(s.data);case 4:if((t.t1=t.t0()).done){t.next=18;break}return n=t.t1.value,t.next=8,this.Network.search_data(s.data[n]);case 8:if("ok"===t.sent.status){t.next=16;break}return t.next=12,this.eval_manifest(s.data[n]);case 12:if("ok"===(r=t.sent).status){t.next=16;break}return a.status=r.status,t.abrupt("return",a);case 16:t.next=4;break;case 18:t.next=22;break;case 20:return a.status="Formula has no dependencies",t.abrupt("return",a);case 22:return t.next=24,this.eval(e);case 24:return t.abrupt("return",t.sent);case 25:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"eval",value:function(){var t=Object(c.a)(i.a.mark(function t(e){var a,s,n,r,c,o,l,u,d,h,m,f;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a={status:"",source:null,data:[]},s=null,!e.manifest){t.next=17;break}if("ok"!==(n=e.manifest.get_doi()).status){t.next=17;break}t.t0=i.a.keys(n.data);case 6:if((t.t1=t.t0()).done){t.next=17;break}if(r=t.t1.value,s=n.data[r],"ok"!==(c=this.Cache.get_data_by_doi(s)).status){t.next=15;break}return a.status="ok",a.source="Cache",a.data=c.data,t.abrupt("return",a);case 15:t.next=6;break;case 17:if(o=new Map,"ok"!==(l=e.get_dependencies()).status){t.next=42;break}t.t2=i.a.keys(l.data);case 21:if((t.t3=t.t2()).done){t.next=40;break}return u=t.t3.value,d=l.data[u],t.next=26,this.Cache.get_data_by_manifest(d);case 26:if("ok"!==(h=t.sent).status){t.next=31;break}o.set(d.ArgName,h.data),t.next=38;break;case 31:if("ok"!==(m=d.get_raw_value()).status){t.next=36;break}o.set(d.ArgName,m.data),t.next=38;break;case 36:return a.status="Cache has no data for dependency: "+d.ArgName,t.abrupt("return",a);case 38:t.next=21;break;case 40:t.next=44;break;case 42:return a.status="Formula has no dependencies",t.abrupt("return",a);case 44:return t.next=46,e.eval(o);case 46:return"ok"===(f=t.sent).status?(a.status="ok",a.source="Evaluation",a.data=f.data,s&&this.Cache.set_data_by_doi(f.data,s)):a.status="Error evaluation formula ("+f.status+")",t.abrupt("return",a);case 49:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),t}(),m=function(){function t(e){Object(s.a)(this,t);var a={Network:{DedicatedServer:e}};this.engine=new h(a),this.update_manifest=null,this.update_data_view=null,this.current_manifest=null,this.current_manifest_status="Not defined",this.manifest_focus_list=[]}return Object(n.a)(t,[{key:"setUpdateManifest",value:function(t){this.update_manifest=t}},{key:"setUpdateDataView",value:function(t){this.update_data_view=t}},{key:"updateDataView",value:function(t){null!=this.update_data_view&&this.update_data_view(t)}},{key:"getCache",value:function(){return this.engine.cache()}},{key:"getNetwork",value:function(){return this.engine.network()}},{key:"getCurrentManifest",value:function(){var t={status:"ok",data:null};return t.data=this.current_manifest,t.status=this.current_manifest_status,t}},{key:"setNewManifest",value:function(t){if(null==t)return this.current_manifest=null,this.current_manifest_status="Not defined",void this.update_manifest();this.manifest_focus_list=[],this.current_manifest=null,this.current_manifest_status="Not defined";try{this.current_manifest=new l.a(JSON.parse(t)),this.current_manifest_status="ok"}catch(e){this.current_manifest_status="Error creating manifest: "+e}null!==this.update_manifest&&this.update_manifest()}},{key:"PushManifestFocusList",value:function(t){0===this.manifest_focus_list.length&&this.manifest_focus_list.push({data:this.current_manifest,status:this.current_manifest_status}),this.manifest_focus_list.push({data:t.data,status:t.status}),this.current_manifest=t.data,this.current_manifest_status=t.status,null!==this.update_manifest&&this.update_manifest()}},{key:"PopManifestFocusList",value:function(){var t=this.manifest_focus_list.pop();null!=t&&null!=(t=this.manifest_focus_list.pop())&&(this.current_manifest=t.data,this.current_manifest_status=t.status,null!==this.update_manifest&&this.update_manifest())}},{key:"ManifestFocusListIsEmpty",value:function(){return 0===this.manifest_focus_list.length}}]),t}();e.a=m},,,,,,function(t,e,a){"use strict";var s=a(2),n=a.n(s),r=a(8),i=a(3),c=a(4),o=a(9),l=a(19),u=function(){function t(e,a){if(Object(i.a)(this,t),this.json=e,this.manifest=a,this.wasm=null,this.jsglue=null,this.parameters=[],!this.json.hasOwnProperty("actor"))throw new Error("Not found required property actor");if(!this.json.actor.hasOwnProperty("wasm"))throw new Error("Not found required property actor.wasm");if(this.wasm=new o.a(this.json.actor.wasm),this.wasm.ArgName="actor.wasm",this.json.actor.hasOwnProperty("jsglue")&&(this.jsglue=new o.a(this.json.actor.jsglue),this.jsglue.ArgName="actor.jsglue"),!this.json.hasOwnProperty("parameters"))throw new Error("Not found required property parameters");for(var s in this.json.parameters){var n=new o.a(this.json.parameters[s]);n.ArgName=s,this.parameters.push(n)}}return Object(c.a)(t,[{key:"get_dependencies",value:function(){var t={status:"ok",data:[]};return t.data.push(this.wasm),this.jsglue&&t.data.push(this.jsglue),this.parameters.forEach(function(e){t.data.push(e)}),t}},{key:"eval",value:function(){var t=Object(r.a)(n.a.mark(function t(e){var a,s,r,i,c,o,u,d,h;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a={status:"",data:[]},null!==(s=e.get("actor.wasm"))){t.next=5;break}return a.status="Evaluation failed, has no actor.wasm data",t.abrupt("return",a);case 5:if(r=null,!this.jsglue){t.next=11;break}if(null!=(r=e.get("actor.jsglue"))){t.next=11;break}return a.status="Evaluation failed, has no actor.jsglue data",t.abrupt("return",a);case 11:i=[],t.t0=n.a.keys(this.parameters);case 13:if((t.t1=t.t0()).done){t.next=24;break}if(c=t.t1.value,o=this.parameters[c].ArgName,null!=(u=e.get(o))){t.next=20;break}return a.status="Evaluation failed, has no "+o+" data",t.abrupt("return",a);case 20:u.ArgName=o,i.push(u),t.next=13;break;case 24:return d=new l.a(s,r),t.next=27,d.init();case 27:if("ok"!==(a=t.sent).status){t.next=33;break}return t.next=31,d.exec(i);case 31:"ok"===(a=t.sent).status&&this.manifest&&"ok"===(h=this.manifest.get_mime()).status&&(a.data.MIME=h.data);case 33:return t.abrupt("return",a);case 34:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),t}();e.a=u},function(t,e,a){"use strict";(function(t){var s=a(2),n=a.n(s),r=a(8),i=a(3),c=a(4),o=function(){function e(t,a){Object(i.a)(this,e),this.raw_wasm=t,this.jsglue=a,this.wasm=null,this.wasm_memory=null}return Object(c.a)(e,[{key:"init",value:function(){var t=Object(r.a)(n.a.mark(function t(){var e,a,s,r,i,c=this;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e={status:"ok"},t.prev=1,null!==this.wasm){t.next=19;break}if(null!==this.jsglue){t.next=14;break}return t.next=6,new WebAssembly.compile(this.raw_wasm);case 6:return a=t.sent,t.next=9,new WebAssembly.instantiate(a,[]);case 9:s=t.sent,this.wasm=s.exports,this.wasm_memory=this.wasm.memory,t.next=19;break;case 14:return r=this.stringFromUTF8Array(this.jsglue),i=Function('"use strict";'+r+"return Module;")(),t.next=18,new Promise(function(t,e){c.wasm=new i({wasmBinary:c.raw_wasm,onRuntimeInitialized:function(){t("onRuntimeInitialized")}})});case 18:this.wasm_memory=this.wasm.wasmMemory;case 19:t.next=24;break;case 21:t.prev=21,t.t0=t.catch(1),e.status=this.create_error("Exception while init: "+t.t0);case 24:return t.abrupt("return",e);case 25:case"end":return t.stop()}},t,this,[[1,21]])}));return function(){return t.apply(this,arguments)}}()},{key:"exec",value:function(){var e=Object(r.a)(n.a.mark(function e(a){var s,r,i,c,o,l,u,d,h,m,f,p,b,v,w,g,k,_;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s={status:"",data:[]},e.prev=1,e.next=4,this.init();case 4:if("ok"!==(r=e.sent).status){e.next=44;break}e.t0=n.a.keys(a);case 7:if((e.t1=e.t0()).done){e.next=41;break}if(i=e.t1.value,null!=a[i]){e.next=12;break}return s.status=this.create_error("Wrong usage, one of arguments is empty"),e.abrupt("return",s);case 12:if(c=0,a[i].hasOwnProperty("ArgName")){e.next=16;break}return s.status=this.create_error("Wrong usage, one of arguments has no 'ArgName' property"),e.abrupt("return",s);case 16:if(o=new Uint8Array(t.from(a[i].ArgName)),l=o.length,0===(u=this.wasm._set_arg_name(i,o.length))){e.next=28;break}for(d=new Uint8ClampedArray(this.wasm_memory.buffer,u,l),h=0;h<d.length;h++)d[h]=o[h];if(0!==(c=this.wasm._get_arg_index(i))){e.next=26;break}return s.status=this.create_last_error(),e.abrupt("return",s);case 26:e.next=30;break;case 28:return s.status=this.create_last_error(),e.abrupt("return",s);case 30:if(m=a[i].length,0===(f=this.wasm._set_arg(c,m))){e.next=37;break}for(p=new Uint8ClampedArray(this.wasm_memory.buffer,f,m),b=0;b<p.length;b++)p[b]=a[i][b];e.next=39;break;case 37:return s.status=this.create_last_error(),e.abrupt("return",s);case 39:e.next=7;break;case 41:if(this.wasm._exec())if(v=this.wasm._get_result_size(),0!==(w=this.wasm._get_result())){for(g=[],k=new Uint8ClampedArray(this.wasm_memory.buffer,w,v),_=0;_<k.length;_++)g.push(k[_]);s.status="ok",s.data=g}else s.status=this.create_last_error();else s.status=this.create_last_error();e.next=45;break;case 44:s.status=this.create_error("Init error: "+r.status);case 45:e.next=50;break;case 47:e.prev=47,e.t2=e.catch(1),s.status=this.create_error("Exception while exec: "+e.t2);case 50:return e.abrupt("return",s);case 51:case"end":return e.stop()}},e,this,[[1,47]])}));return function(t){return e.apply(this,arguments)}}()},{key:"create_error",value:function(t){return t}},{key:"create_last_error",value:function(){for(var t=[],e=this.wasm._get_last_error(),a=this.wasm._get_last_error_size(),s=new Uint8ClampedArray(this.wasm_memory.buffer,e,a),n=0;n<s.length;n++)t.push(s[n]);return this.create_error(this.stringFromUTF8Array(t))}},{key:"stringFromUTF8Array",value:function(t){for(var e=[1,1,1,1,2,2,3,0],a=t.length,s="",n=0;n<a;){var r=t[n++];if(128&r){var i=e[r>>3&7];if(!(64&r)||!i||n+i>a)return null;for(r&=63>>i;i>0;i-=1){var c=t[n++];if(128!==(192&c))return null;r=r<<6|63&c}}s+=String.fromCharCode(r)}return s}}]),e}();e.a=o}).call(this,a(13).Buffer)},function(t,e,a){"use strict";(function(t){var s=a(3),n=a(4),r=a(7),i=a(5),c=a(6),o=a(1),l=a(0),u=a.n(l),d=a(10),h=a.n(d),m=a(12),f=a(11),p=a(9),b=function(e){function a(t){var e;return Object(s.a)(this,a),(e=Object(r.a)(this,Object(i.a)(a).call(this,t))).state={textAreaID:t.textAreaID,manifestDataHolderID:t.manifestDataHolderID,viewerIsShown:!1,showData:!1},e.actionClick=e.actionClick.bind(Object(o.a)(Object(o.a)(e))),e}return Object(c.a)(a,e),Object(n.a)(a,[{key:"actionClick",value:function(e){var a=this;h.a.unmountComponentAtNode(document.getElementById(this.state.manifestDataHolderID));var s=e.target.innerHTML;e.target.innerHTML="evaluating...",this.setState({viewerIsShown:!this.state.viewerIsShown});var n=new m.a("https://node1.kolmoblocks.org"),r={MIME:"",data:""},i=null;try{var c=document.getElementById(this.state.textAreaID).value;i=new p.a(JSON.parse(c))}catch(o){r.MIME="text",r.data=new Uint8Array(t.from(""+o))}if(null==i)return h.a.render(u.a.createElement(f.a,{viewerIsShown:this.state.viewerIsShown,showData:this.state.showData,data:r}),document.getElementById(this.state.manifestDataHolderID)),void(e.target.innerHTML=s);i.target=e.target,i.btn_caption=s,n.engine.eval_manifest(i).then(function(t){i.target.innerHTML=i.btn_caption,t.data.MIME?r.MIME=t.data.MIME:r.MIME="text",r.data=t.data,h.a.render(u.a.createElement(f.a,{viewerIsShown:a.state.viewerIsShown,showData:a.state.showData,data:r}),document.getElementById(a.state.manifestDataHolderID))})}},{key:"render",value:function(){return u.a.createElement("button",{className:"btn btn-sm btn-warning m-2 float-center",onClick:this.actionClick},"View Data")}}]),a}(l.Component);e.a=b}).call(this,a(13).Buffer)},function(t,e,a){t.exports=a(33)},,,,,function(t,e,a){},function(t,e,a){},,,,,,function(t,e,a){"use strict";a.r(e);var s=a(0),n=a.n(s),r=a(10),i=a.n(r),c=(a(26),a(3)),o=a(4),l=a(7),u=a(5),d=a(6),h=a(1),m=(a(27),function(t){function e(t){var a;return Object(c.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).state={cache:t.cache,updateApp:t.updateApp,application:t.application,showData:t.showData},a.handleCacheOper=a.handleCacheOper.bind(Object(h.a)(Object(h.a)(a))),a.handleDataView=a.handleDataView.bind(Object(h.a)(Object(h.a)(a))),a.handleManifestView=a.handleManifestView.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(e,t),Object(o.a)(e,[{key:"handleCacheOper",value:function(t){this.state.cache[t.target.name](t.target.value)&&this.state.updateApp()}},{key:"strDigest",value:function(t){var e=t;return"string"!==typeof t&&(e=new Uint8Array(t).toString()),e.length>20?e.substr(0,10)+"..."+e.substr(e.length-10,10):e}},{key:"viewManifestButton",value:function(t){return n.a.createElement("button",{className:"btn btn-sm btn-success ",onClick:this.handleManifestView,value:t},"View Manifest")}},{key:"handleManifestView",value:function(t){var e=this.state.cache.get_manifest_by_doi(t.target.value);this.state.application.updateDataView({MIME:"manifest",data:e.data}),this.props.dataTogglePopup()}},{key:"viewDataButton",value:function(t){var e=this.state.cache.get_manifest_by_doi(t),a=this.state.cache.get_data_by_doi(t);return"ok"===e.status&&"ok"===a.status?n.a.createElement("button",{className:"btn btn-sm btn-success",onClick:this.handleDataView,value:t},"View Data"):""}},{key:"handleDataView",value:function(t){var e=this.state.cache.get_manifest_by_doi(t.target.value),a=this.state.cache.get_data_by_doi(t.target.value);this.state.application.updateDataView({MIME:e.data.get_mime().data,data:a.data}),this.props.dataTogglePopup()}},{key:"render",value:function(){var t=this,e=this.state.cache,a=e.get_cached_manifests(),s=e.get_cached_data(),r="col-md-6 alert alert-success alert-dismissible fade show",i=a.map(function(e){return n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:r,title:e.doi}," ",t.strDigest(e.doi)),n.a.createElement("div",{className:r},t.strDigest(JSON.stringify(e.value))),n.a.createElement("div",{className:"col-md-6"},t.viewManifestButton(e.doi)),n.a.createElement("div",{className:"col-md-6"},n.a.createElement("button",{className:"btn btn-sm btn-danger",onClick:t.handleCacheOper,name:"delete_manifest_by_doi",value:e.doi},"Delete")),n.a.createElement("div",{className:"col-md-12 p-2"}))}),c=s.map(function(e){return n.a.createElement("div",{className:"row p-2"},n.a.createElement("div",{className:r,title:e.doi},t.strDigest(e.doi)),n.a.createElement("div",{className:r},t.strDigest(e.value)," Data length = ",e.value.length),n.a.createElement("div",{className:"col-md-6"},t.viewDataButton(e.doi)),n.a.createElement("div",{className:"col-md-6"},n.a.createElement("button",{className:"btn btn-sm btn-danger",onClick:t.handleCacheOper,name:"delete_data_by_doi",value:e.doi},"Delete")))});return n.a.createElement("div",{className:"Cache col-lg-12 bg-secondary m-2 text-white"},n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-12 font-weight-bold"}," CACHE ")),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-10  text-md-left p-2 border-top font-weight-bold"},"Entity type"),n.a.createElement("div",{className:"col-md-2 p-2 border-top text-left font-weight-bold"},"Count")),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-9 p-2 text-md-left"},"Manifest"),n.a.createElement("div",{className:"col-md-2 alert alert-success alert-dismissible fade show m-1"},e.get_cached_manifests_size())),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-9 p-2 text-md-left"},"Data"),n.a.createElement("div",{className:"col-md-2  alert alert-success alert-dismissible fade show m-1"},e.get_cached_data_size()),n.a.createElement("div",{className:"col-md-12 border-bottom"}),n.a.createElement("div",{className:"col-md-12"},n.a.createElement("button",{className:"btn btn-sm btn-warning m-3",onClick:this.handleCacheOper,name:"clear",value:"()"},"Clear"))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-6  text-md-left font-weight-bold p-2"},"DOI"),n.a.createElement("div",{className:"col-md-6 text-md-left font-weight-bold p-2"},"Manifest")),i,n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-12 p-3 border-bottom"}),n.a.createElement("div",{className:"col-md-6  text-md-left font-weight-bold p-2"},"DOI"),n.a.createElement("div",{className:"col-md-6  text-md-left font-weight-bold p-2"},"Data")),c))}}]),e}(s.Component)),f=a(2),p=a.n(f),b=a(14),v=a(8),w=function(t){function e(t){var a;return Object(c.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).state={network:t.network,updateApp:t.updateApp,fetchManifestResult:"",fetchDataResult:"",doi:"",defaultValue:"Pick DOI from the list"},a.handleFetch=a.handleFetch.bind(Object(h.a)(Object(h.a)(a))),a.handleDOIChange=a.handleDOIChange.bind(Object(h.a)(Object(h.a)(a))),a.handleClearDOI=a.handleClearDOI.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(e,t),Object(o.a)(e,[{key:"handleDOIChange",value:function(t){this.setState({doi:t.target.value})}},{key:"handleClearDOI",value:function(){var t=this;this.setState({doi:""},function(){return console.log(t.state.doi)})}},{key:"handleFetch",value:function(){var t=Object(v.a)(p.a.mark(function t(e){var a,s=this;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.target.value,""!==this.state.doi){t.next=4;break}return this.setState(Object(b.a)({},a,"Empty DOI")),t.abrupt("return");case 4:this.state.network[e.target.name](this.state.doi).then(function(t){s.setState(Object(b.a)({},a,t.status)),"ok"===t.status&&s.state.updateApp()});case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement("div",{className:"container col-md-12"},n.a.createElement("div",{className:"Network  bg-secondary rounded-lg text-white"},n.a.createElement("div",{className:"col-md-12 font-weight-bold m-2"},"NETWORK"),n.a.createElement("select",{className:"form-control  alert-success alert-dismissible fade show",id:"dois",onChange:this.handleDOIChange,value:this.state.doi},n.a.createElement("option",{className:"alert-success alert-dismissible fade show",defaultValue:!0},"Choose DOI from the list"),n.a.createElement("option",{className:"alert-success alert-dismissible fade show",value:"03FEE1468FF693744FDEFB20D41E793E6A03CFBDD3687901EA99271DCC702DF8"},"Doi 1 ",this.state.doi),n.a.createElement("option",{className:"alert-success alert-dismissible fade show",value:"00A66067BD93F5417D9E94858795B6E852EF90DE790C543B1E47A2E009D435F3"},"Doi 2 ",this.state.doi),n.a.createElement("option",{className:"alert-success alert-dismissible fade show",value:"0487DEB729ABE42001007D1ADBEF310FE6BCBD308B7A889458F2E1F8B1C5D14E"},"Doi 3 ",this.state.doi)),n.a.createElement("div",{style:{display:this.state.doi?"block":"none"}},n.a.createElement("div",{className:"col-md-12"},n.a.createElement("button",{className:"btn btn-sm btn-primary m-2",onClick:this.handleFetch,name:"search_manifest_by_doi",value:"fetchManifestResult"},"Fetch Manifest"),n.a.createElement("div",{className:"alert alert-success"},this.state.fetchManifestResult)),n.a.createElement("div",{className:"col-md-12"},n.a.createElement("button",{className:"btn btn-sm btn-primary m-2",onClick:this.handleFetch,name:"search_data_by_doi",value:"fetchDataResult"},"Fetch Data"),n.a.createElement("div",{className:"col-md-12 alert alert-success",style:{display:this.state.doi?"block":"none"}},this.state.fetchDataResult)),n.a.createElement("div",{className:"col-md-12"},n.a.createElement("button",{className:"btn btn-sm btn-warning",onClick:this.handleClearDOI,name:"clear_DOI"},"Clear")," "))))}}]),e}(s.Component),g=function(t){function e(t){var a;return Object(c.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).state={application:t.application,updateApp:t.updateApp,formula:t.formula,cache:t.application.engine.cache(),network:t.application.engine.network(),evalResult:"",dataTogglePopup:t.dataTogglePopup},a.handleEval=a.handleEval.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(e,t),Object(o.a)(e,[{key:"handleEval",value:function(t){var e=this,a=t.target,s=t.target.innerHTML;t.target.innerHTML="evaluating...",this.state.application.engine.eval(this.state.formula).then(function(t){e.setState({evalResult:t.status}),e.state.updateApp(),a.innerHTML=s})}},{key:"getDependencies",value:function(){var t=this,e=this.props.formula.get_dependencies();return 0===e.data.length?"ok"!==e.status?"Error getting dependency: "+e.status:"Has no dependency":e.data.map(function(e){return n.a.createElement("div",null,e.ArgName,n.a.createElement(k,{application:t.state.application,dataTogglePopup:t.state.dataTogglePopup,updateApp:t.state.updateApp,manifest:{data:e,status:"ok"}}))})}},{key:"render",value:function(){return n.a.createElement("div",{className:"col-md-12"},n.a.createElement("button",{className:"btn btn-sm btn-warning m-2",onClick:this.handleEval},"Evaluate Formula"),n.a.createElement("div",{className:"border-bottom m-2"}),this.state.evalResult,this.getDependencies())}}]),e}(s.Component),k=function(t){function e(t){var a;return Object(c.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).state={application:t.application,updateApp:t.updateApp,cache:t.application.engine.cache(),network:t.application.engine.network(),manifest:t.manifest,init_manifest:t.manifest,rootManifest:t.rootManifest,showData:t.showData,dataTogglePopup:t.dataTogglePopup},a.handleFetchManifest=a.handleFetchManifest.bind(Object(h.a)(Object(h.a)(a))),a.handleRemoveManifest=a.handleRemoveManifest.bind(Object(h.a)(Object(h.a)(a))),a.handleFetchData=a.handleFetchData.bind(Object(h.a)(Object(h.a)(a))),a.handleRemoveData=a.handleRemoveData.bind(Object(h.a)(Object(h.a)(a))),a.handleViewData=a.handleViewData.bind(Object(h.a)(Object(h.a)(a))),a.handleManifestView=a.handleManifestView.bind(Object(h.a)(Object(h.a)(a))),a.state.rootManifest&&(a.updateManifest=a.updateManifest.bind(Object(h.a)(Object(h.a)(a))),a.state.application.setUpdateManifest(a.updateManifest)),a.handleChangeManifestFocus=a.handleChangeManifestFocus.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(e,t),Object(o.a)(e,[{key:"handleViewData",value:function(){this.state.application.updateDataView({MIME:this.state.manifest.data.get_mime().data,data:this.state.manifest.rawData}),this.state.updateApp(),this.state.dataTogglePopup()}},{key:"handleManifestView",value:function(){var t=this.props.manifest;this.state.updateApp(),this.state.application.updateDataView({MIME:"manifest",data:t.data}),this.state.dataTogglePopup()}},{key:"handleChangeManifestFocus",value:function(){this.state.rootManifest?this.state.application.PopManifestFocusList():this.state.application.PushManifestFocusList(this.state.manifest)}},{key:"updateManifest",value:function(){this.setState({manifest:this.state.application.getCurrentManifest(),init_manifest:this.state.application.getCurrentManifest()}),this.state.updateApp()}},{key:"handleFetchManifest",value:function(t){var e=this,a=t.target,s=t.target.innerHTML;t.target.innerHTML="fetching...",this.state.network.search_manifest_by_doi(t.target.value).then(function(t){"ok"===t.status?(e.setState({manifest:t}),e.state.updateApp()):a.innerHTML=s})}},{key:"handleRemoveManifest",value:function(t){this.state.cache.delete_manifest_by_doi(t.target.value)&&(this.setState({manifest:this.state.init_manifest}),this.state.updateApp())}},{key:"handleFetchData",value:function(t){var e=this,a=t.target,s=t.target.innerHTML;t.target.innerHTML="fetching...",this.state.network.search_data_by_doi(t.target.value).then(function(t){if("ok"===t.status){var n=e.state.manifest;n.rawData=t.data,e.setState({manifest:n})}else a.innerHTML=s;e.state.updateApp()})}},{key:"handleRemoveData",value:function(t){if(this.state.cache.delete_data_by_doi(t.target.value)){var e=this.state.manifest;e.rawData=null,this.setState({manifest:e}),this.state.updateApp()}}},{key:"getManifestHeader",value:function(){var t="Has no DOI",e=this.state.manifest.data.get_doi();if("ok"===e.status){var a=e.data[0],s=this.state.cache.get_manifest_by_doi(a);"ok"===s.status?this.state.manifest=s:this.state.manifest=this.state.init_manifest;var r=this.state.cache.get_data_by_doi(a);if("ok"===r.status)this.state.manifest.rawData=r.data;else{var i=this.state.manifest.data.get_raw_value();"ok"===i.status?this.state.manifest.rawData=i.data:this.state.manifest.rawData=null}var c="ok"===this.state.manifest.data.get_mime().status?"MIME='"+this.state.manifest.data.get_mime().data+"'":this.state.manifest.data.get_mime().status,o="ok"===this.state.manifest.data.get_size().status?"size="+this.state.manifest.data.get_size().data:this.state.manifest.data.get_size().status;if(t=a?a.length>10?a.substr(0,10)+"..."+a.substr(a.length-10,10)+" ("+c+", "+o:a+" ("+c+", "+o:"Has no DOI ("+c+", "+o,null!=this.state.manifest.rawData){var l=new Uint8Array(this.state.manifest.rawData).toString();t=t+", Data="+l.substr(0,10)+"..."+l.substr(l.length-10,10)}else t+=", Has no data";t+=")"}var u=n.a.createElement("div",{className:"text-left m-2"},n.a.createElement("p",{className:"m-1"},"MIME: ",null!==this.state.manifest.data.get_mime().data?this.state.manifest.data.get_mime().data:"Has no MIME"),n.a.createElement("p",{className:"m-1"},"Size: ",null!==this.state.manifest.data.get_size().data?this.state.manifest.data.get_size().data:"Has no size"),n.a.createElement("p",{className:"m-1 text-truncate"},"DOI: ",null!==this.state.manifest.data.get_doi().data?this.state.manifest.data.get_doi().data:"Has no DOI"),n.a.createElement("p",{className:"m-1"}," Raw Value: ",null!==this.state.manifest.rawData?this.state.manifest.data.get_raw_value().data:"There is no raw value"));return t&&u}},{key:"getManifestControls",value:function(){var t,e,a="",s=this.state.manifest.data.get_doi();if(t=n.a.createElement("button",{className:"btn btn-sm btn-success m-1",onClick:this.handleManifestView},"View Manifest"),e=n.a.createElement("button",{className:"btn btn-sm btn-success m-1",onClick:this.handleViewData},"View Data"),"ok"===s.status){var r=s.data[0],i=this.state.cache.get_manifest_by_doi(r),c="";c="ok"===i.status?n.a.createElement("div",null,n.a.createElement("button",{className:"btn btn-sm btn-danger m-1",onClick:this.handleRemoveManifest,value:r},"Remove Manifest")):n.a.createElement("div",null,n.a.createElement("button",{className:"btn btn-sm btn-primary m-1",onClick:this.handleFetchManifest,value:r},"Fetch Manifest"));var o=n.a.createElement("div",null,t),l=this.state.cache.get_data_by_doi(r),u="";u="ok"===l.status?n.a.createElement("div",null,n.a.createElement("button",{className:"btn btn-sm btn-danger m-1",onClick:this.handleRemoveData,value:r},"Remove Data")):n.a.createElement("div",null,n.a.createElement("button",{className:"btn btn-sm btn-primary m-1",onClick:this.handleFetchData,value:r},"Fetch Data"));var d="";"ok"!==i.status&&"ok"!==this.state.manifest.data.get_mime().status||"ok"!==l.status?"ok"===this.state.manifest.data.get_mime().status&&this.state.manifest.rawData&&(d=n.a.createElement("div",null,n.a.createElement("button",{className:"btn btn-sm btn-info m-1",onClick:this.handleViewData},"View Data"))):d=n.a.createElement("div",null,e),a=n.a.createElement("div",{className:"btn-group bg-secondary border-0",role:"group","aria-label":"Manifest controls"},n.a.createElement("div",null,c),n.a.createElement("div",null,u),n.a.createElement("div",null,d),n.a.createElement("div",null,o))}return a}},{key:"getManifestFormulas",value:function(){var t=this,e=this.state.manifest.data.get_formulas();return 0===e.data.length?"ok"!==e.status?"Error getting formulas: "+e.status:"Has no formulas":e.data.map(function(e){return n.a.createElement("div",{className:"bg-secondary text-white"},n.a.createElement(g,{application:t.state.application,dataTogglePopup:t.state.dataTogglePopup,updateApp:t.state.updateApp,formula:e}))})}},{key:"render",value:function(){if(null==this.state.manifest||"ok"!==this.state.manifest.status){var t=null!=this.state.manifest?this.state.manifest.status:"is not defined";return n.a.createElement("nav",{className:"Manifest bg-secondary text-white m-2"},n.a.createElement("div",{className:"alert alert-success alert-dismissible fade show rounded-lg"},n.a.createElement("div",{className:"col-md-12 font-weight-bold"},"MANIFEST"),n.a.createElement("div",null,t)))}var e=n.a.createElement("button",{className:"btn btn-md btn-secondary",onClick:this.handleChangeManifestFocus},n.a.createElement("span",{role:"img","aria-label":"lookup"},"\ud83d\udd0d"));return this.state.rootManifest&&(e=!1===this.state.application.ManifestFocusListIsEmpty()?n.a.createElement("button",{className:"btn btn-md btn-secondary",onClick:this.handleChangeManifestFocus},n.a.createElement("span",{role:"img","aria-label":"return"},"\u23ce")):""),n.a.createElement("nav",{className:"Manifest"},n.a.createElement("div",{className:"p-1 border-0 bg-secondary rounded-lg text-white"},n.a.createElement("div",{className:"d-flex justify-content-end m-0"},e),n.a.createElement("div",{className:"alert alert-success alert-dismissible fade show rounded-lg"}," ",this.getManifestHeader()),n.a.createElement("div",null,this.getManifestControls()),n.a.createElement("div",null,this.getManifestFormulas())))}}]),e}(s.Component),_=a(11),y=function(t){function e(t){var a;return Object(c.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).state={cacheIsShown:t.cacheIsShown,networkIsShown:t.networkIsShown,viewerIsShown:t.viewerIsShown,application:t.application},a}return Object(d.a)(e,t),Object(o.a)(e,[{key:"render",value:function(){return n.a.createElement("div",{className:"NavTabs bg-secondary text-white rounded-lg p-4"},n.a.createElement("ul",{className:"nav nav-tabs bg-secondary md-tabs",id:"myTabMD",role:"tablist"},n.a.createElement("li",{className:"nav-item "},n.a.createElement("a",{className:"nav-link active btn btn-sm m-2 "+(this.props.cacheIsShown||this.props.networkIsShown||this.props.viewerIsShown?"btn-secondary":"btn-warning"),id:"home-tab-md","data-toggle":"tab",href:"#home-md",role:"tab","aria-controls":"network-md","aria-selected":"true",onClick:this.props.handleHomePage},"Home")),n.a.createElement("li",{className:"nav-item"},n.a.createElement("a",{className:"nav-link active btn btn-sm m-2 "+(this.props.cacheIsShown?"btn-warning":"btn-secondary"),id:"cache-tab-md","data-toggle":"tab",href:"#cache-md",role:"tab","aria-controls":"cache-md","aria-selected":"false",onClick:this.props.handleShowCache},"Cache")),n.a.createElement("li",{className:"nav-item"},n.a.createElement("a",{className:"nav-link active btn btn-sm m-2 "+(this.props.networkIsShown?"btn-warning":"btn-secondary"),id:"network-tab-md","data-toggle":"tab",href:"#network-md",role:"tab","aria-controls":"network-md","aria-selected":"false",onClick:this.props.handleShowNetwork},"Network")),n.a.createElement("li",{className:"nav-item"},n.a.createElement("a",{className:"nav-link active btn btn-sm m-2 "+(this.props.viewerIsShown?"btn-warning":"btn-secondary"),id:"viewer-tab-md","data-toggle":"tab",href:"#viewer-md",role:"tab","aria-controls":"viewer-md","aria-selected":"false",onClick:this.props.handleShowViewer},"Viewer")),n.a.createElement("li",{className:"nav-item"},n.a.createElement("a",{className:"nav-link active btn btn-sm m-2 "+("ok"===this.props.application.current_manifest_status?"btn-warning":"btn-secondary"),id:"viewer-tab-md","data-toggle":"tab",href:"#viewer-md",role:"tab","aria-controls":"viewer-md","aria-selected":"false",onClick:this.props.handleClearAll},"Clear All"))))}}]),e}(n.a.Component),E=function(t){function e(t){var a;return Object(c.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).dataTogglePopup=function(){a.setState({showData:!a.state.showData})},a.handleShowCache=function(){a.setState({cacheIsShown:!a.state.cacheIsShown})},a.handleShowNetwork=function(){a.setState({networkIsShown:!a.state.networkIsShown})},a.handleShowViewer=function(){a.setState({viewerIsShown:!a.state.viewerIsShown})},a.handleHomePage=function(){a.setState({cacheIsShown:!1,networkIsShown:!1,viewerIsShown:!1})},a.handleClearAll=function(){a.state.application.setNewManifest(null),a.state.cache.clear(),a.updateApp()},a.state={application:t.application,cache:t.application.getCache(),network:t.application.getNetwork(),cacheIsShown:!1,networkIsShown:!1,viewerIsShown:!1,showData:!1},a.updateApp=a.updateApp.bind(Object(h.a)(Object(h.a)(a))),a.dataTogglePopup=a.dataTogglePopup.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(e,t),Object(o.a)(e,[{key:"updateApp",value:function(){this.forceUpdate()}},{key:"render",value:function(){return n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"App col-lg-12 bg-secondary rounded mb-0 text-white"},n.a.createElement(y,{handleShowCache:this.handleShowCache,handleShowNetwork:this.handleShowNetwork,handleShowViewer:this.handleShowViewer,handleHomePage:this.handleHomePage,handleClearAll:this.handleClearAll,cacheIsShown:this.state.cacheIsShown,networkIsShown:this.state.networkIsShown,viewerIsShown:this.state.viewerIsShown,application:this.state.application}),n.a.createElement("br",null),n.a.createElement("div",null,n.a.createElement(k,{application:this.state.application,updateApp:this.updateApp,showData:this.state.showData,dataTogglePopup:this.dataTogglePopup.bind(this),manifest:this.state.application.getCurrentManifest(),rootManifest:!0})),n.a.createElement("br",null),n.a.createElement("div",null,this.state.cacheIsShown?n.a.createElement(m,{application:this.state.application,showData:this.state.showData,dataTogglePopup:this.dataTogglePopup.bind(this),cache:this.state.cache,updateApp:this.updateApp}):null),n.a.createElement("br",null),n.a.createElement("div",null,this.state.networkIsShown?n.a.createElement(w,{network:this.state.network,updateApp:this.updateApp}):null),n.a.createElement("br",null),n.a.createElement("div",null,n.a.createElement(_.a,{application:this.state.application,handleShowViewer:this.handleShowViewer.bind(this),dataTogglePopup:this.dataTogglePopup.bind(this),showData:this.state.showData,viewerIsShown:this.state.viewerIsShown}))))}}]),e}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var x=a(12),O=function(t){function e(t){var a;return Object(c.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).state={application:t.application,textAreaID:t.textAreaID},a.actionClick=a.actionClick.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(e,t),Object(o.a)(e,[{key:"actionClick",value:function(t){var e=document.getElementById(this.state.textAreaID).value;this.state.application.setNewManifest(e)}},{key:"render",value:function(){return n.a.createElement("button",{className:"btn btn-sm btn-primary m-2 float-center",onClick:this.actionClick},"Manifest to App")}}]),e}(s.Component),j=a(20),N=new x.a("https://node1.kolmoblocks.org");i.a.render(n.a.createElement(E,{application:N}),document.getElementById("root")),document.querySelectorAll("div.interactive-canvas").forEach(function(t){if(t.querySelector("textarea.manifest-text")){var e=t.querySelector("textarea.manifest-text").id,a=t.querySelector("span.run-button-placeholder");if(a&&i.a.render(n.a.createElement(O,{application:N,textAreaID:e}),a),t.querySelector("span.manifest-data-placeholder")){var s=t.querySelector("span.manifest-data-placeholder").id;(a=t.querySelector("span.render-button-placeholder"))&&i.a.render(n.a.createElement(j.a,{textAreaID:e,manifestDataHolderID:s}),a)}}}),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}],[[21,1,2]]]);
//# sourceMappingURL=main.eb0bab1e.chunk.js.map